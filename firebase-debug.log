[debug] [2025-07-16T21:25:34.162Z] ----------------------------------------------------------------------
[debug] [2025-07-16T21:25:34.167Z] Command:       /nix/store/rbdrkcs5kkwpalxcd7c6bnm33lk2955n-nodejs-20.19.0/bin/node /home/user/.global_modules/bin/firebase deploy --only hosting --project=website-5a18c
[debug] [2025-07-16T21:25:34.168Z] CLI Version:   14.10.1
[debug] [2025-07-16T21:25:34.168Z] Platform:      linux
[debug] [2025-07-16T21:25:34.169Z] Node Version:  v20.19.0
[debug] [2025-07-16T21:25:34.169Z] Time:          Wed Jul 16 2025 21:25:34 GMT+0000 (Coordinated Universal Time)
[debug] [2025-07-16T21:25:34.169Z] ----------------------------------------------------------------------
[debug] 
[debug] [2025-07-16T21:25:34.704Z] Object "/hosting" in "firebase.json" has unknown property: {"additionalProperty":"webFrameworks"}
[debug] [2025-07-16T21:25:34.704Z] Field "/hosting" in "firebase.json" is possibly invalid: must be array
[debug] [2025-07-16T21:25:34.705Z] Field "/hosting" in "firebase.json" is possibly invalid: must match a schema in anyOf
[debug] [2025-07-16T21:25:34.710Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2025-07-16T21:25:34.710Z] > authorizing via signed-in user (bakirbehmen@gmail.com)
[debug] [2025-07-16T21:25:34.710Z] [iam] checking project website-5a18c for permissions ["firebase.projects.get","firebasehosting.sites.update"]
[debug] [2025-07-16T21:25:34.712Z] Checked if tokens are valid: true, expires at: 1752703517880
[debug] [2025-07-16T21:25:34.712Z] Checked if tokens are valid: true, expires at: 1752703517880
[debug] [2025-07-16T21:25:34.713Z] >>> [apiv2][query] POST https://cloudresourcemanager.googleapis.com/v1/projects/website-5a18c:testIamPermissions [none]
[debug] [2025-07-16T21:25:34.714Z] >>> [apiv2][(partial)header] POST https://cloudresourcemanager.googleapis.com/v1/projects/website-5a18c:testIamPermissions x-goog-quota-user=projects/website-5a18c
[debug] [2025-07-16T21:25:34.714Z] >>> [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/website-5a18c:testIamPermissions {"permissions":["firebase.projects.get","firebasehosting.sites.update"]}
[debug] [2025-07-16T21:25:35.487Z] <<< [apiv2][status] POST https://cloudresourcemanager.googleapis.com/v1/projects/website-5a18c:testIamPermissions 200
[debug] [2025-07-16T21:25:35.488Z] <<< [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/website-5a18c:testIamPermissions {"permissions":["firebase.projects.get","firebasehosting.sites.update"]}
[debug] [2025-07-16T21:25:35.490Z] Checked if tokens are valid: true, expires at: 1752703517880
[debug] [2025-07-16T21:25:35.490Z] Checked if tokens are valid: true, expires at: 1752703517880
[debug] [2025-07-16T21:25:35.494Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/website-5a18c [none]
[debug] [2025-07-16T21:25:35.725Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/website-5a18c 200
[debug] [2025-07-16T21:25:35.725Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/website-5a18c {"projectId":"website-5a18c","projectNumber":"636702053767","displayName":"website","name":"projects/website-5a18c","resources":{"hostingSite":"website-5a18c"},"state":"ACTIVE","etag":"1_a6122a7f-7df1-4ea8-844b-57f64ef44324"}
[debug] [2025-07-16T21:25:40.462Z] defaultcredentials: writing to file /home/user/.config/firebase/bakirbehmen_gmail_com_application_default_credentials.json
[debug] [2025-07-16T21:25:40.470Z] Checked if tokens are valid: true, expires at: 1752703517880
[debug] [2025-07-16T21:25:40.470Z] Checked if tokens are valid: true, expires at: 1752703517880
[debug] [2025-07-16T21:25:40.477Z] >>> [apiv2][query] GET https://firebasehosting.googleapis.com/v1beta1/projects/website-5a18c/sites pageToken=&pageSize=10
[debug] [2025-07-16T21:25:41.564Z] <<< [apiv2][status] GET https://firebasehosting.googleapis.com/v1beta1/projects/website-5a18c/sites 200
[debug] [2025-07-16T21:25:41.564Z] <<< [apiv2][body] GET https://firebasehosting.googleapis.com/v1beta1/projects/website-5a18c/sites {"sites":[{"name":"projects/website-5a18c/sites/website-5a18c","defaultUrl":"https://website-5a18c.web.app","appId":"1:636702053767:web:0de2259025db8c0bbd6f22","type":"DEFAULT_SITE"}]}
[debug] [2025-07-16T21:25:41.566Z] Checked if tokens are valid: true, expires at: 1752703517880
[debug] [2025-07-16T21:25:41.566Z] Checked if tokens are valid: true, expires at: 1752703517880
[debug] [2025-07-16T21:25:41.566Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/-/webApps/1:636702053767:web:0de2259025db8c0bbd6f22/config [none]
[debug] [2025-07-16T21:25:42.022Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/-/webApps/1:636702053767:web:0de2259025db8c0bbd6f22/config 200
[debug] [2025-07-16T21:25:42.023Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/-/webApps/1:636702053767:web:0de2259025db8c0bbd6f22/config {"projectId":"website-5a18c","appId":"1:636702053767:web:0de2259025db8c0bbd6f22","storageBucket":"website-5a18c.firebasestorage.app","apiKey":"AIzaSyDxwAQf6RX8UHlbjPpnjMVX-0jS85K3bvw","authDomain":"website-5a18c.firebaseapp.com","messagingSenderId":"636702053767","measurementId":"G-WGPRNHDM9Q"}
[info] 
   Thank you for trying our early preview of Next.js support on Firebase Hosting.
   During the preview, support is best-effort and breaking changes can be expected. Proceed with caution.
   The integration is known to work with Next.js version 12 - 15.0. You may encounter errors.

   Documentation: https://firebase.google.com/docs/hosting/frameworks/nextjs
   File a bug: https://github.com/firebase/firebase-tools/issues/new?template=bug_report.md
   Submit a feature request: https://github.com/firebase/firebase-tools/issues/new?template=feature_request.md

   We'd love to learn from you. Express your interest in helping us shape the future of Firebase Hosting: https://goo.gle/41enW5X

[debug] [2025-07-16T21:25:52.421Z] Checked if tokens are valid: true, expires at: 1752703517880
[debug] [2025-07-16T21:25:52.422Z] Checked if tokens are valid: true, expires at: 1752703517880
[debug] [2025-07-16T21:25:52.422Z] >>> [apiv2][query] GET https://firebasehosting.googleapis.com/v1beta1/projects/website-5a18c/sites/website-5a18c [none]
[debug] [2025-07-16T21:25:53.385Z] <<< [apiv2][status] GET https://firebasehosting.googleapis.com/v1beta1/projects/website-5a18c/sites/website-5a18c 200
[debug] [2025-07-16T21:25:53.385Z] <<< [apiv2][body] GET https://firebasehosting.googleapis.com/v1beta1/projects/website-5a18c/sites/website-5a18c {"name":"projects/website-5a18c/sites/website-5a18c","defaultUrl":"https://website-5a18c.web.app","appId":"1:636702053767:web:0de2259025db8c0bbd6f22","type":"DEFAULT_SITE"}
[info]    ▲ Next.js 15.3.3

[info]    - Environments: .env.local, .env


[info]    Creating an optimized production build ...

[info]  ✓ Compiled successfully in 9.0s

[info]    Skipping validation of types
   Skipping linting

[info]    Collecting page data ...

[info]    Generating static pages (0/6) ...

[info]    Generating static pages (1/6) 
   Generating static pages (2/6) 
   Generating static pages (4/6) 
 ✓ Generating static pages (6/6)

[info]    Finalizing page optimization ...
   Collecting build traces ...

[info] 

[info] Route (app)                                 Size  First Load JS
┌ ○ /_not-found                            978 B         102 kB
└ ● /[lng]                               35.8 kB         157 kB
    ├ /sr
    └ /en
+ First Load JS shared by all             101 kB
  ├ chunks/4bd1b696-4419cc93057fcf32.js  53.2 kB
  ├ chunks/684-7002d2f60d48787d.js         46 kB
  └ other shared chunks (total)          2.03 kB


ƒ Middleware                             32.3 kB


[info] ○  (Static)  prerendered as static content
●  (SSG)     prerendered as static HTML (uses generateStaticParams)


[info] Building a Cloud Function to run this application. This is needed due to:
[info]  • middleware
[info]  • use of fallback /[lng]
[info] 
[debug] [2025-07-16T21:26:53.673Z] skipping /en due to it matching an unsupported rewrite/redirect/header or middlware
[debug] [2025-07-16T21:26:53.675Z] skipping /sr due to it matching an unsupported rewrite/redirect/header or middlware
[debug] [2025-07-16T21:26:53.675Z] skipping /404 due to it matching an unsupported rewrite/redirect/header or middlware
[debug] [2025-07-16T21:26:53.732Z] Checked if tokens are valid: true, expires at: 1752703517880
[debug] [2025-07-16T21:26:53.734Z] Checked if tokens are valid: true, expires at: 1752703517880
[debug] [2025-07-16T21:26:53.735Z] >>> [apiv2][query] GET https://firebasehosting.googleapis.com/v1beta1/projects/website-5a18c/sites/website-5a18c [none]
[debug] [2025-07-16T21:26:54.738Z] <<< [apiv2][status] GET https://firebasehosting.googleapis.com/v1beta1/projects/website-5a18c/sites/website-5a18c 200
[debug] [2025-07-16T21:26:54.739Z] <<< [apiv2][body] GET https://firebasehosting.googleapis.com/v1beta1/projects/website-5a18c/sites/website-5a18c {"name":"projects/website-5a18c/sites/website-5a18c","defaultUrl":"https://website-5a18c.web.app","appId":"1:636702053767:web:0de2259025db8c0bbd6f22","type":"DEFAULT_SITE"}
[debug] [2025-07-16T21:27:14.715Z] [web frameworks] effective firebase.json:  {
  "hosting": [
    {
      "source": ".",
      "ignore": [
        "firebase.json",
        "**/.*",
        "**/node_modules/**"
      ],
      "rewrites": [
        {
          "source": "**",
          "function": {
            "functionId": "_next"
          }
        },
        {
          "source": "/**",
          "function": {
            "functionId": "ssrwebsite5a18c",
            "region": "us-central1",
            "pinTag": true
          }
        }
      ],
      "webFrameworks": {
        "region": "europe-west1"
      },
      "site": "website-5a18c",
      "redirects": [],
      "headers": [
        {
          "source": "/_not-found",
          "headers": [
            {
              "key": "x-nextjs-stale-time",
              "value": "300"
            },
            {
              "key": "x-nextjs-prerender",
              "value": "1"
            },
            {
              "key": "x-next-cache-tags",
              "value": "_N_T_/layout,_N_T_/_not-found/layout,_N_T_/_not-found/page,_N_T_/_not-found"
            }
          ]
        },
        {
          "source": "/favicon.ico",
          "headers": [
            {
              "key": "cache-control",
              "value": "public, max-age=0, must-revalidate"
            },
            {
              "key": "content-type",
              "value": "image/x-icon"
            },
            {
              "key": "x-next-cache-tags",
              "value": "_N_T_/layout,_N_T_/favicon.ico/layout,_N_T_/favicon.ico/route,_N_T_/favicon.ico"
            }
          ]
        },
        {
          "source": "/**/*.[jt]s",
          "headers": [
            {
              "key": "Set-Cookie",
              "value": "__FIREBASE_DEFAULTS__=eyJjb25maWciOnsicHJvamVjdElkIjoid2Vic2l0ZS01YTE4YyIsImFwcElkIjoiMTo2MzY3MDIwNTM3Njc6d2ViOjBkZTIyNTkwMjVkYjhjMGJiZDZmMjIiLCJzdG9yYWdlQnVja2V0Ijoid2Vic2l0ZS01YTE4Yy5maXJlYmFzZXN0b3JhZ2UuYXBwIiwiYXBpS2V5IjoiQUl6YVN5RHh3QVFmNlJYOFVIbGJqUHBuak1WWC0walM4NUszYnZ3IiwiYXV0aERvbWFpbiI6IndlYnNpdGUtNWExOGMuZmlyZWJhc2VhcHAuY29tIiwibWVzc2FnaW5nU2VuZGVySWQiOiI2MzY3MDIwNTM3NjciLCJtZWFzdXJlbWVudElkIjoiRy1XR1BSTkhETTlRIn0sIl9hdXRoVG9rZW5TeW5jVVJMIjoiL19fc2Vzc2lvbiJ9; SameSite=Strict; Expires=2027-06-11T08:07:14.715Z; Path=/;"
            }
          ]
        }
      ],
      "cleanUrls": true,
      "trailingSlash": false,
      "public": ".firebase/website-5a18c/hosting",
      "webFramework": "next_ssr"
    }
  ],
  "functions": [
    {
      "source": ".firebase/website-5a18c/functions",
      "codebase": "firebase-frameworks-website-5a18c"
    }
  ]
}
[debug] [2025-07-16T21:27:14.716Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2025-07-16T21:27:14.716Z] > authorizing via signed-in user (bakirbehmen@gmail.com)
[debug] [2025-07-16T21:27:14.717Z] [iam] checking project website-5a18c for permissions ["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]
[debug] [2025-07-16T21:27:14.723Z] Checked if tokens are valid: true, expires at: 1752703517880
[debug] [2025-07-16T21:27:14.723Z] Checked if tokens are valid: true, expires at: 1752703517880
[debug] [2025-07-16T21:27:14.723Z] >>> [apiv2][query] POST https://cloudresourcemanager.googleapis.com/v1/projects/website-5a18c:testIamPermissions [none]
[debug] [2025-07-16T21:27:14.723Z] >>> [apiv2][(partial)header] POST https://cloudresourcemanager.googleapis.com/v1/projects/website-5a18c:testIamPermissions x-goog-quota-user=projects/website-5a18c
[debug] [2025-07-16T21:27:14.723Z] >>> [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/website-5a18c:testIamPermissions {"permissions":["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]}
[debug] [2025-07-16T21:27:15.420Z] <<< [apiv2][status] POST https://cloudresourcemanager.googleapis.com/v1/projects/website-5a18c:testIamPermissions 200
[debug] [2025-07-16T21:27:15.421Z] <<< [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/website-5a18c:testIamPermissions {"permissions":["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]}
[debug] [2025-07-16T21:27:15.427Z] Checked if tokens are valid: true, expires at: 1752703517880
[debug] [2025-07-16T21:27:15.427Z] Checked if tokens are valid: true, expires at: 1752703517880
[debug] [2025-07-16T21:27:15.428Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v1/projects/website-5a18c/locations/-/functions [none]
[debug] [2025-07-16T21:27:16.009Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v1/projects/website-5a18c/locations/-/functions 200
[debug] [2025-07-16T21:27:16.011Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v1/projects/website-5a18c/locations/-/functions {"functions":[{"name":"projects/website-5a18c/locations/europe-west3/functions/ext-image-processing-api-handler","description":"Serves a API accepting incoming HTTP requests.","sourceArchiveUrl":"gs://firebase-mod-sources-prod/2137a7fadcc867f26a3d8015133f2ab19c2f60dd35bd2ec8facf4e1f04e61232","httpsTrigger":{"url":"https://europe-west3-website-5a18c.cloudfunctions.net/ext-image-processing-api-handler","securityLevel":"SECURE_OPTIONAL"},"status":"ACTIVE","entryPoint":"handler","timeout":"60s","availableMemoryMb":1024,"serviceAccountEmail":"ext-image-processing-api@website-5a18c.iam.gserviceaccount.com","updateTime":"2025-07-14T04:37:55.941Z","versionId":"2","labels":{"goog-firebase-ext-iid":"image-processing-api","firebase-extensions-ar":"enabled","goog-dm":"firebase-ext-image-processing-api","goog-firebase-ext":"image-processing-api","deployment-tool":"firebase-extensions"},"environmentVariables":{"CLOUD_STORAGE_BUCKET":"website-5a18c.firebasestorage.app","CORS_ORIGIN_ALLOW_LIST":"*","DATABASE_INSTANCE":"","DATABASE_URL":"","EXT_INSTANCE_ID":"image-processing-api","FIREBASE_CONFIG":"{\"projectId\":\"website-5a18c\",\"databaseURL\":\"\",\"storageBucket\":\"website-5a18c.firebasestorage.app\"}","GCLOUD_PROJECT":"website-5a18c","LOCATION":"europe-west3","PROJECT_ID":"website-5a18c","STORAGE_BUCKET":"website-5a18c.firebasestorage.app"},"runtime":"nodejs20","ingressSettings":"ALLOW_ALL","buildId":"f18bca3c-f1f5-4477-90f4-e5e6e741ebbc","buildEnvironmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"buildName":"projects/636702053767/locations/europe-west3/builds/f18bca3c-f1f5-4477-90f4-e5e6e741ebbc","dockerRegistry":"ARTIFACT_REGISTRY","automaticUpdatePolicy":{},"buildServiceAccount":"projects/website-5a18c/serviceAccounts/636702053767-compute@developer.gserviceaccount.com","satisfiesPzs":true,"satisfiesPzi":true}]}
[debug] [2025-07-16T21:27:16.025Z] Checked if tokens are valid: true, expires at: 1752703517880
[debug] [2025-07-16T21:27:16.025Z] Checked if tokens are valid: true, expires at: 1752703517880
[debug] [2025-07-16T21:27:16.026Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/website-5a18c/locations/-/functions filter=environment%3D%22GEN_2%22
[debug] [2025-07-16T21:27:17.011Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/website-5a18c/locations/-/functions 200
[debug] [2025-07-16T21:27:17.014Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/website-5a18c/locations/-/functions {"functions":[{"name":"projects/website-5a18c/locations/us-central1/functions/ssrwebsite5a18c","buildConfig":{"build":"projects/636702053767/locations/us-central1/builds/d8dc5e1a-ecb9-4b6c-afee-a6e3c624b3a3","runtime":"nodejs20","entryPoint":"ssrwebsite5a18c","source":{"storageSource":{"bucket":"gcf-v2-sources-636702053767-us-central1","object":"ssrwebsite5a18c/function-source.zip","generation":"1752466812219058"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/website-5a18c/locations/us-central1/repositories/gcf-artifacts","sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-636702053767-us-central1","object":"ssrwebsite5a18c/function-source.zip","generation":"1752466812219058"}},"dockerRegistry":"ARTIFACT_REGISTRY","serviceAccount":"projects/website-5a18c/serviceAccounts/636702053767-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/website-5a18c/locations/us-central1/services/ssrwebsite5a18c","timeoutSeconds":60,"environmentVariables":{"GEMINI_API_KEY":"","NEXT_PUBLIC_FIREBASE_API_KEY":"AIzaSyDxwAQf6RX8UHlbjPpnjMVX-0jS85K3bvw","NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN":"website-5a18c.firebaseapp.com","NEXT_PUBLIC_FIREBASE_PROJECT_ID":"website-5a18c","NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET":"website-5a18c.appspot.com","NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID":"636702053767","NEXT_PUBLIC_FIREBASE_APP_ID":"1:636702053767:web:0de2259025db8c0bbd6f22","NEXT_PUBLIC_FIREBASE_MEASUREMENT_ID":"G-WGPRNHDM9Q","VERCEL_URL":"website-5a18c.web.app","__FIREBASE_FRAMEWORKS_ENTRY__":"next.js","__FIREBASE_DEFAULTS__":"{\"config\":{\"projectId\":\"website-5a18c\",\"appId\":\"1:636702053767:web:0de2259025db8c0bbd6f22\",\"storageBucket\":\"website-5a18c.firebasestorage.app\",\"apiKey\":\"AIzaSyDxwAQf6RX8UHlbjPpnjMVX-0jS85K3bvw\",\"authDomain\":\"website-5a18c.firebaseapp.com\",\"messagingSenderId\":\"636702053767\",\"measurementId\":\"G-WGPRNHDM9Q\"},\"_authTokenSyncURL\":\"/__session\"}","FIREBASE_CONFIG":"{\"projectId\":\"website-5a18c\",\"storageBucket\":\"website-5a18c.firebasestorage.app\"}","GCLOUD_PROJECT":"website-5a18c","EVENTARC_CLOUD_EVENT_SOURCE":"projects/website-5a18c/locations/us-central1/services/ssrwebsite5a18c","FUNCTION_TARGET":"ssrwebsite5a18c","LOG_EXECUTION_ID":"true"},"maxInstanceCount":20,"ingressSettings":"ALLOW_ALL","uri":"https://ssrwebsite5a18c-hr7gf53sqq-uc.a.run.app","serviceAccountEmail":"636702053767-compute@developer.gserviceaccount.com","availableMemory":"256Mi","allTrafficOnLatestRevision":true,"revision":"ssrwebsite5a18c-00001-rey","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"state":"ACTIVE","updateTime":"2025-07-14T04:22:57.557138708Z","labels":{"deployment-tool":"cli-firebase--project-idx","firebase-functions-codebase":"firebase-frameworks-website-5a18c","firebase-functions-hash":"d1a9c72cc15bd8e5dc8545c81251e01b59363f8d"},"environment":"GEN_2","url":"https://us-central1-website-5a18c.cloudfunctions.net/ssrwebsite5a18c","createTime":"2025-07-14T04:20:12.455639447Z","satisfiesPzi":true}]}
[info] i  hosting: The following function(s) are pinned to site website-5a18c and will be deployed as well: ssrwebsite5a18c 
[info] 
[info] === Deploying to 'website-5a18c'...
[info] 
[info] i  deploying functions, hosting 
[debug] [2025-07-16T21:27:17.035Z] Checked if tokens are valid: true, expires at: 1752703517880
[debug] [2025-07-16T21:27:17.035Z] Checked if tokens are valid: true, expires at: 1752703517880
[debug] [2025-07-16T21:27:17.035Z] >>> [apiv2][query] GET https://cloudresourcemanager.googleapis.com/v1/projects/website-5a18c [none]
[debug] [2025-07-16T21:27:17.235Z] <<< [apiv2][status] GET https://cloudresourcemanager.googleapis.com/v1/projects/website-5a18c 200
[debug] [2025-07-16T21:27:17.241Z] <<< [apiv2][body] GET https://cloudresourcemanager.googleapis.com/v1/projects/website-5a18c {"projectNumber":"636702053767","projectId":"website-5a18c","lifecycleState":"ACTIVE","name":"website","labels":{"firebase":"enabled","firebase-core":"disabled","generative-language":"enabled"},"createTime":"2025-07-11T21:11:24.875257Z"}
[info] i  functions: preparing codebase firebase-frameworks-website-5a18c for deployment 
[info] i  functions: ensuring required API cloudfunctions.googleapis.com is enabled... 
[info] i  functions: ensuring required API cloudbuild.googleapis.com is enabled... 
[info] i  artifactregistry: ensuring required API artifactregistry.googleapis.com is enabled... 
[debug] [2025-07-16T21:27:17.255Z] Checked if tokens are valid: true, expires at: 1752703517880
[debug] [2025-07-16T21:27:17.256Z] Checked if tokens are valid: true, expires at: 1752703517880
[debug] [2025-07-16T21:27:17.256Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/website-5a18c/adminSdkConfig [none]
[debug] [2025-07-16T21:27:17.571Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/website-5a18c/adminSdkConfig 200
[debug] [2025-07-16T21:27:17.575Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/website-5a18c/adminSdkConfig {"projectId":"website-5a18c","storageBucket":"website-5a18c.firebasestorage.app"}
[debug] [2025-07-16T21:27:17.575Z] Checked if tokens are valid: true, expires at: 1752703517880
[debug] [2025-07-16T21:27:17.576Z] Checked if tokens are valid: true, expires at: 1752703517880
[debug] [2025-07-16T21:27:17.584Z] >>> [apiv2][query] GET https://runtimeconfig.googleapis.com/v1beta1/projects/website-5a18c/configs [none]
[debug] [2025-07-16T21:27:17.797Z] <<< [apiv2][status] GET https://runtimeconfig.googleapis.com/v1beta1/projects/website-5a18c/configs 200
[debug] [2025-07-16T21:27:17.802Z] <<< [apiv2][body] GET https://runtimeconfig.googleapis.com/v1beta1/projects/website-5a18c/configs {}
[debug] [2025-07-16T21:27:17.815Z] Validating nodejs source
[debug] [2025-07-16T21:27:18.963Z] > [functions] package.json contents: {
  "name": "nextn",
  "version": "0.1.0",
  "private": true,
  "dependencies": {
    "@genkit-ai/googleai": "^1.13.0",
    "@hookform/resolvers": "^4.1.3",
    "@radix-ui/react-accordion": "^1.2.3",
    "@radix-ui/react-alert-dialog": "^1.1.6",
    "@radix-ui/react-avatar": "^1.1.3",
    "@radix-ui/react-checkbox": "^1.1.4",
    "@radix-ui/react-collapsible": "^1.1.11",
    "@radix-ui/react-dialog": "^1.1.6",
    "@radix-ui/react-dropdown-menu": "^2.1.6",
    "@radix-ui/react-label": "^2.1.2",
    "@radix-ui/react-menubar": "^1.1.6",
    "@radix-ui/react-popover": "^1.1.6",
    "@radix-ui/react-progress": "^1.1.2",
    "@radix-ui/react-radio-group": "^1.2.3",
    "@radix-ui/react-scroll-area": "^1.2.3",
    "@radix-ui/react-select": "^2.1.6",
    "@radix-ui/react-separator": "^1.1.2",
    "@radix-ui/react-slider": "^1.2.3",
    "@radix-ui/react-slot": "^1.2.3",
    "@radix-ui/react-switch": "^1.1.3",
    "@radix-ui/react-tabs": "^1.1.3",
    "@radix-ui/react-toast": "^1.2.6",
    "@radix-ui/react-tooltip": "^1.1.8",
    "class-variance-authority": "^0.7.1",
    "clsx": "^2.1.1",
    "date-fns": "^3.6.0",
    "dotenv": "^16.5.0",
    "embla-carousel-react": "^8.6.0",
    "firebase": "^11.10.0",
    "firebase-admin": "^13.4.0",
    "genkit": "^1.13.0",
    "i18next": "^25.3.2",
    "i18next-browser-languagedetector": "^8.2.0",
    "i18next-resources-to-backend": "^1.2.1",
    "lucide-react": "^0.475.0",
    "next": "15.3.3",
    "react": "^18.3.1",
    "react-cookie": "^8.0.1",
    "react-day-picker": "^8.10.1",
    "react-dom": "^18.3.1",
    "react-hook-form": "^7.54.2",
    "react-i18next": "^15.6.0",
    "recharts": "^2.15.1",
    "tailwind-merge": "^3.0.1",
    "tailwindcss-animate": "^1.0.7",
    "zod": "^3.24.2",
    "firebase-frameworks": "^0.11.0",
    "firebase-functions": "^6.0.1"
  },
  "main": "server.js",
  "engines": {
    "node": "20"
  }
}
[debug] [2025-07-16T21:27:18.964Z] Building nodejs source
[info] i  functions: Loading and analyzing source code for codebase firebase-frameworks-website-5a18c to determine what to deploy 
[debug] [2025-07-16T21:27:18.971Z] Could not find functions.yaml. Must use http discovery
[debug] [2025-07-16T21:27:18.991Z] Found firebase-functions binary at '/home/user/studio/.firebase/website-5a18c/functions/node_modules/.bin/firebase-functions'
[info] Serving at port 8320

[debug] [2025-07-16T21:27:24.226Z] Got response from /__/functions.yaml {"endpoints":{"ssrwebsite5a18c":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"httpsTrigger":{},"entryPoint":"ssrwebsite5a18c"}},"specVersion":"v1alpha1","requiredAPIs":[],"extensions":{}}
[info] i  extensions: ensuring required API firebaseextensions.googleapis.com is enabled... 
[debug] [2025-07-16T21:27:28.405Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2025-07-16T21:27:28.408Z] > authorizing via signed-in user (bakirbehmen@gmail.com)
[debug] [2025-07-16T21:27:28.409Z] [iam] checking project website-5a18c for permissions ["firebase.projects.get","firebaseextensions.instances.list"]
[debug] [2025-07-16T21:27:28.409Z] Checked if tokens are valid: true, expires at: 1752703517880
[debug] [2025-07-16T21:27:28.409Z] Checked if tokens are valid: true, expires at: 1752703517880
[debug] [2025-07-16T21:27:28.409Z] >>> [apiv2][query] POST https://cloudresourcemanager.googleapis.com/v1/projects/website-5a18c:testIamPermissions [none]
[debug] [2025-07-16T21:27:28.409Z] >>> [apiv2][(partial)header] POST https://cloudresourcemanager.googleapis.com/v1/projects/website-5a18c:testIamPermissions x-goog-quota-user=projects/website-5a18c
[debug] [2025-07-16T21:27:28.409Z] >>> [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/website-5a18c:testIamPermissions {"permissions":["firebase.projects.get","firebaseextensions.instances.list"]}
[debug] [2025-07-16T21:27:29.114Z] <<< [apiv2][status] POST https://cloudresourcemanager.googleapis.com/v1/projects/website-5a18c:testIamPermissions 200
[debug] [2025-07-16T21:27:29.117Z] <<< [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/website-5a18c:testIamPermissions {"permissions":["firebase.projects.get","firebaseextensions.instances.list"]}
[debug] [2025-07-16T21:27:29.124Z] Checked if tokens are valid: true, expires at: 1752703517880
[debug] [2025-07-16T21:27:29.124Z] Checked if tokens are valid: true, expires at: 1752703517880
[debug] [2025-07-16T21:27:29.124Z] >>> [apiv2][query] GET https://firebaseextensions.googleapis.com/v1beta/projects/website-5a18c/instances pageSize=100&pageToken=
[debug] [2025-07-16T21:27:29.942Z] <<< [apiv2][status] GET https://firebaseextensions.googleapis.com/v1beta/projects/website-5a18c/instances 200
[debug] [2025-07-16T21:27:29.942Z] <<< [apiv2][body] GET https://firebaseextensions.googleapis.com/v1beta/projects/website-5a18c/instances {"instances":[{"name":"projects/website-5a18c/instances/image-processing-api","createTime":"2025-07-14T04:33:14.381422Z","updateTime":"2025-07-14T04:38:24.129382Z","state":"ACTIVE","config":{"name":"projects/website-5a18c/instances/image-processing-api/configurations/1ecf0e78-380c-4b30-bf6f-36ead48313e2","createTime":"2025-07-14T04:33:14.381422Z","source":{"name":"projects/invertase-firebase-extensions/sources/8e80a7ef-0036-42b3-b829-9fab843715dd","packageUri":"https://storage.googleapis.com/firebase-extensions-packages-prod/invertase-image-processing-api-0.2.1-6ccff87e-84ec-40c2-a78c-bbfb629b2dd5.zip","hash":"5034d7302af64a6e98d4e82f6529aab512b58ec36c69e5cb6656914e7d1be27c","extensionRoot":"/","spec":{"specVersion":"v1beta","name":"image-processing-api","version":"0.2.1","description":"Use this extension to optimize and transform images via a powerful HTTP API with over 30 different image operations to enhance and manipulate your images.","apis":[{"apiName":"storage-component.googleapis.com","reason":"Needed to use Cloud Storage"}],"roles":[{"role":"storage.admin","reason":"Allows the extension to read images in Cloud Storage"}],"resources":[{"name":"handler","type":"firebaseextensions.v1beta.function","propertiesYaml":"availableMemoryMb: 1024\nhttpsTrigger: {}\nlocation: ${param:LOCATION}\nruntime: nodejs20\n","description":"Serves a API accepting incoming HTTP requests.","deletionPolicy":"DELETE"}],"billingRequired":true,"author":{"authorName":"Invertase","url":"https://invertase.io"},"contributors":[{"authorName":"Invertase","email":"oss@invertase.io","url":"https://github.com/invertase"}],"license":"Apache-2.0","releaseNotesUrl":"https://github.com/invertase/firebase-extensions/tree/main/extensions/image-processing-api/CHANGELOG.md","sourceUrl":"https://github.com/invertase/firebase-extensions/tree/main/extensions/image-processing-api","params":[{"param":"LOCATION","label":"Cloud Functions location","type":"SELECT","description":"Where do you want to deploy the functions created for this extension? You usually want a location close to your Storage bucket. For help selecting a location, refer to the [location selection guide](https://firebase.google.com/docs/functions/locations).","required":true,"options":[{"value":"us-central1","label":"Iowa (us-central1)"},{"value":"us-east1","label":"South Carolina (us-east1)"},{"value":"us-east4","label":"Northern Virginia (us-east4)"},{"value":"us-west2","label":"Los Angeles (us-west2)"},{"value":"us-west3","label":"Salt Lake City (us-west3)"},{"value":"us-west4","label":"Las Vegas (us-west4)"},{"value":"europe-central2","label":"Warsaw (europe-central2)"},{"value":"europe-west1","label":"Belgium (europe-west1)"},{"value":"europe-west2","label":"London (europe-west2)"},{"value":"europe-west3","label":"Frankfurt (europe-west3)"},{"value":"europe-west6","label":"Zurich (europe-west6)"},{"value":"asia-east2","label":"Hong Kong (asia-east2)"},{"value":"asia-northeast1","label":"Tokyo (asia-northeast1)"},{"value":"asia-northeast2","label":"Osaka (asia-northeast2)"},{"value":"asia-northeast3","label":"Seoul (asia-northeast3)"},{"value":"asia-south1","label":"Mumbai (asia-south1)"},{"value":"asia-southeast2","label":"Jakarta (asia-southeast2)"},{"value":"northamerica-northeast1","label":"Montreal (northamerica-northeast1)"},{"value":"southamerica-east1","label":"Sao Paulo (southamerica-east1)"},{"value":"australia-southeast1","label":"Sydney (australia-southeast1)"}],"default":"us-central1","immutable":true},{"param":"CLOUD_STORAGE_BUCKET","label":"Cloud Storage bucket for images","type":"STRING","description":"The Cloud Storage bucket where images that are to be processed are located. API requests with input urls or paths that are not inside this bucket will be dropped.\n","required":true,"default":"${STORAGE_BUCKET}","example":"my-project-12345.appspot.com","validationRegex":"^([0-9a-z_.-]*)$","validationErrorMessage":"Invalid storage bucket"},{"param":"CORS_ORIGIN_ALLOW_LIST","label":"Allowed CORS origins","type":"STRING","description":"A comma delimited value of allowed CORS origins. Use the default of '*' to allow all origins. This is useful to lockdown your API and only allow your own website to embed the images directly. Note this will not prevent non-browser requests from accessing your API.\n","required":true,"default":"*","example":"*.example.com,invertase.io"},{"param":"HOSTNAME","label":"Hostname","type":"STRING","description":"An optional hostname to fetch images from. This can used to construct the original image URL in the response. Include ONLY the hostname, without any protocol or path. The protocol https:// will be added automatically. This parameter is needed if you would like to query using local path names such as /my/image.jpg. instead of the full URL.\n","example":"example.com"}],"preinstallContent":"# Image Processing Extension\n\nUse this extension to optimize and transform images via a powerful HTTP API with over 30 image operations for enhancing and manipulating your images.\n\n## How It Works\n\nWhen you install this extension, it deploys a Cloud Function that exposes an HTTP API. All requests must be sent to the /process endpoint of the function. You perform image operations by passing an operations query parameter—a URL-encoded JSON string defining the operations to execute.\n\n### Example\n\nDefine your operations like so:\n\n```js\nconst operations = [\n  {\n    operation: 'input',\n    type: 'url',\n    url: 'https://example.com/image.jpg',\n  },\n  {\n    operation: 'grayscale',\n  },\n  {\n    operation: 'output',\n    format: 'webp',\n  },\n];\n\nconst params = `?operations=${encodeURIComponent(JSON.stringify(operations))}`;\n```\n\nThen, make your GET request to your Cloud Function using the correct endpoint. For example:\n\n```\nhttps://<your-configured-region>-<your-project-id>.cloudfunctions.net/<extension-instance-id>/process${params}\n```\n\nThe extension also comes with a JavaScript utility library for simplifying the creation of operations:\n\n```ts\nimport { builder } from '@invertase/image-processing-api';\n\nconst output = builder()\n  .input({\n    url: 'https://example.com/image.jpg',\n  })\n  .grayscale()\n  .output({\n    format: 'webp',\n  });\n\nconst params = `?operations=${output.toEncodedJSONString()}`;\n```\n\nView the [official documentation](https://extensions.invertase.dev/image-processing-api) for full usage examples.\n\n### Relative paths\n\nThe extension provides a hostname parameter, allowing you to query the function with local paths (starting with `/`).\n\nAs an example, if we set the hostname parameter to \"example.com\" then the following operation:\n\n```js\nconst operations = [\n  {\n    operation: 'input',\n    type: 'url',\n    url: '/image.jpg',\n  },\n  {\n    operation: 'grayscale',\n  },\n  {\n    operation: 'output',\n    format: 'webp',\n  },\n];\n```\n\nis equivalent to the earlier given example. The url `https://example.com/image.jpg` is constructed within the extension.\n\nNote that this will **only** apply to paths that begin with a forward slash `/`, and **only** when the hostname parameter is set.\n\n#### Additional setup\n\nBefore installing this extension, make sure that you've [set up a Cloud Storage bucket](https://firebase.google.com/docs/storage) in your Firebase project.\n\n#### Billing\n\nTo install an extension, your project must be on the [Blaze (pay as you go) plan](https://firebase.google.com/pricing)\n\n- You will be charged a small amount (typically around $0.01/month) for the Firebase resources required by this extension (even if it is not used).\n- This extension uses other Firebase and Google Cloud Platform services, which have associated charges if you exceed the service’s no-cost tier:\n  - Cloud Storage\n  - Cloud Functions (Node.js 10+ runtime. [See FAQs](https://firebase.google.com/support/faq#extensions-pricing))\n","postinstallContent":"### See it in action\n\nYou can test out this extension right away!\n\n1. Create an operations list, for example:\n\n```js\nconst operations = [\n  {\n    operation: 'input',\n    type: 'url',\n    url: 'https://images.unsplash.com/photo-1663659552548-25d7771802c9?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=774&q=80',\n  },\n  {\n    operation: 'grayscale',\n  },\n  {\n    operation: 'output',\n    format: 'webp',\n  },\n];\n```\n\n2. Stringify and encode the list:\n\n```js\nencodeURIComponent(JSON.stringify(operations));\n```\n\n3. Call the deployed `process` Cloud Function:\n\n[https://${param:LOCATION}-${param:PROJECT_ID}.cloudfunctions.net/ext-${param:EXT_INSTANCE_ID}-handler/process?operations=%5B%7B%22operation%22%3A%22input%22%2C%22type%22%3A%22url%22%2C%22url%22%3A%22https%3A%2F%2Fimages.unsplash.com%2Fphoto-1663659552548-25d7771802c9%3Fixlib%3Drb-1.2.1%26ixid%3DMnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8%26auto%3Dformat%26fit%3Dcrop%26w%3D774%26q%3D80%22%7D%2C%7B%22operation%22%3A%22grayscale%22%7D%2C%7B%22operation%22%3A%22output%22%2C%22format%22%3A%22webp%22%7D%5D](https://${param:LOCATION}-${param:PROJECT_ID}.cloudfunctions.net/ext-${param:EXT_INSTANCE_ID}-handler/process?operations=%5B%7B%22operation%22%3A%22input%22%2C%22type%22%3A%22url%22%2C%22url%22%3A%22https%3A%2F%2Fimages.unsplash.com%2Fphoto-1663659552548-25d7771802c9%3Fixlib%3Drb-1.2.1%26ixid%3DMnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8%26auto%3Dformat%26fit%3Dcrop%26w%3D774%26q%3D80%22%7D%2C%7B%22operation%22%3A%22grayscale%22%7D%2C%7B%22operation%22%3A%22output%22%2C%22format%22%3A%22webp%22%7D%5D)\n\nThe result will be a grayscaled version of the image, in WebP format.\n\n### Using the extension\n\nSee the [official documentation](https://extensions.invertase.dev/image-processing-api) for more information on using the extension, including the full list of supported operations you can use.\n\n### Monitoring\n\nAs a best practice, you can [monitor the activity](https://firebase.google.com/docs/extensions/manage-installed-extensions#monitor) of your installed extension, including checks on its health, usage, and logs.\n","readmeContent":"# Image Processing API\n\n**Author**: Invertase (**[https://invertase.io](https://invertase.io)**)\n\n**Description**: Use this extension to optimize and transform images via a powerful HTTP API with over 30 different image operations to enhance and manipulate your images.\n\n**Details**: # Image Processing Extension\nUse this extension to optimize and transform images via a powerful HTTP API with over 30 image operations for enhancing and manipulating your images.\n\n## How It Works\n\nWhen you install this extension, it deploys a Cloud Function that exposes an HTTP API. All requests must be sent to the /process endpoint of the function. You perform image operations by passing an operations query parameter—a URL-encoded JSON string defining the operations to execute.\n\n### Example\n\nDefine your operations like so:\n\n```js\nconst operations = [\n  {\n    operation: 'input',\n    type: 'url',\n    url: 'https://example.com/image.jpg',\n  },\n  {\n    operation: 'grayscale',\n  },\n  {\n    operation: 'output',\n    format: 'webp',\n  },\n];\n\nconst params = `?operations=${encodeURIComponent(JSON.stringify(operations))}`;\n```\n\nThen, make your GET request to your Cloud Function using the correct endpoint. For example:\n\n```\nhttps://<your-configured-region>-<your-project-id>.cloudfunctions.net/<extension-instance-id>/process${params}\n```\n\nThe extension also comes with a JavaScript utility library for simplifying the creation of operations:\n\n```ts\nimport { builder } from '@invertase/image-processing-api';\n\nconst output = builder()\n  .input({\n    url: 'https://example.com/image.jpg',\n  })\n  .grayscale()\n  .output({\n    format: 'webp',\n  });\n\nconst params = `?operations=${output.toEncodedJSONString()}`;\n```\n\nView the [official documentation](https://extensions.invertase.dev/image-processing-api) for full usage examples.\n\n### Relative paths\n\nThe extension provides a hostname parameter, allowing you to query the function with local paths (starting with `/`).\n\nAs an example, if we set the hostname parameter to \"example.com\" then the following operation:\n\n```js\nconst operations = [\n  {\n    operation: 'input',\n    type: 'url',\n    url: '/image.jpg',\n  },\n  {\n    operation: 'grayscale',\n  },\n  {\n    operation: 'output',\n    format: 'webp',\n  },\n];\n```\n\nis equivalent to the earlier given example. The url `https://example.com/image.jpg` is constructed within the extension.\n\nNote that this will **only** apply to paths that begin with a forward slash `/`, and **only** when the hostname parameter is set.\n\n#### Additional setup\n\nBefore installing this extension, make sure that you've [set up a Cloud Storage bucket](https://firebase.google.com/docs/storage) in your Firebase project.\n\n#### Billing\n\nTo install an extension, your project must be on the [Blaze (pay as you go) plan](https://firebase.google.com/pricing)\n\n- You will be charged a small amount (typically around $0.01/month) for the Firebase resources required by this extension (even if it is not used).\n- This extension uses other Firebase and Google Cloud Platform services, which have associated charges if you exceed the service’s no-cost tier:\n  - Cloud Storage\n  - Cloud Functions (Node.js 10+ runtime. [See FAQs](https://firebase.google.com/support/faq#extensions-pricing))\n\n**Configuration Parameters:**\n\n- Cloud Functions location: Where do you want to deploy the functions created for this extension? You usually want a location close to your Storage bucket. For help selecting a location, refer to the [location selection guide](https://firebase.google.com/docs/functions/locations).\n\n- Cloud Storage bucket for images: The Cloud Storage bucket where images that are to be processed are located. API requests with input urls or paths that are not inside this bucket will be dropped.\n\n- Allowed CORS origins: A comma delimited value of allowed CORS origins. Use the default of '\\*' to allow all origins. This is useful to lockdown your API and only allow your own website to embed the images directly. Note this will not prevent non-browser requests from accessing your API.\n\n- Hostname: An optional hostname to fetch images from. This can used to construct the original image URL in the response. Include ONLY the hostname, without any protocol or path. The protocol https:// will be added automatically. This parameter is needed if you would like to query using local path names such as /my/image.jpg. instead of the full URL.\n\n**Cloud Functions:**\n\n- **handler:** Serves a API accepting incoming HTTP requests.\n\n**APIs Used**:\n\n- storage-component.googleapis.com (Reason: Needed to use Cloud Storage)\n\n**Access Required**:\n\nThis extension will operate with the following project IAM roles:\n\n- storage.admin (Reason: Allows the extension to read images in Cloud Storage)\n","displayName":"Image Processing API"},"fetchTime":"2025-04-03T16:10:15.973372Z","lastOperationName":"projects/invertase-firebase-extensions/operations/443dc71d-01a6-4640-a13c-51448d5c4de1","state":"ACTIVE"},"params":{"CORS_ORIGIN_ALLOW_LIST":"*","LOCATION":"europe-west3","CLOUD_STORAGE_BUCKET":"website-5a18c.firebasestorage.app"},"populatedPostinstallContent":"### See it in action\n\nYou can test out this extension right away!\n\n1. Create an operations list, for example:\n\n```js\nconst operations = [\n  {\n    operation: 'input',\n    type: 'url',\n    url: 'https://images.unsplash.com/photo-1663659552548-25d7771802c9?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=774&q=80',\n  },\n  {\n    operation: 'grayscale',\n  },\n  {\n    operation: 'output',\n    format: 'webp',\n  },\n];\n```\n\n2. Stringify and encode the list:\n\n```js\nencodeURIComponent(JSON.stringify(operations));\n```\n\n3. Call the deployed `process` Cloud Function:\n\n[https://europe-west3-website-5a18c.cloudfunctions.net/ext-image-processing-api-handler/process?operations=%5B%7B%22operation%22%3A%22input%22%2C%22type%22%3A%22url%22%2C%22url%22%3A%22https%3A%2F%2Fimages.unsplash.com%2Fphoto-1663659552548-25d7771802c9%3Fixlib%3Drb-1.2.1%26ixid%3DMnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8%26auto%3Dformat%26fit%3Dcrop%26w%3D774%26q%3D80%22%7D%2C%7B%22operation%22%3A%22grayscale%22%7D%2C%7B%22operation%22%3A%22output%22%2C%22format%22%3A%22webp%22%7D%5D](https://europe-west3-website-5a18c.cloudfunctions.net/ext-image-processing-api-handler/process?operations=%5B%7B%22operation%22%3A%22input%22%2C%22type%22%3A%22url%22%2C%22url%22%3A%22https%3A%2F%2Fimages.unsplash.com%2Fphoto-1663659552548-25d7771802c9%3Fixlib%3Drb-1.2.1%26ixid%3DMnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8%26auto%3Dformat%26fit%3Dcrop%26w%3D774%26q%3D80%22%7D%2C%7B%22operation%22%3A%22grayscale%22%7D%2C%7B%22operation%22%3A%22output%22%2C%22format%22%3A%22webp%22%7D%5D)\n\nThe result will be a grayscaled version of the image, in WebP format.\n\n### Using the extension\n\nSee the [official documentation](https://extensions.invertase.dev/image-processing-api) for more information on using the extension, including the full list of supported operations you can use.\n\n### Monitoring\n\nAs a best practice, you can [monitor the activity](https://firebase.google.com/docs/extensions/manage-installed-extensions#monitor) of your installed extension, including checks on its health, usage, and logs.\n","extensionRef":"invertase/image-processing-api","extensionVersion":"0.2.1","systemParams":{"firebaseextensions.v1beta.function/minInstances":"0","firebaseextensions.v1beta.function/vpcConnectorEgressSettings":"VPC_CONNECTOR_EGRESS_SETTINGS_UNSPECIFIED"}},"lastOperationName":"projects/website-5a18c/operations/e622a0be-0e1a-44cc-aefe-0a3a8c5bfe4c","serviceAccountEmail":"ext-image-processing-api@website-5a18c.iam.gserviceaccount.com","lastOperationType":"CREATE","etag":"1cfc037ee3e595627a0a1255b18d3e691ad149429459bde03adf427ae0b1aef7"}]}
[debug] [2025-07-16T21:27:29.957Z] Failed to validate key FIREBASE_ADMIN_TYPE: Error: Key FIREBASE_ADMIN_TYPE starts with a reserved prefix (X_GOOGLE_ FIREBASE_ EXT_)
[debug] [2025-07-16T21:27:29.958Z] Failed to validate key FIREBASE_ADMIN_PRIVATE_KEY_ID: Error: Key FIREBASE_ADMIN_PRIVATE_KEY_ID starts with a reserved prefix (X_GOOGLE_ FIREBASE_ EXT_)
[debug] [2025-07-16T21:27:29.958Z] Failed to validate key FIREBASE_ADMIN_PRIVATE_KEY: Error: Key FIREBASE_ADMIN_PRIVATE_KEY starts with a reserved prefix (X_GOOGLE_ FIREBASE_ EXT_)
[debug] [2025-07-16T21:27:29.958Z] Failed to validate key FIREBASE_ADMIN_CLIENT_EMAIL: Error: Key FIREBASE_ADMIN_CLIENT_EMAIL starts with a reserved prefix (X_GOOGLE_ FIREBASE_ EXT_)
[debug] [2025-07-16T21:27:29.958Z] Failed to validate key FIREBASE_ADMIN_CLIENT_ID: Error: Key FIREBASE_ADMIN_CLIENT_ID starts with a reserved prefix (X_GOOGLE_ FIREBASE_ EXT_)
[debug] [2025-07-16T21:27:29.958Z] Failed to validate key FIREBASE_ADMIN_AUTH_URI: Error: Key FIREBASE_ADMIN_AUTH_URI starts with a reserved prefix (X_GOOGLE_ FIREBASE_ EXT_)
[debug] [2025-07-16T21:27:29.958Z] Failed to validate key FIREBASE_ADMIN_TOKEN_URI: Error: Key FIREBASE_ADMIN_TOKEN_URI starts with a reserved prefix (X_GOOGLE_ FIREBASE_ EXT_)
[debug] [2025-07-16T21:27:29.958Z] Failed to validate key FIREBASE_ADMIN_AUTH_PROVIDER_X509_CERT_URL: Error: Key FIREBASE_ADMIN_AUTH_PROVIDER_X509_CERT_URL starts with a reserved prefix (X_GOOGLE_ FIREBASE_ EXT_)
[debug] [2025-07-16T21:27:29.958Z] Failed to validate key FIREBASE_ADMIN_CLIENT_X509_CERT_URL: Error: Key FIREBASE_ADMIN_CLIENT_X509_CERT_URL starts with a reserved prefix (X_GOOGLE_ FIREBASE_ EXT_)
[error] Error: Failed to load environment variables from .env.:
[error] - Error Key FIREBASE_ADMIN_TYPE starts with a reserved prefix (X_GOOGLE_ FIREBASE_ EXT_)
[error] - Error Key FIREBASE_ADMIN_PRIVATE_KEY_ID starts with a reserved prefix (X_GOOGLE_ FIREBASE_ EXT_)
[error] - Error Key FIREBASE_ADMIN_PRIVATE_KEY starts with a reserved prefix (X_GOOGLE_ FIREBASE_ EXT_)
[error] - Error Key FIREBASE_ADMIN_CLIENT_EMAIL starts with a reserved prefix (X_GOOGLE_ FIREBASE_ EXT_)
[error] - Error Key FIREBASE_ADMIN_CLIENT_ID starts with a reserved prefix (X_GOOGLE_ FIREBASE_ EXT_)
[error] - Error Key FIREBASE_ADMIN_AUTH_URI starts with a reserved prefix (X_GOOGLE_ FIREBASE_ EXT_)
[error] - Error Key FIREBASE_ADMIN_TOKEN_URI starts with a reserved prefix (X_GOOGLE_ FIREBASE_ EXT_)
[error] - Error Key FIREBASE_ADMIN_AUTH_PROVIDER_X509_CERT_URL starts with a reserved prefix (X_GOOGLE_ FIREBASE_ EXT_)
[error] - Error Key FIREBASE_ADMIN_CLIENT_X509_CERT_URL starts with a reserved prefix (X_GOOGLE_ FIREBASE_ EXT_)
[debug] [2025-07-16T21:29:14.462Z] ----------------------------------------------------------------------
[debug] [2025-07-16T21:29:14.467Z] Command:       /nix/store/rbdrkcs5kkwpalxcd7c6bnm33lk2955n-nodejs-20.19.0/bin/node /home/user/.global_modules/bin/firebase deploy --only hosting --project=website-5a18c
[debug] [2025-07-16T21:29:14.467Z] CLI Version:   14.10.1
[debug] [2025-07-16T21:29:14.468Z] Platform:      linux
[debug] [2025-07-16T21:29:14.468Z] Node Version:  v20.19.0
[debug] [2025-07-16T21:29:14.468Z] Time:          Wed Jul 16 2025 21:29:14 GMT+0000 (Coordinated Universal Time)
[debug] [2025-07-16T21:29:14.469Z] ----------------------------------------------------------------------
[debug] 
[debug] [2025-07-16T21:29:15.250Z] Object "/hosting" in "firebase.json" has unknown property: {"additionalProperty":"webFrameworks"}
[debug] [2025-07-16T21:29:15.251Z] Field "/hosting" in "firebase.json" is possibly invalid: must be array
[debug] [2025-07-16T21:29:15.251Z] Field "/hosting" in "firebase.json" is possibly invalid: must match a schema in anyOf
[debug] [2025-07-16T21:29:15.259Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2025-07-16T21:29:15.260Z] > authorizing via signed-in user (bakirbehmen@gmail.com)
[debug] [2025-07-16T21:29:15.260Z] [iam] checking project website-5a18c for permissions ["firebase.projects.get","firebasehosting.sites.update"]
[debug] [2025-07-16T21:29:15.262Z] Checked if tokens are valid: true, expires at: 1752703517880
[debug] [2025-07-16T21:29:15.262Z] Checked if tokens are valid: true, expires at: 1752703517880
[debug] [2025-07-16T21:29:15.264Z] >>> [apiv2][query] POST https://cloudresourcemanager.googleapis.com/v1/projects/website-5a18c:testIamPermissions [none]
[debug] [2025-07-16T21:29:15.264Z] >>> [apiv2][(partial)header] POST https://cloudresourcemanager.googleapis.com/v1/projects/website-5a18c:testIamPermissions x-goog-quota-user=projects/website-5a18c
[debug] [2025-07-16T21:29:15.265Z] >>> [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/website-5a18c:testIamPermissions {"permissions":["firebase.projects.get","firebasehosting.sites.update"]}
[debug] [2025-07-16T21:29:16.049Z] <<< [apiv2][status] POST https://cloudresourcemanager.googleapis.com/v1/projects/website-5a18c:testIamPermissions 200
[debug] [2025-07-16T21:29:16.056Z] <<< [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/website-5a18c:testIamPermissions {"permissions":["firebase.projects.get","firebasehosting.sites.update"]}
[debug] [2025-07-16T21:29:16.058Z] Checked if tokens are valid: true, expires at: 1752703517880
[debug] [2025-07-16T21:29:16.062Z] Checked if tokens are valid: true, expires at: 1752703517880
[debug] [2025-07-16T21:29:16.063Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/website-5a18c [none]
[debug] [2025-07-16T21:29:16.256Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/website-5a18c 200
[debug] [2025-07-16T21:29:16.260Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/website-5a18c {"projectId":"website-5a18c","projectNumber":"636702053767","displayName":"website","name":"projects/website-5a18c","resources":{"hostingSite":"website-5a18c"},"state":"ACTIVE","etag":"1_a6122a7f-7df1-4ea8-844b-57f64ef44324"}
[debug] [2025-07-16T21:29:24.682Z] defaultcredentials: writing to file /home/user/.config/firebase/bakirbehmen_gmail_com_application_default_credentials.json
[debug] [2025-07-16T21:29:24.702Z] Checked if tokens are valid: true, expires at: 1752703517880
[debug] [2025-07-16T21:29:24.702Z] Checked if tokens are valid: true, expires at: 1752703517880
[debug] [2025-07-16T21:29:24.710Z] >>> [apiv2][query] GET https://firebasehosting.googleapis.com/v1beta1/projects/website-5a18c/sites pageToken=&pageSize=10
[debug] [2025-07-16T21:29:25.818Z] <<< [apiv2][status] GET https://firebasehosting.googleapis.com/v1beta1/projects/website-5a18c/sites 200
[debug] [2025-07-16T21:29:25.819Z] <<< [apiv2][body] GET https://firebasehosting.googleapis.com/v1beta1/projects/website-5a18c/sites {"sites":[{"name":"projects/website-5a18c/sites/website-5a18c","defaultUrl":"https://website-5a18c.web.app","appId":"1:636702053767:web:0de2259025db8c0bbd6f22","type":"DEFAULT_SITE"}]}
[debug] [2025-07-16T21:29:25.819Z] Checked if tokens are valid: true, expires at: 1752703517880
[debug] [2025-07-16T21:29:25.820Z] Checked if tokens are valid: true, expires at: 1752703517880
[debug] [2025-07-16T21:29:25.830Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/-/webApps/1:636702053767:web:0de2259025db8c0bbd6f22/config [none]
[debug] [2025-07-16T21:29:26.458Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/-/webApps/1:636702053767:web:0de2259025db8c0bbd6f22/config 200
[debug] [2025-07-16T21:29:26.462Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/-/webApps/1:636702053767:web:0de2259025db8c0bbd6f22/config {"projectId":"website-5a18c","appId":"1:636702053767:web:0de2259025db8c0bbd6f22","storageBucket":"website-5a18c.firebasestorage.app","apiKey":"AIzaSyDxwAQf6RX8UHlbjPpnjMVX-0jS85K3bvw","authDomain":"website-5a18c.firebaseapp.com","messagingSenderId":"636702053767","measurementId":"G-WGPRNHDM9Q"}
[info] 
   Thank you for trying our early preview of Next.js support on Firebase Hosting.
   During the preview, support is best-effort and breaking changes can be expected. Proceed with caution.
   The integration is known to work with Next.js version 12 - 15.0. You may encounter errors.

   Documentation: https://firebase.google.com/docs/hosting/frameworks/nextjs
   File a bug: https://github.com/firebase/firebase-tools/issues/new?template=bug_report.md
   Submit a feature request: https://github.com/firebase/firebase-tools/issues/new?template=feature_request.md

   We'd love to learn from you. Express your interest in helping us shape the future of Firebase Hosting: https://goo.gle/41enW5X

[debug] [2025-07-16T21:29:43.595Z] Checked if tokens are valid: true, expires at: 1752703517880
[debug] [2025-07-16T21:29:43.597Z] Checked if tokens are valid: true, expires at: 1752703517880
[debug] [2025-07-16T21:29:43.598Z] >>> [apiv2][query] GET https://firebasehosting.googleapis.com/v1beta1/projects/website-5a18c/sites/website-5a18c [none]
[debug] [2025-07-16T21:29:44.564Z] <<< [apiv2][status] GET https://firebasehosting.googleapis.com/v1beta1/projects/website-5a18c/sites/website-5a18c 200
[debug] [2025-07-16T21:29:44.569Z] <<< [apiv2][body] GET https://firebasehosting.googleapis.com/v1beta1/projects/website-5a18c/sites/website-5a18c {"name":"projects/website-5a18c/sites/website-5a18c","defaultUrl":"https://website-5a18c.web.app","appId":"1:636702053767:web:0de2259025db8c0bbd6f22","type":"DEFAULT_SITE"}
[info]    ▲ Next.js 15.3.3

[info]    - Environments: .env.local, .env


[info]    Creating an optimized production build ...

[info]  ✓ Compiled successfully in 12.0s

[info]    Skipping validation of types
   Skipping linting

[info]    Collecting page data ...

[info]    Generating static pages (0/6) ...

[info]    Generating static pages (1/6) 

[info]    Generating static pages (2/6) 
   Generating static pages (4/6) 
 ✓ Generating static pages (6/6)

[info]    Finalizing page optimization ...

[info]    Collecting build traces ...

[info] 

[info] Route (app)                                 Size  First Load JS
┌ ○ /_not-found                            978 B         102 kB
└ ● /[lng]                               35.8 kB         157 kB
    ├ /sr
    └ /en
+ First Load JS shared by all             101 kB
  ├ chunks/4bd1b696-4419cc93057fcf32.js  53.2 kB
  ├ chunks/684-7002d2f60d48787d.js         46 kB
  └ other shared chunks (total)          2.03 kB


ƒ Middleware                             32.3 kB

[info] 
○  (Static)  prerendered as static content
●  (SSG)     prerendered as static HTML (uses generateStaticParams)


[info] Building a Cloud Function to run this application. This is needed due to:
[info]  • middleware
[info]  • use of fallback /[lng]
[info] 
[debug] [2025-07-16T21:31:15.387Z] skipping /en due to it matching an unsupported rewrite/redirect/header or middlware
[debug] [2025-07-16T21:31:15.387Z] skipping /sr due to it matching an unsupported rewrite/redirect/header or middlware
[debug] [2025-07-16T21:31:15.388Z] skipping /404 due to it matching an unsupported rewrite/redirect/header or middlware
[debug] [2025-07-16T21:31:15.416Z] Checked if tokens are valid: true, expires at: 1752703517880
[debug] [2025-07-16T21:31:15.416Z] Checked if tokens are valid: true, expires at: 1752703517880
[debug] [2025-07-16T21:31:15.417Z] >>> [apiv2][query] GET https://firebasehosting.googleapis.com/v1beta1/projects/website-5a18c/sites/website-5a18c [none]
[debug] [2025-07-16T21:31:16.389Z] <<< [apiv2][status] GET https://firebasehosting.googleapis.com/v1beta1/projects/website-5a18c/sites/website-5a18c 200
[debug] [2025-07-16T21:31:16.389Z] <<< [apiv2][body] GET https://firebasehosting.googleapis.com/v1beta1/projects/website-5a18c/sites/website-5a18c {"name":"projects/website-5a18c/sites/website-5a18c","defaultUrl":"https://website-5a18c.web.app","appId":"1:636702053767:web:0de2259025db8c0bbd6f22","type":"DEFAULT_SITE"}
[debug] [2025-07-16T21:32:11.671Z] [web frameworks] effective firebase.json:  {
  "hosting": [
    {
      "source": ".",
      "ignore": [
        "firebase.json",
        "**/.*",
        "**/node_modules/**"
      ],
      "rewrites": [
        {
          "source": "**",
          "function": {
            "functionId": "_next"
          }
        },
        {
          "source": "/**",
          "function": {
            "functionId": "ssrwebsite5a18c",
            "region": "us-central1",
            "pinTag": true
          }
        }
      ],
      "webFrameworks": {
        "region": "europe-west1"
      },
      "site": "website-5a18c",
      "redirects": [],
      "headers": [
        {
          "source": "/_not-found",
          "headers": [
            {
              "key": "x-nextjs-stale-time",
              "value": "300"
            },
            {
              "key": "x-nextjs-prerender",
              "value": "1"
            },
            {
              "key": "x-next-cache-tags",
              "value": "_N_T_/layout,_N_T_/_not-found/layout,_N_T_/_not-found/page,_N_T_/_not-found"
            }
          ]
        },
        {
          "source": "/favicon.ico",
          "headers": [
            {
              "key": "cache-control",
              "value": "public, max-age=0, must-revalidate"
            },
            {
              "key": "content-type",
              "value": "image/x-icon"
            },
            {
              "key": "x-next-cache-tags",
              "value": "_N_T_/layout,_N_T_/favicon.ico/layout,_N_T_/favicon.ico/route,_N_T_/favicon.ico"
            }
          ]
        },
        {
          "source": "/**/*.[jt]s",
          "headers": [
            {
              "key": "Set-Cookie",
              "value": "__FIREBASE_DEFAULTS__=eyJjb25maWciOnsicHJvamVjdElkIjoid2Vic2l0ZS01YTE4YyIsImFwcElkIjoiMTo2MzY3MDIwNTM3Njc6d2ViOjBkZTIyNTkwMjVkYjhjMGJiZDZmMjIiLCJzdG9yYWdlQnVja2V0Ijoid2Vic2l0ZS01YTE4Yy5maXJlYmFzZXN0b3JhZ2UuYXBwIiwiYXBpS2V5IjoiQUl6YVN5RHh3QVFmNlJYOFVIbGJqUHBuak1WWC0walM4NUszYnZ3IiwiYXV0aERvbWFpbiI6IndlYnNpdGUtNWExOGMuZmlyZWJhc2VhcHAuY29tIiwibWVzc2FnaW5nU2VuZGVySWQiOiI2MzY3MDIwNTM3NjciLCJtZWFzdXJlbWVudElkIjoiRy1XR1BSTkhETTlRIn0sIl9hdXRoVG9rZW5TeW5jVVJMIjoiL19fc2Vzc2lvbiJ9; SameSite=Strict; Expires=2027-06-11T08:12:11.671Z; Path=/;"
            }
          ]
        }
      ],
      "cleanUrls": true,
      "trailingSlash": false,
      "public": ".firebase/website-5a18c/hosting",
      "webFramework": "next_ssr"
    }
  ],
  "functions": [
    {
      "source": ".firebase/website-5a18c/functions",
      "codebase": "firebase-frameworks-website-5a18c"
    }
  ]
}
[debug] [2025-07-16T21:32:11.672Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2025-07-16T21:32:11.679Z] > authorizing via signed-in user (bakirbehmen@gmail.com)
[debug] [2025-07-16T21:32:11.679Z] [iam] checking project website-5a18c for permissions ["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]
[debug] [2025-07-16T21:32:11.680Z] Checked if tokens are valid: true, expires at: 1752703517880
[debug] [2025-07-16T21:32:11.681Z] Checked if tokens are valid: true, expires at: 1752703517880
[debug] [2025-07-16T21:32:11.685Z] >>> [apiv2][query] POST https://cloudresourcemanager.googleapis.com/v1/projects/website-5a18c:testIamPermissions [none]
[debug] [2025-07-16T21:32:11.686Z] >>> [apiv2][(partial)header] POST https://cloudresourcemanager.googleapis.com/v1/projects/website-5a18c:testIamPermissions x-goog-quota-user=projects/website-5a18c
[debug] [2025-07-16T21:32:11.686Z] >>> [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/website-5a18c:testIamPermissions {"permissions":["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]}
[debug] [2025-07-16T21:32:12.355Z] <<< [apiv2][status] POST https://cloudresourcemanager.googleapis.com/v1/projects/website-5a18c:testIamPermissions 200
[debug] [2025-07-16T21:32:12.356Z] <<< [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/website-5a18c:testIamPermissions {"permissions":["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]}
[debug] [2025-07-16T21:32:12.360Z] Checked if tokens are valid: true, expires at: 1752703517880
[debug] [2025-07-16T21:32:12.361Z] Checked if tokens are valid: true, expires at: 1752703517880
[debug] [2025-07-16T21:32:12.361Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v1/projects/website-5a18c/locations/-/functions [none]
[debug] [2025-07-16T21:32:12.977Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v1/projects/website-5a18c/locations/-/functions 200
[debug] [2025-07-16T21:32:12.977Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v1/projects/website-5a18c/locations/-/functions {"functions":[{"name":"projects/website-5a18c/locations/europe-west3/functions/ext-image-processing-api-handler","description":"Serves a API accepting incoming HTTP requests.","sourceArchiveUrl":"gs://firebase-mod-sources-prod/2137a7fadcc867f26a3d8015133f2ab19c2f60dd35bd2ec8facf4e1f04e61232","httpsTrigger":{"url":"https://europe-west3-website-5a18c.cloudfunctions.net/ext-image-processing-api-handler","securityLevel":"SECURE_OPTIONAL"},"status":"ACTIVE","entryPoint":"handler","timeout":"60s","availableMemoryMb":1024,"serviceAccountEmail":"ext-image-processing-api@website-5a18c.iam.gserviceaccount.com","updateTime":"2025-07-14T04:37:55.941Z","versionId":"2","labels":{"goog-firebase-ext-iid":"image-processing-api","firebase-extensions-ar":"enabled","goog-dm":"firebase-ext-image-processing-api","goog-firebase-ext":"image-processing-api","deployment-tool":"firebase-extensions"},"environmentVariables":{"CLOUD_STORAGE_BUCKET":"website-5a18c.firebasestorage.app","CORS_ORIGIN_ALLOW_LIST":"*","DATABASE_INSTANCE":"","DATABASE_URL":"","EXT_INSTANCE_ID":"image-processing-api","FIREBASE_CONFIG":"{\"projectId\":\"website-5a18c\",\"databaseURL\":\"\",\"storageBucket\":\"website-5a18c.firebasestorage.app\"}","GCLOUD_PROJECT":"website-5a18c","LOCATION":"europe-west3","PROJECT_ID":"website-5a18c","STORAGE_BUCKET":"website-5a18c.firebasestorage.app"},"runtime":"nodejs20","ingressSettings":"ALLOW_ALL","buildId":"f18bca3c-f1f5-4477-90f4-e5e6e741ebbc","buildEnvironmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"buildName":"projects/636702053767/locations/europe-west3/builds/f18bca3c-f1f5-4477-90f4-e5e6e741ebbc","dockerRegistry":"ARTIFACT_REGISTRY","automaticUpdatePolicy":{},"buildServiceAccount":"projects/website-5a18c/serviceAccounts/636702053767-compute@developer.gserviceaccount.com","satisfiesPzs":true,"satisfiesPzi":true}]}
[debug] [2025-07-16T21:32:12.980Z] Checked if tokens are valid: true, expires at: 1752703517880
[debug] [2025-07-16T21:32:12.980Z] Checked if tokens are valid: true, expires at: 1752703517880
[debug] [2025-07-16T21:32:12.981Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/website-5a18c/locations/-/functions filter=environment%3D%22GEN_2%22
[debug] [2025-07-16T21:32:13.975Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/website-5a18c/locations/-/functions 200
[debug] [2025-07-16T21:32:13.976Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/website-5a18c/locations/-/functions {"functions":[{"name":"projects/website-5a18c/locations/us-central1/functions/ssrwebsite5a18c","buildConfig":{"build":"projects/636702053767/locations/us-central1/builds/d8dc5e1a-ecb9-4b6c-afee-a6e3c624b3a3","runtime":"nodejs20","entryPoint":"ssrwebsite5a18c","source":{"storageSource":{"bucket":"gcf-v2-sources-636702053767-us-central1","object":"ssrwebsite5a18c/function-source.zip","generation":"1752466812219058"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/website-5a18c/locations/us-central1/repositories/gcf-artifacts","sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-636702053767-us-central1","object":"ssrwebsite5a18c/function-source.zip","generation":"1752466812219058"}},"dockerRegistry":"ARTIFACT_REGISTRY","serviceAccount":"projects/website-5a18c/serviceAccounts/636702053767-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/website-5a18c/locations/us-central1/services/ssrwebsite5a18c","timeoutSeconds":60,"environmentVariables":{"GEMINI_API_KEY":"","NEXT_PUBLIC_FIREBASE_API_KEY":"AIzaSyDxwAQf6RX8UHlbjPpnjMVX-0jS85K3bvw","NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN":"website-5a18c.firebaseapp.com","NEXT_PUBLIC_FIREBASE_PROJECT_ID":"website-5a18c","NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET":"website-5a18c.appspot.com","NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID":"636702053767","NEXT_PUBLIC_FIREBASE_APP_ID":"1:636702053767:web:0de2259025db8c0bbd6f22","NEXT_PUBLIC_FIREBASE_MEASUREMENT_ID":"G-WGPRNHDM9Q","VERCEL_URL":"website-5a18c.web.app","__FIREBASE_FRAMEWORKS_ENTRY__":"next.js","__FIREBASE_DEFAULTS__":"{\"config\":{\"projectId\":\"website-5a18c\",\"appId\":\"1:636702053767:web:0de2259025db8c0bbd6f22\",\"storageBucket\":\"website-5a18c.firebasestorage.app\",\"apiKey\":\"AIzaSyDxwAQf6RX8UHlbjPpnjMVX-0jS85K3bvw\",\"authDomain\":\"website-5a18c.firebaseapp.com\",\"messagingSenderId\":\"636702053767\",\"measurementId\":\"G-WGPRNHDM9Q\"},\"_authTokenSyncURL\":\"/__session\"}","FIREBASE_CONFIG":"{\"projectId\":\"website-5a18c\",\"storageBucket\":\"website-5a18c.firebasestorage.app\"}","GCLOUD_PROJECT":"website-5a18c","EVENTARC_CLOUD_EVENT_SOURCE":"projects/website-5a18c/locations/us-central1/services/ssrwebsite5a18c","FUNCTION_TARGET":"ssrwebsite5a18c","LOG_EXECUTION_ID":"true"},"maxInstanceCount":20,"ingressSettings":"ALLOW_ALL","uri":"https://ssrwebsite5a18c-hr7gf53sqq-uc.a.run.app","serviceAccountEmail":"636702053767-compute@developer.gserviceaccount.com","availableMemory":"256Mi","allTrafficOnLatestRevision":true,"revision":"ssrwebsite5a18c-00001-rey","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"state":"ACTIVE","updateTime":"2025-07-14T04:22:57.557138708Z","labels":{"deployment-tool":"cli-firebase--project-idx","firebase-functions-codebase":"firebase-frameworks-website-5a18c","firebase-functions-hash":"d1a9c72cc15bd8e5dc8545c81251e01b59363f8d"},"environment":"GEN_2","url":"https://us-central1-website-5a18c.cloudfunctions.net/ssrwebsite5a18c","createTime":"2025-07-14T04:20:12.455639447Z","satisfiesPzi":true}]}
[info] i  hosting: The following function(s) are pinned to site website-5a18c and will be deployed as well: ssrwebsite5a18c 
[info] 
[info] === Deploying to 'website-5a18c'...
[info] 
[info] i  deploying functions, hosting 
[debug] [2025-07-16T21:32:13.989Z] Checked if tokens are valid: true, expires at: 1752703517880
[debug] [2025-07-16T21:32:13.990Z] Checked if tokens are valid: true, expires at: 1752703517880
[debug] [2025-07-16T21:32:13.990Z] >>> [apiv2][query] GET https://cloudresourcemanager.googleapis.com/v1/projects/website-5a18c [none]
[debug] [2025-07-16T21:32:14.186Z] <<< [apiv2][status] GET https://cloudresourcemanager.googleapis.com/v1/projects/website-5a18c 200
[debug] [2025-07-16T21:32:14.188Z] <<< [apiv2][body] GET https://cloudresourcemanager.googleapis.com/v1/projects/website-5a18c {"projectNumber":"636702053767","projectId":"website-5a18c","lifecycleState":"ACTIVE","name":"website","labels":{"firebase":"enabled","firebase-core":"disabled","generative-language":"enabled"},"createTime":"2025-07-11T21:11:24.875257Z"}
[info] i  functions: preparing codebase firebase-frameworks-website-5a18c for deployment 
[info] i  functions: ensuring required API cloudfunctions.googleapis.com is enabled... 
[info] i  functions: ensuring required API cloudbuild.googleapis.com is enabled... 
[info] i  artifactregistry: ensuring required API artifactregistry.googleapis.com is enabled... 
[debug] [2025-07-16T21:32:14.202Z] Checked if tokens are valid: true, expires at: 1752703517880
[debug] [2025-07-16T21:32:14.202Z] Checked if tokens are valid: true, expires at: 1752703517880
[debug] [2025-07-16T21:32:14.203Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/website-5a18c/adminSdkConfig [none]
[debug] [2025-07-16T21:32:14.461Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/website-5a18c/adminSdkConfig 200
[debug] [2025-07-16T21:32:14.461Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/website-5a18c/adminSdkConfig {"projectId":"website-5a18c","storageBucket":"website-5a18c.firebasestorage.app"}
[debug] [2025-07-16T21:32:14.462Z] Checked if tokens are valid: true, expires at: 1752703517880
[debug] [2025-07-16T21:32:14.462Z] Checked if tokens are valid: true, expires at: 1752703517880
[debug] [2025-07-16T21:32:14.466Z] >>> [apiv2][query] GET https://runtimeconfig.googleapis.com/v1beta1/projects/website-5a18c/configs [none]
[debug] [2025-07-16T21:32:14.656Z] <<< [apiv2][status] GET https://runtimeconfig.googleapis.com/v1beta1/projects/website-5a18c/configs 200
[debug] [2025-07-16T21:32:14.657Z] <<< [apiv2][body] GET https://runtimeconfig.googleapis.com/v1beta1/projects/website-5a18c/configs {}
[debug] [2025-07-16T21:32:14.669Z] Validating nodejs source
[debug] [2025-07-16T21:32:15.419Z] > [functions] package.json contents: {
  "name": "nextn",
  "version": "0.1.0",
  "private": true,
  "dependencies": {
    "@genkit-ai/googleai": "^1.13.0",
    "@hookform/resolvers": "^4.1.3",
    "@radix-ui/react-accordion": "^1.2.3",
    "@radix-ui/react-alert-dialog": "^1.1.6",
    "@radix-ui/react-avatar": "^1.1.3",
    "@radix-ui/react-checkbox": "^1.1.4",
    "@radix-ui/react-collapsible": "^1.1.11",
    "@radix-ui/react-dialog": "^1.1.6",
    "@radix-ui/react-dropdown-menu": "^2.1.6",
    "@radix-ui/react-label": "^2.1.2",
    "@radix-ui/react-menubar": "^1.1.6",
    "@radix-ui/react-popover": "^1.1.6",
    "@radix-ui/react-progress": "^1.1.2",
    "@radix-ui/react-radio-group": "^1.2.3",
    "@radix-ui/react-scroll-area": "^1.2.3",
    "@radix-ui/react-select": "^2.1.6",
    "@radix-ui/react-separator": "^1.1.2",
    "@radix-ui/react-slider": "^1.2.3",
    "@radix-ui/react-slot": "^1.2.3",
    "@radix-ui/react-switch": "^1.1.3",
    "@radix-ui/react-tabs": "^1.1.3",
    "@radix-ui/react-toast": "^1.2.6",
    "@radix-ui/react-tooltip": "^1.1.8",
    "class-variance-authority": "^0.7.1",
    "clsx": "^2.1.1",
    "date-fns": "^3.6.0",
    "dotenv": "^16.5.0",
    "embla-carousel-react": "^8.6.0",
    "firebase": "^11.10.0",
    "firebase-admin": "^13.4.0",
    "genkit": "^1.13.0",
    "i18next": "^25.3.2",
    "i18next-browser-languagedetector": "^8.2.0",
    "i18next-resources-to-backend": "^1.2.1",
    "lucide-react": "^0.475.0",
    "next": "15.3.3",
    "react": "^18.3.1",
    "react-cookie": "^8.0.1",
    "react-day-picker": "^8.10.1",
    "react-dom": "^18.3.1",
    "react-hook-form": "^7.54.2",
    "react-i18next": "^15.6.0",
    "recharts": "^2.15.1",
    "tailwind-merge": "^3.0.1",
    "tailwindcss-animate": "^1.0.7",
    "zod": "^3.24.2",
    "firebase-frameworks": "^0.11.0",
    "firebase-functions": "^6.0.1"
  },
  "main": "server.js",
  "engines": {
    "node": "20"
  }
}
[debug] [2025-07-16T21:32:15.419Z] Building nodejs source
[info] i  functions: Loading and analyzing source code for codebase firebase-frameworks-website-5a18c to determine what to deploy 
[debug] [2025-07-16T21:32:15.421Z] Could not find functions.yaml. Must use http discovery
[debug] [2025-07-16T21:32:15.437Z] Found firebase-functions binary at '/home/user/studio/.firebase/website-5a18c/functions/node_modules/.bin/firebase-functions'
[info] Serving at port 8729

[debug] [2025-07-16T21:32:18.532Z] Got response from /__/functions.yaml {"endpoints":{"ssrwebsite5a18c":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"httpsTrigger":{},"entryPoint":"ssrwebsite5a18c"}},"specVersion":"v1alpha1","requiredAPIs":[],"extensions":{}}
[info] i  extensions: ensuring required API firebaseextensions.googleapis.com is enabled... 
[debug] [2025-07-16T21:32:22.639Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2025-07-16T21:32:22.640Z] > authorizing via signed-in user (bakirbehmen@gmail.com)
[debug] [2025-07-16T21:32:22.642Z] [iam] checking project website-5a18c for permissions ["firebase.projects.get","firebaseextensions.instances.list"]
[debug] [2025-07-16T21:32:22.642Z] Checked if tokens are valid: true, expires at: 1752703517880
[debug] [2025-07-16T21:32:22.642Z] Checked if tokens are valid: true, expires at: 1752703517880
[debug] [2025-07-16T21:32:22.643Z] >>> [apiv2][query] POST https://cloudresourcemanager.googleapis.com/v1/projects/website-5a18c:testIamPermissions [none]
[debug] [2025-07-16T21:32:22.643Z] >>> [apiv2][(partial)header] POST https://cloudresourcemanager.googleapis.com/v1/projects/website-5a18c:testIamPermissions x-goog-quota-user=projects/website-5a18c
[debug] [2025-07-16T21:32:22.643Z] >>> [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/website-5a18c:testIamPermissions {"permissions":["firebase.projects.get","firebaseextensions.instances.list"]}
[debug] [2025-07-16T21:32:23.301Z] <<< [apiv2][status] POST https://cloudresourcemanager.googleapis.com/v1/projects/website-5a18c:testIamPermissions 200
[debug] [2025-07-16T21:32:23.304Z] <<< [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/website-5a18c:testIamPermissions {"permissions":["firebase.projects.get","firebaseextensions.instances.list"]}
[debug] [2025-07-16T21:32:23.305Z] Checked if tokens are valid: true, expires at: 1752703517880
[debug] [2025-07-16T21:32:23.305Z] Checked if tokens are valid: true, expires at: 1752703517880
[debug] [2025-07-16T21:32:23.307Z] >>> [apiv2][query] GET https://firebaseextensions.googleapis.com/v1beta/projects/website-5a18c/instances pageSize=100&pageToken=
[debug] [2025-07-16T21:32:24.109Z] <<< [apiv2][status] GET https://firebaseextensions.googleapis.com/v1beta/projects/website-5a18c/instances 200
[debug] [2025-07-16T21:32:24.110Z] <<< [apiv2][body] GET https://firebaseextensions.googleapis.com/v1beta/projects/website-5a18c/instances {"instances":[{"name":"projects/website-5a18c/instances/image-processing-api","createTime":"2025-07-14T04:33:14.381422Z","updateTime":"2025-07-14T04:38:24.129382Z","state":"ACTIVE","config":{"name":"projects/website-5a18c/instances/image-processing-api/configurations/1ecf0e78-380c-4b30-bf6f-36ead48313e2","createTime":"2025-07-14T04:33:14.381422Z","source":{"name":"projects/invertase-firebase-extensions/sources/8e80a7ef-0036-42b3-b829-9fab843715dd","packageUri":"https://storage.googleapis.com/firebase-extensions-packages-prod/invertase-image-processing-api-0.2.1-6ccff87e-84ec-40c2-a78c-bbfb629b2dd5.zip","hash":"5034d7302af64a6e98d4e82f6529aab512b58ec36c69e5cb6656914e7d1be27c","extensionRoot":"/","spec":{"specVersion":"v1beta","name":"image-processing-api","version":"0.2.1","description":"Use this extension to optimize and transform images via a powerful HTTP API with over 30 different image operations to enhance and manipulate your images.","apis":[{"apiName":"storage-component.googleapis.com","reason":"Needed to use Cloud Storage"}],"roles":[{"role":"storage.admin","reason":"Allows the extension to read images in Cloud Storage"}],"resources":[{"name":"handler","type":"firebaseextensions.v1beta.function","propertiesYaml":"availableMemoryMb: 1024\nhttpsTrigger: {}\nlocation: ${param:LOCATION}\nruntime: nodejs20\n","description":"Serves a API accepting incoming HTTP requests.","deletionPolicy":"DELETE"}],"billingRequired":true,"author":{"authorName":"Invertase","url":"https://invertase.io"},"contributors":[{"authorName":"Invertase","email":"oss@invertase.io","url":"https://github.com/invertase"}],"license":"Apache-2.0","releaseNotesUrl":"https://github.com/invertase/firebase-extensions/tree/main/extensions/image-processing-api/CHANGELOG.md","sourceUrl":"https://github.com/invertase/firebase-extensions/tree/main/extensions/image-processing-api","params":[{"param":"LOCATION","label":"Cloud Functions location","type":"SELECT","description":"Where do you want to deploy the functions created for this extension? You usually want a location close to your Storage bucket. For help selecting a location, refer to the [location selection guide](https://firebase.google.com/docs/functions/locations).","required":true,"options":[{"value":"us-central1","label":"Iowa (us-central1)"},{"value":"us-east1","label":"South Carolina (us-east1)"},{"value":"us-east4","label":"Northern Virginia (us-east4)"},{"value":"us-west2","label":"Los Angeles (us-west2)"},{"value":"us-west3","label":"Salt Lake City (us-west3)"},{"value":"us-west4","label":"Las Vegas (us-west4)"},{"value":"europe-central2","label":"Warsaw (europe-central2)"},{"value":"europe-west1","label":"Belgium (europe-west1)"},{"value":"europe-west2","label":"London (europe-west2)"},{"value":"europe-west3","label":"Frankfurt (europe-west3)"},{"value":"europe-west6","label":"Zurich (europe-west6)"},{"value":"asia-east2","label":"Hong Kong (asia-east2)"},{"value":"asia-northeast1","label":"Tokyo (asia-northeast1)"},{"value":"asia-northeast2","label":"Osaka (asia-northeast2)"},{"value":"asia-northeast3","label":"Seoul (asia-northeast3)"},{"value":"asia-south1","label":"Mumbai (asia-south1)"},{"value":"asia-southeast2","label":"Jakarta (asia-southeast2)"},{"value":"northamerica-northeast1","label":"Montreal (northamerica-northeast1)"},{"value":"southamerica-east1","label":"Sao Paulo (southamerica-east1)"},{"value":"australia-southeast1","label":"Sydney (australia-southeast1)"}],"default":"us-central1","immutable":true},{"param":"CLOUD_STORAGE_BUCKET","label":"Cloud Storage bucket for images","type":"STRING","description":"The Cloud Storage bucket where images that are to be processed are located. API requests with input urls or paths that are not inside this bucket will be dropped.\n","required":true,"default":"${STORAGE_BUCKET}","example":"my-project-12345.appspot.com","validationRegex":"^([0-9a-z_.-]*)$","validationErrorMessage":"Invalid storage bucket"},{"param":"CORS_ORIGIN_ALLOW_LIST","label":"Allowed CORS origins","type":"STRING","description":"A comma delimited value of allowed CORS origins. Use the default of '*' to allow all origins. This is useful to lockdown your API and only allow your own website to embed the images directly. Note this will not prevent non-browser requests from accessing your API.\n","required":true,"default":"*","example":"*.example.com,invertase.io"},{"param":"HOSTNAME","label":"Hostname","type":"STRING","description":"An optional hostname to fetch images from. This can used to construct the original image URL in the response. Include ONLY the hostname, without any protocol or path. The protocol https:// will be added automatically. This parameter is needed if you would like to query using local path names such as /my/image.jpg. instead of the full URL.\n","example":"example.com"}],"preinstallContent":"# Image Processing Extension\n\nUse this extension to optimize and transform images via a powerful HTTP API with over 30 image operations for enhancing and manipulating your images.\n\n## How It Works\n\nWhen you install this extension, it deploys a Cloud Function that exposes an HTTP API. All requests must be sent to the /process endpoint of the function. You perform image operations by passing an operations query parameter—a URL-encoded JSON string defining the operations to execute.\n\n### Example\n\nDefine your operations like so:\n\n```js\nconst operations = [\n  {\n    operation: 'input',\n    type: 'url',\n    url: 'https://example.com/image.jpg',\n  },\n  {\n    operation: 'grayscale',\n  },\n  {\n    operation: 'output',\n    format: 'webp',\n  },\n];\n\nconst params = `?operations=${encodeURIComponent(JSON.stringify(operations))}`;\n```\n\nThen, make your GET request to your Cloud Function using the correct endpoint. For example:\n\n```\nhttps://<your-configured-region>-<your-project-id>.cloudfunctions.net/<extension-instance-id>/process${params}\n```\n\nThe extension also comes with a JavaScript utility library for simplifying the creation of operations:\n\n```ts\nimport { builder } from '@invertase/image-processing-api';\n\nconst output = builder()\n  .input({\n    url: 'https://example.com/image.jpg',\n  })\n  .grayscale()\n  .output({\n    format: 'webp',\n  });\n\nconst params = `?operations=${output.toEncodedJSONString()}`;\n```\n\nView the [official documentation](https://extensions.invertase.dev/image-processing-api) for full usage examples.\n\n### Relative paths\n\nThe extension provides a hostname parameter, allowing you to query the function with local paths (starting with `/`).\n\nAs an example, if we set the hostname parameter to \"example.com\" then the following operation:\n\n```js\nconst operations = [\n  {\n    operation: 'input',\n    type: 'url',\n    url: '/image.jpg',\n  },\n  {\n    operation: 'grayscale',\n  },\n  {\n    operation: 'output',\n    format: 'webp',\n  },\n];\n```\n\nis equivalent to the earlier given example. The url `https://example.com/image.jpg` is constructed within the extension.\n\nNote that this will **only** apply to paths that begin with a forward slash `/`, and **only** when the hostname parameter is set.\n\n#### Additional setup\n\nBefore installing this extension, make sure that you've [set up a Cloud Storage bucket](https://firebase.google.com/docs/storage) in your Firebase project.\n\n#### Billing\n\nTo install an extension, your project must be on the [Blaze (pay as you go) plan](https://firebase.google.com/pricing)\n\n- You will be charged a small amount (typically around $0.01/month) for the Firebase resources required by this extension (even if it is not used).\n- This extension uses other Firebase and Google Cloud Platform services, which have associated charges if you exceed the service’s no-cost tier:\n  - Cloud Storage\n  - Cloud Functions (Node.js 10+ runtime. [See FAQs](https://firebase.google.com/support/faq#extensions-pricing))\n","postinstallContent":"### See it in action\n\nYou can test out this extension right away!\n\n1. Create an operations list, for example:\n\n```js\nconst operations = [\n  {\n    operation: 'input',\n    type: 'url',\n    url: 'https://images.unsplash.com/photo-1663659552548-25d7771802c9?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=774&q=80',\n  },\n  {\n    operation: 'grayscale',\n  },\n  {\n    operation: 'output',\n    format: 'webp',\n  },\n];\n```\n\n2. Stringify and encode the list:\n\n```js\nencodeURIComponent(JSON.stringify(operations));\n```\n\n3. Call the deployed `process` Cloud Function:\n\n[https://${param:LOCATION}-${param:PROJECT_ID}.cloudfunctions.net/ext-${param:EXT_INSTANCE_ID}-handler/process?operations=%5B%7B%22operation%22%3A%22input%22%2C%22type%22%3A%22url%22%2C%22url%22%3A%22https%3A%2F%2Fimages.unsplash.com%2Fphoto-1663659552548-25d7771802c9%3Fixlib%3Drb-1.2.1%26ixid%3DMnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8%26auto%3Dformat%26fit%3Dcrop%26w%3D774%26q%3D80%22%7D%2C%7B%22operation%22%3A%22grayscale%22%7D%2C%7B%22operation%22%3A%22output%22%2C%22format%22%3A%22webp%22%7D%5D](https://${param:LOCATION}-${param:PROJECT_ID}.cloudfunctions.net/ext-${param:EXT_INSTANCE_ID}-handler/process?operations=%5B%7B%22operation%22%3A%22input%22%2C%22type%22%3A%22url%22%2C%22url%22%3A%22https%3A%2F%2Fimages.unsplash.com%2Fphoto-1663659552548-25d7771802c9%3Fixlib%3Drb-1.2.1%26ixid%3DMnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8%26auto%3Dformat%26fit%3Dcrop%26w%3D774%26q%3D80%22%7D%2C%7B%22operation%22%3A%22grayscale%22%7D%2C%7B%22operation%22%3A%22output%22%2C%22format%22%3A%22webp%22%7D%5D)\n\nThe result will be a grayscaled version of the image, in WebP format.\n\n### Using the extension\n\nSee the [official documentation](https://extensions.invertase.dev/image-processing-api) for more information on using the extension, including the full list of supported operations you can use.\n\n### Monitoring\n\nAs a best practice, you can [monitor the activity](https://firebase.google.com/docs/extensions/manage-installed-extensions#monitor) of your installed extension, including checks on its health, usage, and logs.\n","readmeContent":"# Image Processing API\n\n**Author**: Invertase (**[https://invertase.io](https://invertase.io)**)\n\n**Description**: Use this extension to optimize and transform images via a powerful HTTP API with over 30 different image operations to enhance and manipulate your images.\n\n**Details**: # Image Processing Extension\nUse this extension to optimize and transform images via a powerful HTTP API with over 30 image operations for enhancing and manipulating your images.\n\n## How It Works\n\nWhen you install this extension, it deploys a Cloud Function that exposes an HTTP API. All requests must be sent to the /process endpoint of the function. You perform image operations by passing an operations query parameter—a URL-encoded JSON string defining the operations to execute.\n\n### Example\n\nDefine your operations like so:\n\n```js\nconst operations = [\n  {\n    operation: 'input',\n    type: 'url',\n    url: 'https://example.com/image.jpg',\n  },\n  {\n    operation: 'grayscale',\n  },\n  {\n    operation: 'output',\n    format: 'webp',\n  },\n];\n\nconst params = `?operations=${encodeURIComponent(JSON.stringify(operations))}`;\n```\n\nThen, make your GET request to your Cloud Function using the correct endpoint. For example:\n\n```\nhttps://<your-configured-region>-<your-project-id>.cloudfunctions.net/<extension-instance-id>/process${params}\n```\n\nThe extension also comes with a JavaScript utility library for simplifying the creation of operations:\n\n```ts\nimport { builder } from '@invertase/image-processing-api';\n\nconst output = builder()\n  .input({\n    url: 'https://example.com/image.jpg',\n  })\n  .grayscale()\n  .output({\n    format: 'webp',\n  });\n\nconst params = `?operations=${output.toEncodedJSONString()}`;\n```\n\nView the [official documentation](https://extensions.invertase.dev/image-processing-api) for full usage examples.\n\n### Relative paths\n\nThe extension provides a hostname parameter, allowing you to query the function with local paths (starting with `/`).\n\nAs an example, if we set the hostname parameter to \"example.com\" then the following operation:\n\n```js\nconst operations = [\n  {\n    operation: 'input',\n    type: 'url',\n    url: '/image.jpg',\n  },\n  {\n    operation: 'grayscale',\n  },\n  {\n    operation: 'output',\n    format: 'webp',\n  },\n];\n```\n\nis equivalent to the earlier given example. The url `https://example.com/image.jpg` is constructed within the extension.\n\nNote that this will **only** apply to paths that begin with a forward slash `/`, and **only** when the hostname parameter is set.\n\n#### Additional setup\n\nBefore installing this extension, make sure that you've [set up a Cloud Storage bucket](https://firebase.google.com/docs/storage) in your Firebase project.\n\n#### Billing\n\nTo install an extension, your project must be on the [Blaze (pay as you go) plan](https://firebase.google.com/pricing)\n\n- You will be charged a small amount (typically around $0.01/month) for the Firebase resources required by this extension (even if it is not used).\n- This extension uses other Firebase and Google Cloud Platform services, which have associated charges if you exceed the service’s no-cost tier:\n  - Cloud Storage\n  - Cloud Functions (Node.js 10+ runtime. [See FAQs](https://firebase.google.com/support/faq#extensions-pricing))\n\n**Configuration Parameters:**\n\n- Cloud Functions location: Where do you want to deploy the functions created for this extension? You usually want a location close to your Storage bucket. For help selecting a location, refer to the [location selection guide](https://firebase.google.com/docs/functions/locations).\n\n- Cloud Storage bucket for images: The Cloud Storage bucket where images that are to be processed are located. API requests with input urls or paths that are not inside this bucket will be dropped.\n\n- Allowed CORS origins: A comma delimited value of allowed CORS origins. Use the default of '\\*' to allow all origins. This is useful to lockdown your API and only allow your own website to embed the images directly. Note this will not prevent non-browser requests from accessing your API.\n\n- Hostname: An optional hostname to fetch images from. This can used to construct the original image URL in the response. Include ONLY the hostname, without any protocol or path. The protocol https:// will be added automatically. This parameter is needed if you would like to query using local path names such as /my/image.jpg. instead of the full URL.\n\n**Cloud Functions:**\n\n- **handler:** Serves a API accepting incoming HTTP requests.\n\n**APIs Used**:\n\n- storage-component.googleapis.com (Reason: Needed to use Cloud Storage)\n\n**Access Required**:\n\nThis extension will operate with the following project IAM roles:\n\n- storage.admin (Reason: Allows the extension to read images in Cloud Storage)\n","displayName":"Image Processing API"},"fetchTime":"2025-04-03T16:10:15.973372Z","lastOperationName":"projects/invertase-firebase-extensions/operations/443dc71d-01a6-4640-a13c-51448d5c4de1","state":"ACTIVE"},"params":{"CLOUD_STORAGE_BUCKET":"website-5a18c.firebasestorage.app","CORS_ORIGIN_ALLOW_LIST":"*","LOCATION":"europe-west3"},"populatedPostinstallContent":"### See it in action\n\nYou can test out this extension right away!\n\n1. Create an operations list, for example:\n\n```js\nconst operations = [\n  {\n    operation: 'input',\n    type: 'url',\n    url: 'https://images.unsplash.com/photo-1663659552548-25d7771802c9?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=774&q=80',\n  },\n  {\n    operation: 'grayscale',\n  },\n  {\n    operation: 'output',\n    format: 'webp',\n  },\n];\n```\n\n2. Stringify and encode the list:\n\n```js\nencodeURIComponent(JSON.stringify(operations));\n```\n\n3. Call the deployed `process` Cloud Function:\n\n[https://europe-west3-website-5a18c.cloudfunctions.net/ext-image-processing-api-handler/process?operations=%5B%7B%22operation%22%3A%22input%22%2C%22type%22%3A%22url%22%2C%22url%22%3A%22https%3A%2F%2Fimages.unsplash.com%2Fphoto-1663659552548-25d7771802c9%3Fixlib%3Drb-1.2.1%26ixid%3DMnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8%26auto%3Dformat%26fit%3Dcrop%26w%3D774%26q%3D80%22%7D%2C%7B%22operation%22%3A%22grayscale%22%7D%2C%7B%22operation%22%3A%22output%22%2C%22format%22%3A%22webp%22%7D%5D](https://europe-west3-website-5a18c.cloudfunctions.net/ext-image-processing-api-handler/process?operations=%5B%7B%22operation%22%3A%22input%22%2C%22type%22%3A%22url%22%2C%22url%22%3A%22https%3A%2F%2Fimages.unsplash.com%2Fphoto-1663659552548-25d7771802c9%3Fixlib%3Drb-1.2.1%26ixid%3DMnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8%26auto%3Dformat%26fit%3Dcrop%26w%3D774%26q%3D80%22%7D%2C%7B%22operation%22%3A%22grayscale%22%7D%2C%7B%22operation%22%3A%22output%22%2C%22format%22%3A%22webp%22%7D%5D)\n\nThe result will be a grayscaled version of the image, in WebP format.\n\n### Using the extension\n\nSee the [official documentation](https://extensions.invertase.dev/image-processing-api) for more information on using the extension, including the full list of supported operations you can use.\n\n### Monitoring\n\nAs a best practice, you can [monitor the activity](https://firebase.google.com/docs/extensions/manage-installed-extensions#monitor) of your installed extension, including checks on its health, usage, and logs.\n","extensionRef":"invertase/image-processing-api","extensionVersion":"0.2.1","systemParams":{"firebaseextensions.v1beta.function/minInstances":"0","firebaseextensions.v1beta.function/vpcConnectorEgressSettings":"VPC_CONNECTOR_EGRESS_SETTINGS_UNSPECIFIED"}},"lastOperationName":"projects/website-5a18c/operations/e622a0be-0e1a-44cc-aefe-0a3a8c5bfe4c","serviceAccountEmail":"ext-image-processing-api@website-5a18c.iam.gserviceaccount.com","lastOperationType":"CREATE","etag":"1cfc037ee3e595627a0a1255b18d3e691ad149429459bde03adf427ae0b1aef7"}]}
[debug] [2025-07-16T21:32:24.120Z] Failed to validate key FIREBASE_ADMIN_TYPE: Error: Key FIREBASE_ADMIN_TYPE starts with a reserved prefix (X_GOOGLE_ FIREBASE_ EXT_)
[debug] [2025-07-16T21:32:24.123Z] Failed to validate key FIREBASE_ADMIN_PRIVATE_KEY_ID: Error: Key FIREBASE_ADMIN_PRIVATE_KEY_ID starts with a reserved prefix (X_GOOGLE_ FIREBASE_ EXT_)
[debug] [2025-07-16T21:32:24.123Z] Failed to validate key FIREBASE_ADMIN_PRIVATE_KEY: Error: Key FIREBASE_ADMIN_PRIVATE_KEY starts with a reserved prefix (X_GOOGLE_ FIREBASE_ EXT_)
[debug] [2025-07-16T21:32:24.123Z] Failed to validate key FIREBASE_ADMIN_CLIENT_EMAIL: Error: Key FIREBASE_ADMIN_CLIENT_EMAIL starts with a reserved prefix (X_GOOGLE_ FIREBASE_ EXT_)
[debug] [2025-07-16T21:32:24.123Z] Failed to validate key FIREBASE_ADMIN_CLIENT_ID: Error: Key FIREBASE_ADMIN_CLIENT_ID starts with a reserved prefix (X_GOOGLE_ FIREBASE_ EXT_)
[debug] [2025-07-16T21:32:24.123Z] Failed to validate key FIREBASE_ADMIN_AUTH_URI: Error: Key FIREBASE_ADMIN_AUTH_URI starts with a reserved prefix (X_GOOGLE_ FIREBASE_ EXT_)
[debug] [2025-07-16T21:32:24.124Z] Failed to validate key FIREBASE_ADMIN_TOKEN_URI: Error: Key FIREBASE_ADMIN_TOKEN_URI starts with a reserved prefix (X_GOOGLE_ FIREBASE_ EXT_)
[debug] [2025-07-16T21:32:24.124Z] Failed to validate key FIREBASE_ADMIN_AUTH_PROVIDER_X509_CERT_URL: Error: Key FIREBASE_ADMIN_AUTH_PROVIDER_X509_CERT_URL starts with a reserved prefix (X_GOOGLE_ FIREBASE_ EXT_)
[debug] [2025-07-16T21:32:24.124Z] Failed to validate key FIREBASE_ADMIN_CLIENT_X509_CERT_URL: Error: Key FIREBASE_ADMIN_CLIENT_X509_CERT_URL starts with a reserved prefix (X_GOOGLE_ FIREBASE_ EXT_)
[error] Error: Failed to load environment variables from .env.:
[error] - Error Key FIREBASE_ADMIN_TYPE starts with a reserved prefix (X_GOOGLE_ FIREBASE_ EXT_)
[error] - Error Key FIREBASE_ADMIN_PRIVATE_KEY_ID starts with a reserved prefix (X_GOOGLE_ FIREBASE_ EXT_)
[error] - Error Key FIREBASE_ADMIN_PRIVATE_KEY starts with a reserved prefix (X_GOOGLE_ FIREBASE_ EXT_)
[error] - Error Key FIREBASE_ADMIN_CLIENT_EMAIL starts with a reserved prefix (X_GOOGLE_ FIREBASE_ EXT_)
[error] - Error Key FIREBASE_ADMIN_CLIENT_ID starts with a reserved prefix (X_GOOGLE_ FIREBASE_ EXT_)
[error] - Error Key FIREBASE_ADMIN_AUTH_URI starts with a reserved prefix (X_GOOGLE_ FIREBASE_ EXT_)
[error] - Error Key FIREBASE_ADMIN_TOKEN_URI starts with a reserved prefix (X_GOOGLE_ FIREBASE_ EXT_)
[error] - Error Key FIREBASE_ADMIN_AUTH_PROVIDER_X509_CERT_URL starts with a reserved prefix (X_GOOGLE_ FIREBASE_ EXT_)
[error] - Error Key FIREBASE_ADMIN_CLIENT_X509_CERT_URL starts with a reserved prefix (X_GOOGLE_ FIREBASE_ EXT_)
