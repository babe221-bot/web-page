[debug] [2025-07-16T21:25:34.162Z] ----------------------------------------------------------------------
[debug] [2025-07-16T21:25:34.167Z] Command:       /nix/store/rbdrkcs5kkwpalxcd7c6bnm33lk2955n-nodejs-20.19.0/bin/node /home/user/.global_modules/bin/firebase deploy --only hosting --project=website-5a18c
[debug] [2025-07-16T21:25:34.168Z] CLI Version:   14.10.1
[debug] [2025-07-16T21:25:34.168Z] Platform:      linux
[debug] [2025-07-16T21:25:34.169Z] Node Version:  v20.19.0
[debug] [2025-07-16T21:25:34.169Z] Time:          Wed Jul 16 2025 21:25:34 GMT+0000 (Coordinated Universal Time)
[debug] [2025-07-16T21:25:34.169Z] ----------------------------------------------------------------------
[debug] 
[debug] [2025-07-16T21:25:34.704Z] Object "/hosting" in "firebase.json" has unknown property: {"additionalProperty":"webFrameworks"}
[debug] [2025-07-16T21:25:34.704Z] Field "/hosting" in "firebase.json" is possibly invalid: must be array
[debug] [2025-07-16T21:25:34.705Z] Field "/hosting" in "firebase.json" is possibly invalid: must match a schema in anyOf
[debug] [2025-07-16T21:25:34.710Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2025-07-16T21:25:34.710Z] > authorizing via signed-in user (bakirbehmen@gmail.com)
[debug] [2025-07-16T21:25:34.710Z] [iam] checking project website-5a18c for permissions ["firebase.projects.get","firebasehosting.sites.update"]
[debug] [2025-07-16T21:25:34.712Z] Checked if tokens are valid: true, expires at: 1752703517880
[debug] [2025-07-16T21:25:34.712Z] Checked if tokens are valid: true, expires at: 1752703517880
[debug] [2025-07-16T21:25:34.713Z] >>> [apiv2][query] POST https://cloudresourcemanager.googleapis.com/v1/projects/website-5a18c:testIamPermissions [none]
[debug] [2025-07-16T21:25:34.714Z] >>> [apiv2][(partial)header] POST https://cloudresourcemanager.googleapis.com/v1/projects/website-5a18c:testIamPermissions x-goog-quota-user=projects/website-5a18c
[debug] [2025-07-16T21:25:34.714Z] >>> [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/website-5a18c:testIamPermissions {"permissions":["firebase.projects.get","firebasehosting.sites.update"]}
[debug] [2025-07-16T21:25:35.487Z] <<< [apiv2][status] POST https://cloudresourcemanager.googleapis.com/v1/projects/website-5a18c:testIamPermissions 200
[debug] [2025-07-16T21:25:35.488Z] <<< [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/website-5a18c:testIamPermissions {"permissions":["firebase.projects.get","firebasehosting.sites.update"]}
[debug] [2025-07-16T21:25:35.490Z] Checked if tokens are valid: true, expires at: 1752703517880
[debug] [2025-07-16T21:25:35.490Z] Checked if tokens are valid: true, expires at: 1752703517880
[debug] [2025-07-16T21:25:35.494Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/website-5a18c [none]
[debug] [2025-07-16T21:25:35.725Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/website-5a18c 200
[debug] [2025-07-16T21:25:35.725Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/website-5a18c {"projectId":"website-5a18c","projectNumber":"636702053767","displayName":"website","name":"projects/website-5a18c","resources":{"hostingSite":"website-5a18c"},"state":"ACTIVE","etag":"1_a6122a7f-7df1-4ea8-844b-57f64ef44324"}
[debug] [2025-07-16T21:25:40.462Z] defaultcredentials: writing to file /home/user/.config/firebase/bakirbehmen_gmail_com_application_default_credentials.json
[debug] [2025-07-16T21:25:40.470Z] Checked if tokens are valid: true, expires at: 1752703517880
[debug] [2025-07-16T21:25:40.470Z] Checked if tokens are valid: true, expires at: 1752703517880
[debug] [2025-07-16T21:25:40.477Z] >>> [apiv2][query] GET https://firebasehosting.googleapis.com/v1beta1/projects/website-5a18c/sites pageToken=&pageSize=10
[debug] [2025-07-16T21:25:41.564Z] <<< [apiv2][status] GET https://firebasehosting.googleapis.com/v1beta1/projects/website-5a18c/sites 200
[debug] [2025-07-16T21:25:41.564Z] <<< [apiv2][body] GET https://firebasehosting.googleapis.com/v1beta1/projects/website-5a18c/sites {"sites":[{"name":"projects/website-5a18c/sites/website-5a18c","defaultUrl":"https://website-5a18c.web.app","appId":"1:636702053767:web:0de2259025db8c0bbd6f22","type":"DEFAULT_SITE"}]}
[debug] [2025-07-16T21:25:41.566Z] Checked if tokens are valid: true, expires at: 1752703517880
[debug] [2025-07-16T21:25:41.566Z] Checked if tokens are valid: true, expires at: 1752703517880
[debug] [2025-07-16T21:25:41.566Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/-/webApps/1:636702053767:web:0de2259025db8c0bbd6f22/config [none]
[debug] [2025-07-16T21:25:42.022Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/-/webApps/1:636702053767:web:0de2259025db8c0bbd6f22/config 200
[debug] [2025-07-16T21:25:42.023Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/-/webApps/1:636702053767:web:0de2259025db8c0bbd6f22/config {"projectId":"website-5a18c","appId":"1:636702053767:web:0de2259025db8c0bbd6f22","storageBucket":"website-5a18c.firebasestorage.app","apiKey":"AIzaSyDxwAQf6RX8UHlbjPpnjMVX-0jS85K3bvw","authDomain":"website-5a18c.firebaseapp.com","messagingSenderId":"636702053767","measurementId":"G-WGPRNHDM9Q"}
[info] 
   Thank you for trying our early preview of Next.js support on Firebase Hosting.
   During the preview, support is best-effort and breaking changes can be expected. Proceed with caution.
   The integration is known to work with Next.js version 12 - 15.0. You may encounter errors.

   Documentation: https://firebase.google.com/docs/hosting/frameworks/nextjs
   File a bug: https://github.com/firebase/firebase-tools/issues/new?template=bug_report.md
   Submit a feature request: https://github.com/firebase/firebase-tools/issues/new?template=feature_request.md

   We'd love to learn from you. Express your interest in helping us shape the future of Firebase Hosting: https://goo.gle/41enW5X

[debug] [2025-07-16T21:25:52.421Z] Checked if tokens are valid: true, expires at: 1752703517880
[debug] [2025-07-16T21:25:52.422Z] Checked if tokens are valid: true, expires at: 1752703517880
[debug] [2025-07-16T21:25:52.422Z] >>> [apiv2][query] GET https://firebasehosting.googleapis.com/v1beta1/projects/website-5a18c/sites/website-5a18c [none]
[debug] [2025-07-16T21:25:53.385Z] <<< [apiv2][status] GET https://firebasehosting.googleapis.com/v1beta1/projects/website-5a18c/sites/website-5a18c 200
[debug] [2025-07-16T21:25:53.385Z] <<< [apiv2][body] GET https://firebasehosting.googleapis.com/v1beta1/projects/website-5a18c/sites/website-5a18c {"name":"projects/website-5a18c/sites/website-5a18c","defaultUrl":"https://website-5a18c.web.app","appId":"1:636702053767:web:0de2259025db8c0bbd6f22","type":"DEFAULT_SITE"}
[info]    ▲ Next.js 15.3.3

[info]    - Environments: .env.local, .env


[info]    Creating an optimized production build ...

[info]  ✓ Compiled successfully in 9.0s

[info]    Skipping validation of types
   Skipping linting

[info]    Collecting page data ...

[info]    Generating static pages (0/6) ...

[info]    Generating static pages (1/6) 
   Generating static pages (2/6) 
   Generating static pages (4/6) 
 ✓ Generating static pages (6/6)

[info]    Finalizing page optimization ...
   Collecting build traces ...

[info] 

[info] Route (app)                                 Size  First Load JS
┌ ○ /_not-found                            978 B         102 kB
└ ● /[lng]                               35.8 kB         157 kB
    ├ /sr
    └ /en
+ First Load JS shared by all             101 kB
  ├ chunks/4bd1b696-4419cc93057fcf32.js  53.2 kB
  ├ chunks/684-7002d2f60d48787d.js         46 kB
  └ other shared chunks (total)          2.03 kB


ƒ Middleware                             32.3 kB


[info] ○  (Static)  prerendered as static content
●  (SSG)     prerendered as static HTML (uses generateStaticParams)


[info] Building a Cloud Function to run this application. This is needed due to:
[info]  • middleware
[info]  • use of fallback /[lng]
[info] 
[debug] [2025-07-16T21:26:53.673Z] skipping /en due to it matching an unsupported rewrite/redirect/header or middlware
[debug] [2025-07-16T21:26:53.675Z] skipping /sr due to it matching an unsupported rewrite/redirect/header or middlware
[debug] [2025-07-16T21:26:53.675Z] skipping /404 due to it matching an unsupported rewrite/redirect/header or middlware
[debug] [2025-07-16T21:26:53.732Z] Checked if tokens are valid: true, expires at: 1752703517880
[debug] [2025-07-16T21:26:53.734Z] Checked if tokens are valid: true, expires at: 1752703517880
[debug] [2025-07-16T21:26:53.735Z] >>> [apiv2][query] GET https://firebasehosting.googleapis.com/v1beta1/projects/website-5a18c/sites/website-5a18c [none]
[debug] [2025-07-16T21:26:54.738Z] <<< [apiv2][status] GET https://firebasehosting.googleapis.com/v1beta1/projects/website-5a18c/sites/website-5a18c 200
[debug] [2025-07-16T21:26:54.739Z] <<< [apiv2][body] GET https://firebasehosting.googleapis.com/v1beta1/projects/website-5a18c/sites/website-5a18c {"name":"projects/website-5a18c/sites/website-5a18c","defaultUrl":"https://website-5a18c.web.app","appId":"1:636702053767:web:0de2259025db8c0bbd6f22","type":"DEFAULT_SITE"}
[debug] [2025-07-16T21:27:14.715Z] [web frameworks] effective firebase.json:  {
  "hosting": [
    {
      "source": ".",
      "ignore": [
        "firebase.json",
        "**/.*",
        "**/node_modules/**"
      ],
      "rewrites": [
        {
          "source": "**",
          "function": {
            "functionId": "_next"
          }
        },
        {
          "source": "/**",
          "function": {
            "functionId": "ssrwebsite5a18c",
            "region": "us-central1",
            "pinTag": true
          }
        }
      ],
      "webFrameworks": {
        "region": "europe-west1"
      },
      "site": "website-5a18c",
      "redirects": [],
      "headers": [
        {
          "source": "/_not-found",
          "headers": [
            {
              "key": "x-nextjs-stale-time",
              "value": "300"
            },
            {
              "key": "x-nextjs-prerender",
              "value": "1"
            },
            {
              "key": "x-next-cache-tags",
              "value": "_N_T_/layout,_N_T_/_not-found/layout,_N_T_/_not-found/page,_N_T_/_not-found"
            }
          ]
        },
        {
          "source": "/favicon.ico",
          "headers": [
            {
              "key": "cache-control",
              "value": "public, max-age=0, must-revalidate"
            },
            {
              "key": "content-type",
              "value": "image/x-icon"
            },
            {
              "key": "x-next-cache-tags",
              "value": "_N_T_/layout,_N_T_/favicon.ico/layout,_N_T_/favicon.ico/route,_N_T_/favicon.ico"
            }
          ]
        },
        {
          "source": "/**/*.[jt]s",
          "headers": [
            {
              "key": "Set-Cookie",
              "value": "__FIREBASE_DEFAULTS__=eyJjb25maWciOnsicHJvamVjdElkIjoid2Vic2l0ZS01YTE4YyIsImFwcElkIjoiMTo2MzY3MDIwNTM3Njc6d2ViOjBkZTIyNTkwMjVkYjhjMGJiZDZmMjIiLCJzdG9yYWdlQnVja2V0Ijoid2Vic2l0ZS01YTE4Yy5maXJlYmFzZXN0b3JhZ2UuYXBwIiwiYXBpS2V5IjoiQUl6YVN5RHh3QVFmNlJYOFVIbGJqUHBuak1WWC0walM4NUszYnZ3IiwiYXV0aERvbWFpbiI6IndlYnNpdGUtNWExOGMuZmlyZWJhc2VhcHAuY29tIiwibWVzc2FnaW5nU2VuZGVySWQiOiI2MzY3MDIwNTM3NjciLCJtZWFzdXJlbWVudElkIjoiRy1XR1BSTkhETTlRIn0sIl9hdXRoVG9rZW5TeW5jVVJMIjoiL19fc2Vzc2lvbiJ9; SameSite=Strict; Expires=2027-06-11T08:07:14.715Z; Path=/;"
            }
          ]
        }
      ],
      "cleanUrls": true,
      "trailingSlash": false,
      "public": ".firebase/website-5a18c/hosting",
      "webFramework": "next_ssr"
    }
  ],
  "functions": [
    {
      "source": ".firebase/website-5a18c/functions",
      "codebase": "firebase-frameworks-website-5a18c"
    }
  ]
}
[debug] [2025-07-16T21:27:14.716Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2025-07-16T21:27:14.716Z] > authorizing via signed-in user (bakirbehmen@gmail.com)
[debug] [2025-07-16T21:27:14.717Z] [iam] checking project website-5a18c for permissions ["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]
[debug] [2025-07-16T21:27:14.723Z] Checked if tokens are valid: true, expires at: 1752703517880
[debug] [2025-07-16T21:27:14.723Z] Checked if tokens are valid: true, expires at: 1752703517880
[debug] [2025-07-16T21:27:14.723Z] >>> [apiv2][query] POST https://cloudresourcemanager.googleapis.com/v1/projects/website-5a18c:testIamPermissions [none]
[debug] [2025-07-16T21:27:14.723Z] >>> [apiv2][(partial)header] POST https://cloudresourcemanager.googleapis.com/v1/projects/website-5a18c:testIamPermissions x-goog-quota-user=projects/website-5a18c
[debug] [2025-07-16T21:27:14.723Z] >>> [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/website-5a18c:testIamPermissions {"permissions":["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]}
[debug] [2025-07-16T21:27:15.420Z] <<< [apiv2][status] POST https://cloudresourcemanager.googleapis.com/v1/projects/website-5a18c:testIamPermissions 200
[debug] [2025-07-16T21:27:15.421Z] <<< [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/website-5a18c:testIamPermissions {"permissions":["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]}
[debug] [2025-07-16T21:27:15.427Z] Checked if tokens are valid: true, expires at: 1752703517880
[debug] [2025-07-16T21:27:15.427Z] Checked if tokens are valid: true, expires at: 1752703517880
[debug] [2025-07-16T21:27:15.428Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v1/projects/website-5a18c/locations/-/functions [none]
[debug] [2025-07-16T21:27:16.009Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v1/projects/website-5a18c/locations/-/functions 200
[debug] [2025-07-16T21:27:16.011Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v1/projects/website-5a18c/locations/-/functions {"functions":[{"name":"projects/website-5a18c/locations/europe-west3/functions/ext-image-processing-api-handler","description":"Serves a API accepting incoming HTTP requests.","sourceArchiveUrl":"gs://firebase-mod-sources-prod/2137a7fadcc867f26a3d8015133f2ab19c2f60dd35bd2ec8facf4e1f04e61232","httpsTrigger":{"url":"https://europe-west3-website-5a18c.cloudfunctions.net/ext-image-processing-api-handler","securityLevel":"SECURE_OPTIONAL"},"status":"ACTIVE","entryPoint":"handler","timeout":"60s","availableMemoryMb":1024,"serviceAccountEmail":"ext-image-processing-api@website-5a18c.iam.gserviceaccount.com","updateTime":"2025-07-14T04:37:55.941Z","versionId":"2","labels":{"goog-firebase-ext-iid":"image-processing-api","firebase-extensions-ar":"enabled","goog-dm":"firebase-ext-image-processing-api","goog-firebase-ext":"image-processing-api","deployment-tool":"firebase-extensions"},"environmentVariables":{"CLOUD_STORAGE_BUCKET":"website-5a18c.firebasestorage.app","CORS_ORIGIN_ALLOW_LIST":"*","DATABASE_INSTANCE":"","DATABASE_URL":"","EXT_INSTANCE_ID":"image-processing-api","FIREBASE_CONFIG":"{\"projectId\":\"website-5a18c\",\"databaseURL\":\"\",\"storageBucket\":\"website-5a18c.firebasestorage.app\"}","GCLOUD_PROJECT":"website-5a18c","LOCATION":"europe-west3","PROJECT_ID":"website-5a18c","STORAGE_BUCKET":"website-5a18c.firebasestorage.app"},"runtime":"nodejs20","ingressSettings":"ALLOW_ALL","buildId":"f18bca3c-f1f5-4477-90f4-e5e6e741ebbc","buildEnvironmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"buildName":"projects/636702053767/locations/europe-west3/builds/f18bca3c-f1f5-4477-90f4-e5e6e741ebbc","dockerRegistry":"ARTIFACT_REGISTRY","automaticUpdatePolicy":{},"buildServiceAccount":"projects/website-5a18c/serviceAccounts/636702053767-compute@developer.gserviceaccount.com","satisfiesPzs":true,"satisfiesPzi":true}]}
[debug] [2025-07-16T21:27:16.025Z] Checked if tokens are valid: true, expires at: 1752703517880
[debug] [2025-07-16T21:27:16.025Z] Checked if tokens are valid: true, expires at: 1752703517880
[debug] [2025-07-16T21:27:16.026Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/website-5a18c/locations/-/functions filter=environment%3D%22GEN_2%22
[debug] [2025-07-16T21:27:17.011Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/website-5a18c/locations/-/functions 200
[debug] [2025-07-16T21:27:17.014Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/website-5a18c/locations/-/functions {"functions":[{"name":"projects/website-5a18c/locations/us-central1/functions/ssrwebsite5a18c","buildConfig":{"build":"projects/636702053767/locations/us-central1/builds/d8dc5e1a-ecb9-4b6c-afee-a6e3c624b3a3","runtime":"nodejs20","entryPoint":"ssrwebsite5a18c","source":{"storageSource":{"bucket":"gcf-v2-sources-636702053767-us-central1","object":"ssrwebsite5a18c/function-source.zip","generation":"1752466812219058"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/website-5a18c/locations/us-central1/repositories/gcf-artifacts","sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-636702053767-us-central1","object":"ssrwebsite5a18c/function-source.zip","generation":"1752466812219058"}},"dockerRegistry":"ARTIFACT_REGISTRY","serviceAccount":"projects/website-5a18c/serviceAccounts/636702053767-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/website-5a18c/locations/us-central1/services/ssrwebsite5a18c","timeoutSeconds":60,"environmentVariables":{"GEMINI_API_KEY":"","NEXT_PUBLIC_FIREBASE_API_KEY":"AIzaSyDxwAQf6RX8UHlbjPpnjMVX-0jS85K3bvw","NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN":"website-5a18c.firebaseapp.com","NEXT_PUBLIC_FIREBASE_PROJECT_ID":"website-5a18c","NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET":"website-5a18c.appspot.com","NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID":"636702053767","NEXT_PUBLIC_FIREBASE_APP_ID":"1:636702053767:web:0de2259025db8c0bbd6f22","NEXT_PUBLIC_FIREBASE_MEASUREMENT_ID":"G-WGPRNHDM9Q","VERCEL_URL":"website-5a18c.web.app","__FIREBASE_FRAMEWORKS_ENTRY__":"next.js","__FIREBASE_DEFAULTS__":"{\"config\":{\"projectId\":\"website-5a18c\",\"appId\":\"1:636702053767:web:0de2259025db8c0bbd6f22\",\"storageBucket\":\"website-5a18c.firebasestorage.app\",\"apiKey\":\"AIzaSyDxwAQf6RX8UHlbjPpnjMVX-0jS85K3bvw\",\"authDomain\":\"website-5a18c.firebaseapp.com\",\"messagingSenderId\":\"636702053767\",\"measurementId\":\"G-WGPRNHDM9Q\"},\"_authTokenSyncURL\":\"/__session\"}","FIREBASE_CONFIG":"{\"projectId\":\"website-5a18c\",\"storageBucket\":\"website-5a18c.firebasestorage.app\"}","GCLOUD_PROJECT":"website-5a18c","EVENTARC_CLOUD_EVENT_SOURCE":"projects/website-5a18c/locations/us-central1/services/ssrwebsite5a18c","FUNCTION_TARGET":"ssrwebsite5a18c","LOG_EXECUTION_ID":"true"},"maxInstanceCount":20,"ingressSettings":"ALLOW_ALL","uri":"https://ssrwebsite5a18c-hr7gf53sqq-uc.a.run.app","serviceAccountEmail":"636702053767-compute@developer.gserviceaccount.com","availableMemory":"256Mi","allTrafficOnLatestRevision":true,"revision":"ssrwebsite5a18c-00001-rey","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"state":"ACTIVE","updateTime":"2025-07-14T04:22:57.557138708Z","labels":{"deployment-tool":"cli-firebase--project-idx","firebase-functions-codebase":"firebase-frameworks-website-5a18c","firebase-functions-hash":"d1a9c72cc15bd8e5dc8545c81251e01b59363f8d"},"environment":"GEN_2","url":"https://us-central1-website-5a18c.cloudfunctions.net/ssrwebsite5a18c","createTime":"2025-07-14T04:20:12.455639447Z","satisfiesPzi":true}]}
[info] i  hosting: The following function(s) are pinned to site website-5a18c and will be deployed as well: ssrwebsite5a18c 
[info] 
[info] === Deploying to 'website-5a18c'...
[info] 
[info] i  deploying functions, hosting 
[debug] [2025-07-16T21:27:17.035Z] Checked if tokens are valid: true, expires at: 1752703517880
[debug] [2025-07-16T21:27:17.035Z] Checked if tokens are valid: true, expires at: 1752703517880
[debug] [2025-07-16T21:27:17.035Z] >>> [apiv2][query] GET https://cloudresourcemanager.googleapis.com/v1/projects/website-5a18c [none]
[debug] [2025-07-16T21:27:17.235Z] <<< [apiv2][status] GET https://cloudresourcemanager.googleapis.com/v1/projects/website-5a18c 200
[debug] [2025-07-16T21:27:17.241Z] <<< [apiv2][body] GET https://cloudresourcemanager.googleapis.com/v1/projects/website-5a18c {"projectNumber":"636702053767","projectId":"website-5a18c","lifecycleState":"ACTIVE","name":"website","labels":{"firebase":"enabled","firebase-core":"disabled","generative-language":"enabled"},"createTime":"2025-07-11T21:11:24.875257Z"}
[info] i  functions: preparing codebase firebase-frameworks-website-5a18c for deployment 
[info] i  functions: ensuring required API cloudfunctions.googleapis.com is enabled... 
[info] i  functions: ensuring required API cloudbuild.googleapis.com is enabled... 
[info] i  artifactregistry: ensuring required API artifactregistry.googleapis.com is enabled... 
[debug] [2025-07-16T21:27:17.255Z] Checked if tokens are valid: true, expires at: 1752703517880
[debug] [2025-07-16T21:27:17.256Z] Checked if tokens are valid: true, expires at: 1752703517880
[debug] [2025-07-16T21:27:17.256Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/website-5a18c/adminSdkConfig [none]
[debug] [2025-07-16T21:27:17.571Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/website-5a18c/adminSdkConfig 200
[debug] [2025-07-16T21:27:17.575Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/website-5a18c/adminSdkConfig {"projectId":"website-5a18c","storageBucket":"website-5a18c.firebasestorage.app"}
[debug] [2025-07-16T21:27:17.575Z] Checked if tokens are valid: true, expires at: 1752703517880
[debug] [2025-07-16T21:27:17.576Z] Checked if tokens are valid: true, expires at: 1752703517880
[debug] [2025-07-16T21:27:17.584Z] >>> [apiv2][query] GET https://runtimeconfig.googleapis.com/v1beta1/projects/website-5a18c/configs [none]
[debug] [2025-07-16T21:27:17.797Z] <<< [apiv2][status] GET https://runtimeconfig.googleapis.com/v1beta1/projects/website-5a18c/configs 200
[debug] [2025-07-16T21:27:17.802Z] <<< [apiv2][body] GET https://runtimeconfig.googleapis.com/v1beta1/projects/website-5a18c/configs {}
[debug] [2025-07-16T21:27:17.815Z] Validating nodejs source
[debug] [2025-07-16T21:27:18.963Z] > [functions] package.json contents: {
  "name": "nextn",
  "version": "0.1.0",
  "private": true,
  "dependencies": {
    "@genkit-ai/googleai": "^1.13.0",
    "@hookform/resolvers": "^4.1.3",
    "@radix-ui/react-accordion": "^1.2.3",
    "@radix-ui/react-alert-dialog": "^1.1.6",
    "@radix-ui/react-avatar": "^1.1.3",
    "@radix-ui/react-checkbox": "^1.1.4",
    "@radix-ui/react-collapsible": "^1.1.11",
    "@radix-ui/react-dialog": "^1.1.6",
    "@radix-ui/react-dropdown-menu": "^2.1.6",
    "@radix-ui/react-label": "^2.1.2",
    "@radix-ui/react-menubar": "^1.1.6",
    "@radix-ui/react-popover": "^1.1.6",
    "@radix-ui/react-progress": "^1.1.2",
    "@radix-ui/react-radio-group": "^1.2.3",
    "@radix-ui/react-scroll-area": "^1.2.3",
    "@radix-ui/react-select": "^2.1.6",
    "@radix-ui/react-separator": "^1.1.2",
    "@radix-ui/react-slider": "^1.2.3",
    "@radix-ui/react-slot": "^1.2.3",
    "@radix-ui/react-switch": "^1.1.3",
    "@radix-ui/react-tabs": "^1.1.3",
    "@radix-ui/react-toast": "^1.2.6",
    "@radix-ui/react-tooltip": "^1.1.8",
    "class-variance-authority": "^0.7.1",
    "clsx": "^2.1.1",
    "date-fns": "^3.6.0",
    "dotenv": "^16.5.0",
    "embla-carousel-react": "^8.6.0",
    "firebase": "^11.10.0",
    "firebase-admin": "^13.4.0",
    "genkit": "^1.13.0",
    "i18next": "^25.3.2",
    "i18next-browser-languagedetector": "^8.2.0",
    "i18next-resources-to-backend": "^1.2.1",
    "lucide-react": "^0.475.0",
    "next": "15.3.3",
    "react": "^18.3.1",
    "react-cookie": "^8.0.1",
    "react-day-picker": "^8.10.1",
    "react-dom": "^18.3.1",
    "react-hook-form": "^7.54.2",
    "react-i18next": "^15.6.0",
    "recharts": "^2.15.1",
    "tailwind-merge": "^3.0.1",
    "tailwindcss-animate": "^1.0.7",
    "zod": "^3.24.2",
    "firebase-frameworks": "^0.11.0",
    "firebase-functions": "^6.0.1"
  },
  "main": "server.js",
  "engines": {
    "node": "20"
  }
}
[debug] [2025-07-16T21:27:18.964Z] Building nodejs source
[info] i  functions: Loading and analyzing source code for codebase firebase-frameworks-website-5a18c to determine what to deploy 
[debug] [2025-07-16T21:27:18.971Z] Could not find functions.yaml. Must use http discovery
[debug] [2025-07-16T21:27:18.991Z] Found firebase-functions binary at '/home/user/studio/.firebase/website-5a18c/functions/node_modules/.bin/firebase-functions'
[info] Serving at port 8320

[debug] [2025-07-16T21:27:24.226Z] Got response from /__/functions.yaml {"endpoints":{"ssrwebsite5a18c":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"httpsTrigger":{},"entryPoint":"ssrwebsite5a18c"}},"specVersion":"v1alpha1","requiredAPIs":[],"extensions":{}}
[info] i  extensions: ensuring required API firebaseextensions.googleapis.com is enabled... 
[debug] [2025-07-16T21:27:28.405Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2025-07-16T21:27:28.408Z] > authorizing via signed-in user (bakirbehmen@gmail.com)
[debug] [2025-07-16T21:27:28.409Z] [iam] checking project website-5a18c for permissions ["firebase.projects.get","firebaseextensions.instances.list"]
[debug] [2025-07-16T21:27:28.409Z] Checked if tokens are valid: true, expires at: 1752703517880
[debug] [2025-07-16T21:27:28.409Z] Checked if tokens are valid: true, expires at: 1752703517880
[debug] [2025-07-16T21:27:28.409Z] >>> [apiv2][query] POST https://cloudresourcemanager.googleapis.com/v1/projects/website-5a18c:testIamPermissions [none]
[debug] [2025-07-16T21:27:28.409Z] >>> [apiv2][(partial)header] POST https://cloudresourcemanager.googleapis.com/v1/projects/website-5a18c:testIamPermissions x-goog-quota-user=projects/website-5a18c
[debug] [2025-07-16T21:27:28.409Z] >>> [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/website-5a18c:testIamPermissions {"permissions":["firebase.projects.get","firebaseextensions.instances.list"]}
[debug] [2025-07-16T21:27:29.114Z] <<< [apiv2][status] POST https://cloudresourcemanager.googleapis.com/v1/projects/website-5a18c:testIamPermissions 200
[debug] [2025-07-16T21:27:29.117Z] <<< [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/website-5a18c:testIamPermissions {"permissions":["firebase.projects.get","firebaseextensions.instances.list"]}
[debug] [2025-07-16T21:27:29.124Z] Checked if tokens are valid: true, expires at: 1752703517880
[debug] [2025-07-16T21:27:29.124Z] Checked if tokens are valid: true, expires at: 1752703517880
[debug] [2025-07-16T21:27:29.124Z] >>> [apiv2][query] GET https://firebaseextensions.googleapis.com/v1beta/projects/website-5a18c/instances pageSize=100&pageToken=
[debug] [2025-07-16T21:27:29.942Z] <<< [apiv2][status] GET https://firebaseextensions.googleapis.com/v1beta/projects/website-5a18c/instances 200
[debug] [2025-07-16T21:27:29.942Z] <<< [apiv2][body] GET https://firebaseextensions.googleapis.com/v1beta/projects/website-5a18c/instances {"instances":[{"name":"projects/website-5a18c/instances/image-processing-api","createTime":"2025-07-14T04:33:14.381422Z","updateTime":"2025-07-14T04:38:24.129382Z","state":"ACTIVE","config":{"name":"projects/website-5a18c/instances/image-processing-api/configurations/1ecf0e78-380c-4b30-bf6f-36ead48313e2","createTime":"2025-07-14T04:33:14.381422Z","source":{"name":"projects/invertase-firebase-extensions/sources/8e80a7ef-0036-42b3-b829-9fab843715dd","packageUri":"https://storage.googleapis.com/firebase-extensions-packages-prod/invertase-image-processing-api-0.2.1-6ccff87e-84ec-40c2-a78c-bbfb629b2dd5.zip","hash":"5034d7302af64a6e98d4e82f6529aab512b58ec36c69e5cb6656914e7d1be27c","extensionRoot":"/","spec":{"specVersion":"v1beta","name":"image-processing-api","version":"0.2.1","description":"Use this extension to optimize and transform images via a powerful HTTP API with over 30 different image operations to enhance and manipulate your images.","apis":[{"apiName":"storage-component.googleapis.com","reason":"Needed to use Cloud Storage"}],"roles":[{"role":"storage.admin","reason":"Allows the extension to read images in Cloud Storage"}],"resources":[{"name":"handler","type":"firebaseextensions.v1beta.function","propertiesYaml":"availableMemoryMb: 1024\nhttpsTrigger: {}\nlocation: ${param:LOCATION}\nruntime: nodejs20\n","description":"Serves a API accepting incoming HTTP requests.","deletionPolicy":"DELETE"}],"billingRequired":true,"author":{"authorName":"Invertase","url":"https://invertase.io"},"contributors":[{"authorName":"Invertase","email":"oss@invertase.io","url":"https://github.com/invertase"}],"license":"Apache-2.0","releaseNotesUrl":"https://github.com/invertase/firebase-extensions/tree/main/extensions/image-processing-api/CHANGELOG.md","sourceUrl":"https://github.com/invertase/firebase-extensions/tree/main/extensions/image-processing-api","params":[{"param":"LOCATION","label":"Cloud Functions location","type":"SELECT","description":"Where do you want to deploy the functions created for this extension? You usually want a location close to your Storage bucket. For help selecting a location, refer to the [location selection guide](https://firebase.google.com/docs/functions/locations).","required":true,"options":[{"value":"us-central1","label":"Iowa (us-central1)"},{"value":"us-east1","label":"South Carolina (us-east1)"},{"value":"us-east4","label":"Northern Virginia (us-east4)"},{"value":"us-west2","label":"Los Angeles (us-west2)"},{"value":"us-west3","label":"Salt Lake City (us-west3)"},{"value":"us-west4","label":"Las Vegas (us-west4)"},{"value":"europe-central2","label":"Warsaw (europe-central2)"},{"value":"europe-west1","label":"Belgium (europe-west1)"},{"value":"europe-west2","label":"London (europe-west2)"},{"value":"europe-west3","label":"Frankfurt (europe-west3)"},{"value":"europe-west6","label":"Zurich (europe-west6)"},{"value":"asia-east2","label":"Hong Kong (asia-east2)"},{"value":"asia-northeast1","label":"Tokyo (asia-northeast1)"},{"value":"asia-northeast2","label":"Osaka (asia-northeast2)"},{"value":"asia-northeast3","label":"Seoul (asia-northeast3)"},{"value":"asia-south1","label":"Mumbai (asia-south1)"},{"value":"asia-southeast2","label":"Jakarta (asia-southeast2)"},{"value":"northamerica-northeast1","label":"Montreal (northamerica-northeast1)"},{"value":"southamerica-east1","label":"Sao Paulo (southamerica-east1)"},{"value":"australia-southeast1","label":"Sydney (australia-southeast1)"}],"default":"us-central1","immutable":true},{"param":"CLOUD_STORAGE_BUCKET","label":"Cloud Storage bucket for images","type":"STRING","description":"The Cloud Storage bucket where images that are to be processed are located. API requests with input urls or paths that are not inside this bucket will be dropped.\n","required":true,"default":"${STORAGE_BUCKET}","example":"my-project-12345.appspot.com","validationRegex":"^([0-9a-z_.-]*)$","validationErrorMessage":"Invalid storage bucket"},{"param":"CORS_ORIGIN_ALLOW_LIST","label":"Allowed CORS origins","type":"STRING","description":"A comma delimited value of allowed CORS origins. Use the default of '*' to allow all origins. This is useful to lockdown your API and only allow your own website to embed the images directly. Note this will not prevent non-browser requests from accessing your API.\n","required":true,"default":"*","example":"*.example.com,invertase.io"},{"param":"HOSTNAME","label":"Hostname","type":"STRING","description":"An optional hostname to fetch images from. This can used to construct the original image URL in the response. Include ONLY the hostname, without any protocol or path. The protocol https:// will be added automatically. This parameter is needed if you would like to query using local path names such as /my/image.jpg. instead of the full URL.\n","example":"example.com"}],"preinstallContent":"# Image Processing Extension\n\nUse this extension to optimize and transform images via a powerful HTTP API with over 30 image operations for enhancing and manipulating your images.\n\n## How It Works\n\nWhen you install this extension, it deploys a Cloud Function that exposes an HTTP API. All requests must be sent to the /process endpoint of the function. You perform image operations by passing an operations query parameter—a URL-encoded JSON string defining the operations to execute.\n\n### Example\n\nDefine your operations like so:\n\n```js\nconst operations = [\n  {\n    operation: 'input',\n    type: 'url',\n    url: 'https://example.com/image.jpg',\n  },\n  {\n    operation: 'grayscale',\n  },\n  {\n    operation: 'output',\n    format: 'webp',\n  },\n];\n\nconst params = `?operations=${encodeURIComponent(JSON.stringify(operations))}`;\n```\n\nThen, make your GET request to your Cloud Function using the correct endpoint. For example:\n\n```\nhttps://<your-configured-region>-<your-project-id>.cloudfunctions.net/<extension-instance-id>/process${params}\n```\n\nThe extension also comes with a JavaScript utility library for simplifying the creation of operations:\n\n```ts\nimport { builder } from '@invertase/image-processing-api';\n\nconst output = builder()\n  .input({\n    url: 'https://example.com/image.jpg',\n  })\n  .grayscale()\n  .output({\n    format: 'webp',\n  });\n\nconst params = `?operations=${output.toEncodedJSONString()}`;\n```\n\nView the [official documentation](https://extensions.invertase.dev/image-processing-api) for full usage examples.\n\n### Relative paths\n\nThe extension provides a hostname parameter, allowing you to query the function with local paths (starting with `/`).\n\nAs an example, if we set the hostname parameter to \"example.com\" then the following operation:\n\n```js\nconst operations = [\n  {\n    operation: 'input',\n    type: 'url',\n    url: '/image.jpg',\n  },\n  {\n    operation: 'grayscale',\n  },\n  {\n    operation: 'output',\n    format: 'webp',\n  },\n];\n```\n\nis equivalent to the earlier given example. The url `https://example.com/image.jpg` is constructed within the extension.\n\nNote that this will **only** apply to paths that begin with a forward slash `/`, and **only** when the hostname parameter is set.\n\n#### Additional setup\n\nBefore installing this extension, make sure that you've [set up a Cloud Storage bucket](https://firebase.google.com/docs/storage) in your Firebase project.\n\n#### Billing\n\nTo install an extension, your project must be on the [Blaze (pay as you go) plan](https://firebase.google.com/pricing)\n\n- You will be charged a small amount (typically around $0.01/month) for the Firebase resources required by this extension (even if it is not used).\n- This extension uses other Firebase and Google Cloud Platform services, which have associated charges if you exceed the service’s no-cost tier:\n  - Cloud Storage\n  - Cloud Functions (Node.js 10+ runtime. [See FAQs](https://firebase.google.com/support/faq#extensions-pricing))\n","postinstallContent":"### See it in action\n\nYou can test out this extension right away!\n\n1. Create an operations list, for example:\n\n```js\nconst operations = [\n  {\n    operation: 'input',\n    type: 'url',\n    url: 'https://images.unsplash.com/photo-1663659552548-25d7771802c9?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=774&q=80',\n  },\n  {\n    operation: 'grayscale',\n  },\n  {\n    operation: 'output',\n    format: 'webp',\n  },\n];\n```\n\n2. Stringify and encode the list:\n\n```js\nencodeURIComponent(JSON.stringify(operations));\n```\n\n3. Call the deployed `process` Cloud Function:\n\n[https://${param:LOCATION}-${param:PROJECT_ID}.cloudfunctions.net/ext-${param:EXT_INSTANCE_ID}-handler/process?operations=%5B%7B%22operation%22%3A%22input%22%2C%22type%22%3A%22url%22%2C%22url%22%3A%22https%3A%2F%2Fimages.unsplash.com%2Fphoto-1663659552548-25d7771802c9%3Fixlib%3Drb-1.2.1%26ixid%3DMnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8%26auto%3Dformat%26fit%3Dcrop%26w%3D774%26q%3D80%22%7D%2C%7B%22operation%22%3A%22grayscale%22%7D%2C%7B%22operation%22%3A%22output%22%2C%22format%22%3A%22webp%22%7D%5D](https://${param:LOCATION}-${param:PROJECT_ID}.cloudfunctions.net/ext-${param:EXT_INSTANCE_ID}-handler/process?operations=%5B%7B%22operation%22%3A%22input%22%2C%22type%22%3A%22url%22%2C%22url%22%3A%22https%3A%2F%2Fimages.unsplash.com%2Fphoto-1663659552548-25d7771802c9%3Fixlib%3Drb-1.2.1%26ixid%3DMnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8%26auto%3Dformat%26fit%3Dcrop%26w%3D774%26q%3D80%22%7D%2C%7B%22operation%22%3A%22grayscale%22%7D%2C%7B%22operation%22%3A%22output%22%2C%22format%22%3A%22webp%22%7D%5D)\n\nThe result will be a grayscaled version of the image, in WebP format.\n\n### Using the extension\n\nSee the [official documentation](https://extensions.invertase.dev/image-processing-api) for more information on using the extension, including the full list of supported operations you can use.\n\n### Monitoring\n\nAs a best practice, you can [monitor the activity](https://firebase.google.com/docs/extensions/manage-installed-extensions#monitor) of your installed extension, including checks on its health, usage, and logs.\n","readmeContent":"# Image Processing API\n\n**Author**: Invertase (**[https://invertase.io](https://invertase.io)**)\n\n**Description**: Use this extension to optimize and transform images via a powerful HTTP API with over 30 different image operations to enhance and manipulate your images.\n\n**Details**: # Image Processing Extension\nUse this extension to optimize and transform images via a powerful HTTP API with over 30 image operations for enhancing and manipulating your images.\n\n## How It Works\n\nWhen you install this extension, it deploys a Cloud Function that exposes an HTTP API. All requests must be sent to the /process endpoint of the function. You perform image operations by passing an operations query parameter—a URL-encoded JSON string defining the operations to execute.\n\n### Example\n\nDefine your operations like so:\n\n```js\nconst operations = [\n  {\n    operation: 'input',\n    type: 'url',\n    url: 'https://example.com/image.jpg',\n  },\n  {\n    operation: 'grayscale',\n  },\n  {\n    operation: 'output',\n    format: 'webp',\n  },\n];\n\nconst params = `?operations=${encodeURIComponent(JSON.stringify(operations))}`;\n```\n\nThen, make your GET request to your Cloud Function using the correct endpoint. For example:\n\n```\nhttps://<your-configured-region>-<your-project-id>.cloudfunctions.net/<extension-instance-id>/process${params}\n```\n\nThe extension also comes with a JavaScript utility library for simplifying the creation of operations:\n\n```ts\nimport { builder } from '@invertase/image-processing-api';\n\nconst output = builder()\n  .input({\n    url: 'https://example.com/image.jpg',\n  })\n  .grayscale()\n  .output({\n    format: 'webp',\n  });\n\nconst params = `?operations=${output.toEncodedJSONString()}`;\n```\n\nView the [official documentation](https://extensions.invertase.dev/image-processing-api) for full usage examples.\n\n### Relative paths\n\nThe extension provides a hostname parameter, allowing you to query the function with local paths (starting with `/`).\n\nAs an example, if we set the hostname parameter to \"example.com\" then the following operation:\n\n```js\nconst operations = [\n  {\n    operation: 'input',\n    type: 'url',\n    url: '/image.jpg',\n  },\n  {\n    operation: 'grayscale',\n  },\n  {\n    operation: 'output',\n    format: 'webp',\n  },\n];\n```\n\nis equivalent to the earlier given example. The url `https://example.com/image.jpg` is constructed within the extension.\n\nNote that this will **only** apply to paths that begin with a forward slash `/`, and **only** when the hostname parameter is set.\n\n#### Additional setup\n\nBefore installing this extension, make sure that you've [set up a Cloud Storage bucket](https://firebase.google.com/docs/storage) in your Firebase project.\n\n#### Billing\n\nTo install an extension, your project must be on the [Blaze (pay as you go) plan](https://firebase.google.com/pricing)\n\n- You will be charged a small amount (typically around $0.01/month) for the Firebase resources required by this extension (even if it is not used).\n- This extension uses other Firebase and Google Cloud Platform services, which have associated charges if you exceed the service’s no-cost tier:\n  - Cloud Storage\n  - Cloud Functions (Node.js 10+ runtime. [See FAQs](https://firebase.google.com/support/faq#extensions-pricing))\n\n**Configuration Parameters:**\n\n- Cloud Functions location: Where do you want to deploy the functions created for this extension? You usually want a location close to your Storage bucket. For help selecting a location, refer to the [location selection guide](https://firebase.google.com/docs/functions/locations).\n\n- Cloud Storage bucket for images: The Cloud Storage bucket where images that are to be processed are located. API requests with input urls or paths that are not inside this bucket will be dropped.\n\n- Allowed CORS origins: A comma delimited value of allowed CORS origins. Use the default of '\\*' to allow all origins. This is useful to lockdown your API and only allow your own website to embed the images directly. Note this will not prevent non-browser requests from accessing your API.\n\n- Hostname: An optional hostname to fetch images from. This can used to construct the original image URL in the response. Include ONLY the hostname, without any protocol or path. The protocol https:// will be added automatically. This parameter is needed if you would like to query using local path names such as /my/image.jpg. instead of the full URL.\n\n**Cloud Functions:**\n\n- **handler:** Serves a API accepting incoming HTTP requests.\n\n**APIs Used**:\n\n- storage-component.googleapis.com (Reason: Needed to use Cloud Storage)\n\n**Access Required**:\n\nThis extension will operate with the following project IAM roles:\n\n- storage.admin (Reason: Allows the extension to read images in Cloud Storage)\n","displayName":"Image Processing API"},"fetchTime":"2025-04-03T16:10:15.973372Z","lastOperationName":"projects/invertase-firebase-extensions/operations/443dc71d-01a6-4640-a13c-51448d5c4de1","state":"ACTIVE"},"params":{"CORS_ORIGIN_ALLOW_LIST":"*","LOCATION":"europe-west3","CLOUD_STORAGE_BUCKET":"website-5a18c.firebasestorage.app"},"populatedPostinstallContent":"### See it in action\n\nYou can test out this extension right away!\n\n1. Create an operations list, for example:\n\n```js\nconst operations = [\n  {\n    operation: 'input',\n    type: 'url',\n    url: 'https://images.unsplash.com/photo-1663659552548-25d7771802c9?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=774&q=80',\n  },\n  {\n    operation: 'grayscale',\n  },\n  {\n    operation: 'output',\n    format: 'webp',\n  },\n];\n```\n\n2. Stringify and encode the list:\n\n```js\nencodeURIComponent(JSON.stringify(operations));\n```\n\n3. Call the deployed `process` Cloud Function:\n\n[https://europe-west3-website-5a18c.cloudfunctions.net/ext-image-processing-api-handler/process?operations=%5B%7B%22operation%22%3A%22input%22%2C%22type%22%3A%22url%22%2C%22url%22%3A%22https%3A%2F%2Fimages.unsplash.com%2Fphoto-1663659552548-25d7771802c9%3Fixlib%3Drb-1.2.1%26ixid%3DMnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8%26auto%3Dformat%26fit%3Dcrop%26w%3D774%26q%3D80%22%7D%2C%7B%22operation%22%3A%22grayscale%22%7D%2C%7B%22operation%22%3A%22output%22%2C%22format%22%3A%22webp%22%7D%5D](https://europe-west3-website-5a18c.cloudfunctions.net/ext-image-processing-api-handler/process?operations=%5B%7B%22operation%22%3A%22input%22%2C%22type%22%3A%22url%22%2C%22url%22%3A%22https%3A%2F%2Fimages.unsplash.com%2Fphoto-1663659552548-25d7771802c9%3Fixlib%3Drb-1.2.1%26ixid%3DMnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8%26auto%3Dformat%26fit%3Dcrop%26w%3D774%26q%3D80%22%7D%2C%7B%22operation%22%3A%22grayscale%22%7D%2C%7B%22operation%22%3A%22output%22%2C%22format%22%3A%22webp%22%7D%5D)\n\nThe result will be a grayscaled version of the image, in WebP format.\n\n### Using the extension\n\nSee the [official documentation](https://extensions.invertase.dev/image-processing-api) for more information on using the extension, including the full list of supported operations you can use.\n\n### Monitoring\n\nAs a best practice, you can [monitor the activity](https://firebase.google.com/docs/extensions/manage-installed-extensions#monitor) of your installed extension, including checks on its health, usage, and logs.\n","extensionRef":"invertase/image-processing-api","extensionVersion":"0.2.1","systemParams":{"firebaseextensions.v1beta.function/minInstances":"0","firebaseextensions.v1beta.function/vpcConnectorEgressSettings":"VPC_CONNECTOR_EGRESS_SETTINGS_UNSPECIFIED"}},"lastOperationName":"projects/website-5a18c/operations/e622a0be-0e1a-44cc-aefe-0a3a8c5bfe4c","serviceAccountEmail":"ext-image-processing-api@website-5a18c.iam.gserviceaccount.com","lastOperationType":"CREATE","etag":"1cfc037ee3e595627a0a1255b18d3e691ad149429459bde03adf427ae0b1aef7"}]}
[debug] [2025-07-16T21:27:29.957Z] Failed to validate key FIREBASE_ADMIN_TYPE: Error: Key FIREBASE_ADMIN_TYPE starts with a reserved prefix (X_GOOGLE_ FIREBASE_ EXT_)
[debug] [2025-07-16T21:27:29.958Z] Failed to validate key FIREBASE_ADMIN_PRIVATE_KEY_ID: Error: Key FIREBASE_ADMIN_PRIVATE_KEY_ID starts with a reserved prefix (X_GOOGLE_ FIREBASE_ EXT_)
[debug] [2025-07-16T21:27:29.958Z] Failed to validate key FIREBASE_ADMIN_PRIVATE_KEY: Error: Key FIREBASE_ADMIN_PRIVATE_KEY starts with a reserved prefix (X_GOOGLE_ FIREBASE_ EXT_)
[debug] [2025-07-16T21:27:29.958Z] Failed to validate key FIREBASE_ADMIN_CLIENT_EMAIL: Error: Key FIREBASE_ADMIN_CLIENT_EMAIL starts with a reserved prefix (X_GOOGLE_ FIREBASE_ EXT_)
[debug] [2025-07-16T21:27:29.958Z] Failed to validate key FIREBASE_ADMIN_CLIENT_ID: Error: Key FIREBASE_ADMIN_CLIENT_ID starts with a reserved prefix (X_GOOGLE_ FIREBASE_ EXT_)
[debug] [2025-07-16T21:27:29.958Z] Failed to validate key FIREBASE_ADMIN_AUTH_URI: Error: Key FIREBASE_ADMIN_AUTH_URI starts with a reserved prefix (X_GOOGLE_ FIREBASE_ EXT_)
[debug] [2025-07-16T21:27:29.958Z] Failed to validate key FIREBASE_ADMIN_TOKEN_URI: Error: Key FIREBASE_ADMIN_TOKEN_URI starts with a reserved prefix (X_GOOGLE_ FIREBASE_ EXT_)
[debug] [2025-07-16T21:27:29.958Z] Failed to validate key FIREBASE_ADMIN_AUTH_PROVIDER_X509_CERT_URL: Error: Key FIREBASE_ADMIN_AUTH_PROVIDER_X509_CERT_URL starts with a reserved prefix (X_GOOGLE_ FIREBASE_ EXT_)
[debug] [2025-07-16T21:27:29.958Z] Failed to validate key FIREBASE_ADMIN_CLIENT_X509_CERT_URL: Error: Key FIREBASE_ADMIN_CLIENT_X509_CERT_URL starts with a reserved prefix (X_GOOGLE_ FIREBASE_ EXT_)
[error] Error: Failed to load environment variables from .env.:
[error] - Error Key FIREBASE_ADMIN_TYPE starts with a reserved prefix (X_GOOGLE_ FIREBASE_ EXT_)
[error] - Error Key FIREBASE_ADMIN_PRIVATE_KEY_ID starts with a reserved prefix (X_GOOGLE_ FIREBASE_ EXT_)
[error] - Error Key FIREBASE_ADMIN_PRIVATE_KEY starts with a reserved prefix (X_GOOGLE_ FIREBASE_ EXT_)
[error] - Error Key FIREBASE_ADMIN_CLIENT_EMAIL starts with a reserved prefix (X_GOOGLE_ FIREBASE_ EXT_)
[error] - Error Key FIREBASE_ADMIN_CLIENT_ID starts with a reserved prefix (X_GOOGLE_ FIREBASE_ EXT_)
[error] - Error Key FIREBASE_ADMIN_AUTH_URI starts with a reserved prefix (X_GOOGLE_ FIREBASE_ EXT_)
[error] - Error Key FIREBASE_ADMIN_TOKEN_URI starts with a reserved prefix (X_GOOGLE_ FIREBASE_ EXT_)
[error] - Error Key FIREBASE_ADMIN_AUTH_PROVIDER_X509_CERT_URL starts with a reserved prefix (X_GOOGLE_ FIREBASE_ EXT_)
[error] - Error Key FIREBASE_ADMIN_CLIENT_X509_CERT_URL starts with a reserved prefix (X_GOOGLE_ FIREBASE_ EXT_)
[debug] [2025-07-16T21:29:14.462Z] ----------------------------------------------------------------------
[debug] [2025-07-16T21:29:14.467Z] Command:       /nix/store/rbdrkcs5kkwpalxcd7c6bnm33lk2955n-nodejs-20.19.0/bin/node /home/user/.global_modules/bin/firebase deploy --only hosting --project=website-5a18c
[debug] [2025-07-16T21:29:14.467Z] CLI Version:   14.10.1
[debug] [2025-07-16T21:29:14.468Z] Platform:      linux
[debug] [2025-07-16T21:29:14.468Z] Node Version:  v20.19.0
[debug] [2025-07-16T21:29:14.468Z] Time:          Wed Jul 16 2025 21:29:14 GMT+0000 (Coordinated Universal Time)
[debug] [2025-07-16T21:29:14.469Z] ----------------------------------------------------------------------
[debug] 
[debug] [2025-07-16T21:29:15.250Z] Object "/hosting" in "firebase.json" has unknown property: {"additionalProperty":"webFrameworks"}
[debug] [2025-07-16T21:29:15.251Z] Field "/hosting" in "firebase.json" is possibly invalid: must be array
[debug] [2025-07-16T21:29:15.251Z] Field "/hosting" in "firebase.json" is possibly invalid: must match a schema in anyOf
[debug] [2025-07-16T21:29:15.259Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2025-07-16T21:29:15.260Z] > authorizing via signed-in user (bakirbehmen@gmail.com)
[debug] [2025-07-16T21:29:15.260Z] [iam] checking project website-5a18c for permissions ["firebase.projects.get","firebasehosting.sites.update"]
[debug] [2025-07-16T21:29:15.262Z] Checked if tokens are valid: true, expires at: 1752703517880
[debug] [2025-07-16T21:29:15.262Z] Checked if tokens are valid: true, expires at: 1752703517880
[debug] [2025-07-16T21:29:15.264Z] >>> [apiv2][query] POST https://cloudresourcemanager.googleapis.com/v1/projects/website-5a18c:testIamPermissions [none]
[debug] [2025-07-16T21:29:15.264Z] >>> [apiv2][(partial)header] POST https://cloudresourcemanager.googleapis.com/v1/projects/website-5a18c:testIamPermissions x-goog-quota-user=projects/website-5a18c
[debug] [2025-07-16T21:29:15.265Z] >>> [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/website-5a18c:testIamPermissions {"permissions":["firebase.projects.get","firebasehosting.sites.update"]}
[debug] [2025-07-16T21:29:16.049Z] <<< [apiv2][status] POST https://cloudresourcemanager.googleapis.com/v1/projects/website-5a18c:testIamPermissions 200
[debug] [2025-07-16T21:29:16.056Z] <<< [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/website-5a18c:testIamPermissions {"permissions":["firebase.projects.get","firebasehosting.sites.update"]}
[debug] [2025-07-16T21:29:16.058Z] Checked if tokens are valid: true, expires at: 1752703517880
[debug] [2025-07-16T21:29:16.062Z] Checked if tokens are valid: true, expires at: 1752703517880
[debug] [2025-07-16T21:29:16.063Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/website-5a18c [none]
[debug] [2025-07-16T21:29:16.256Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/website-5a18c 200
[debug] [2025-07-16T21:29:16.260Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/website-5a18c {"projectId":"website-5a18c","projectNumber":"636702053767","displayName":"website","name":"projects/website-5a18c","resources":{"hostingSite":"website-5a18c"},"state":"ACTIVE","etag":"1_a6122a7f-7df1-4ea8-844b-57f64ef44324"}
[debug] [2025-07-16T21:29:24.682Z] defaultcredentials: writing to file /home/user/.config/firebase/bakirbehmen_gmail_com_application_default_credentials.json
[debug] [2025-07-16T21:29:24.702Z] Checked if tokens are valid: true, expires at: 1752703517880
[debug] [2025-07-16T21:29:24.702Z] Checked if tokens are valid: true, expires at: 1752703517880
[debug] [2025-07-16T21:29:24.710Z] >>> [apiv2][query] GET https://firebasehosting.googleapis.com/v1beta1/projects/website-5a18c/sites pageToken=&pageSize=10
[debug] [2025-07-16T21:29:25.818Z] <<< [apiv2][status] GET https://firebasehosting.googleapis.com/v1beta1/projects/website-5a18c/sites 200
[debug] [2025-07-16T21:29:25.819Z] <<< [apiv2][body] GET https://firebasehosting.googleapis.com/v1beta1/projects/website-5a18c/sites {"sites":[{"name":"projects/website-5a18c/sites/website-5a18c","defaultUrl":"https://website-5a18c.web.app","appId":"1:636702053767:web:0de2259025db8c0bbd6f22","type":"DEFAULT_SITE"}]}
[debug] [2025-07-16T21:29:25.819Z] Checked if tokens are valid: true, expires at: 1752703517880
[debug] [2025-07-16T21:29:25.820Z] Checked if tokens are valid: true, expires at: 1752703517880
[debug] [2025-07-16T21:29:25.830Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/-/webApps/1:636702053767:web:0de2259025db8c0bbd6f22/config [none]
[debug] [2025-07-16T21:29:26.458Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/-/webApps/1:636702053767:web:0de2259025db8c0bbd6f22/config 200
[debug] [2025-07-16T21:29:26.462Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/-/webApps/1:636702053767:web:0de2259025db8c0bbd6f22/config {"projectId":"website-5a18c","appId":"1:636702053767:web:0de2259025db8c0bbd6f22","storageBucket":"website-5a18c.firebasestorage.app","apiKey":"AIzaSyDxwAQf6RX8UHlbjPpnjMVX-0jS85K3bvw","authDomain":"website-5a18c.firebaseapp.com","messagingSenderId":"636702053767","measurementId":"G-WGPRNHDM9Q"}
[info] 
   Thank you for trying our early preview of Next.js support on Firebase Hosting.
   During the preview, support is best-effort and breaking changes can be expected. Proceed with caution.
   The integration is known to work with Next.js version 12 - 15.0. You may encounter errors.

   Documentation: https://firebase.google.com/docs/hosting/frameworks/nextjs
   File a bug: https://github.com/firebase/firebase-tools/issues/new?template=bug_report.md
   Submit a feature request: https://github.com/firebase/firebase-tools/issues/new?template=feature_request.md

   We'd love to learn from you. Express your interest in helping us shape the future of Firebase Hosting: https://goo.gle/41enW5X

[debug] [2025-07-16T21:29:43.595Z] Checked if tokens are valid: true, expires at: 1752703517880
[debug] [2025-07-16T21:29:43.597Z] Checked if tokens are valid: true, expires at: 1752703517880
[debug] [2025-07-16T21:29:43.598Z] >>> [apiv2][query] GET https://firebasehosting.googleapis.com/v1beta1/projects/website-5a18c/sites/website-5a18c [none]
[debug] [2025-07-16T21:29:44.564Z] <<< [apiv2][status] GET https://firebasehosting.googleapis.com/v1beta1/projects/website-5a18c/sites/website-5a18c 200
[debug] [2025-07-16T21:29:44.569Z] <<< [apiv2][body] GET https://firebasehosting.googleapis.com/v1beta1/projects/website-5a18c/sites/website-5a18c {"name":"projects/website-5a18c/sites/website-5a18c","defaultUrl":"https://website-5a18c.web.app","appId":"1:636702053767:web:0de2259025db8c0bbd6f22","type":"DEFAULT_SITE"}
[info]    ▲ Next.js 15.3.3

[info]    - Environments: .env.local, .env


[info]    Creating an optimized production build ...

[info]  ✓ Compiled successfully in 12.0s

[info]    Skipping validation of types
   Skipping linting

[info]    Collecting page data ...

[info]    Generating static pages (0/6) ...

[info]    Generating static pages (1/6) 

[info]    Generating static pages (2/6) 
   Generating static pages (4/6) 
 ✓ Generating static pages (6/6)

[info]    Finalizing page optimization ...

[info]    Collecting build traces ...

[info] 

[info] Route (app)                                 Size  First Load JS
┌ ○ /_not-found                            978 B         102 kB
└ ● /[lng]                               35.8 kB         157 kB
    ├ /sr
    └ /en
+ First Load JS shared by all             101 kB
  ├ chunks/4bd1b696-4419cc93057fcf32.js  53.2 kB
  ├ chunks/684-7002d2f60d48787d.js         46 kB
  └ other shared chunks (total)          2.03 kB


ƒ Middleware                             32.3 kB

[info] 
○  (Static)  prerendered as static content
●  (SSG)     prerendered as static HTML (uses generateStaticParams)


[info] Building a Cloud Function to run this application. This is needed due to:
[info]  • middleware
[info]  • use of fallback /[lng]
[info] 
[debug] [2025-07-16T21:31:15.387Z] skipping /en due to it matching an unsupported rewrite/redirect/header or middlware
[debug] [2025-07-16T21:31:15.387Z] skipping /sr due to it matching an unsupported rewrite/redirect/header or middlware
[debug] [2025-07-16T21:31:15.388Z] skipping /404 due to it matching an unsupported rewrite/redirect/header or middlware
[debug] [2025-07-16T21:31:15.416Z] Checked if tokens are valid: true, expires at: 1752703517880
[debug] [2025-07-16T21:31:15.416Z] Checked if tokens are valid: true, expires at: 1752703517880
[debug] [2025-07-16T21:31:15.417Z] >>> [apiv2][query] GET https://firebasehosting.googleapis.com/v1beta1/projects/website-5a18c/sites/website-5a18c [none]
[debug] [2025-07-16T21:31:16.389Z] <<< [apiv2][status] GET https://firebasehosting.googleapis.com/v1beta1/projects/website-5a18c/sites/website-5a18c 200
[debug] [2025-07-16T21:31:16.389Z] <<< [apiv2][body] GET https://firebasehosting.googleapis.com/v1beta1/projects/website-5a18c/sites/website-5a18c {"name":"projects/website-5a18c/sites/website-5a18c","defaultUrl":"https://website-5a18c.web.app","appId":"1:636702053767:web:0de2259025db8c0bbd6f22","type":"DEFAULT_SITE"}
[debug] [2025-07-16T21:32:11.671Z] [web frameworks] effective firebase.json:  {
  "hosting": [
    {
      "source": ".",
      "ignore": [
        "firebase.json",
        "**/.*",
        "**/node_modules/**"
      ],
      "rewrites": [
        {
          "source": "**",
          "function": {
            "functionId": "_next"
          }
        },
        {
          "source": "/**",
          "function": {
            "functionId": "ssrwebsite5a18c",
            "region": "us-central1",
            "pinTag": true
          }
        }
      ],
      "webFrameworks": {
        "region": "europe-west1"
      },
      "site": "website-5a18c",
      "redirects": [],
      "headers": [
        {
          "source": "/_not-found",
          "headers": [
            {
              "key": "x-nextjs-stale-time",
              "value": "300"
            },
            {
              "key": "x-nextjs-prerender",
              "value": "1"
            },
            {
              "key": "x-next-cache-tags",
              "value": "_N_T_/layout,_N_T_/_not-found/layout,_N_T_/_not-found/page,_N_T_/_not-found"
            }
          ]
        },
        {
          "source": "/favicon.ico",
          "headers": [
            {
              "key": "cache-control",
              "value": "public, max-age=0, must-revalidate"
            },
            {
              "key": "content-type",
              "value": "image/x-icon"
            },
            {
              "key": "x-next-cache-tags",
              "value": "_N_T_/layout,_N_T_/favicon.ico/layout,_N_T_/favicon.ico/route,_N_T_/favicon.ico"
            }
          ]
        },
        {
          "source": "/**/*.[jt]s",
          "headers": [
            {
              "key": "Set-Cookie",
              "value": "__FIREBASE_DEFAULTS__=eyJjb25maWciOnsicHJvamVjdElkIjoid2Vic2l0ZS01YTE4YyIsImFwcElkIjoiMTo2MzY3MDIwNTM3Njc6d2ViOjBkZTIyNTkwMjVkYjhjMGJiZDZmMjIiLCJzdG9yYWdlQnVja2V0Ijoid2Vic2l0ZS01YTE4Yy5maXJlYmFzZXN0b3JhZ2UuYXBwIiwiYXBpS2V5IjoiQUl6YVN5RHh3QVFmNlJYOFVIbGJqUHBuak1WWC0walM4NUszYnZ3IiwiYXV0aERvbWFpbiI6IndlYnNpdGUtNWExOGMuZmlyZWJhc2VhcHAuY29tIiwibWVzc2FnaW5nU2VuZGVySWQiOiI2MzY3MDIwNTM3NjciLCJtZWFzdXJlbWVudElkIjoiRy1XR1BSTkhETTlRIn0sIl9hdXRoVG9rZW5TeW5jVVJMIjoiL19fc2Vzc2lvbiJ9; SameSite=Strict; Expires=2027-06-11T08:12:11.671Z; Path=/;"
            }
          ]
        }
      ],
      "cleanUrls": true,
      "trailingSlash": false,
      "public": ".firebase/website-5a18c/hosting",
      "webFramework": "next_ssr"
    }
  ],
  "functions": [
    {
      "source": ".firebase/website-5a18c/functions",
      "codebase": "firebase-frameworks-website-5a18c"
    }
  ]
}
[debug] [2025-07-16T21:32:11.672Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2025-07-16T21:32:11.679Z] > authorizing via signed-in user (bakirbehmen@gmail.com)
[debug] [2025-07-16T21:32:11.679Z] [iam] checking project website-5a18c for permissions ["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]
[debug] [2025-07-16T21:32:11.680Z] Checked if tokens are valid: true, expires at: 1752703517880
[debug] [2025-07-16T21:32:11.681Z] Checked if tokens are valid: true, expires at: 1752703517880
[debug] [2025-07-16T21:32:11.685Z] >>> [apiv2][query] POST https://cloudresourcemanager.googleapis.com/v1/projects/website-5a18c:testIamPermissions [none]
[debug] [2025-07-16T21:32:11.686Z] >>> [apiv2][(partial)header] POST https://cloudresourcemanager.googleapis.com/v1/projects/website-5a18c:testIamPermissions x-goog-quota-user=projects/website-5a18c
[debug] [2025-07-16T21:32:11.686Z] >>> [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/website-5a18c:testIamPermissions {"permissions":["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]}
[debug] [2025-07-16T21:32:12.355Z] <<< [apiv2][status] POST https://cloudresourcemanager.googleapis.com/v1/projects/website-5a18c:testIamPermissions 200
[debug] [2025-07-16T21:32:12.356Z] <<< [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/website-5a18c:testIamPermissions {"permissions":["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]}
[debug] [2025-07-16T21:32:12.360Z] Checked if tokens are valid: true, expires at: 1752703517880
[debug] [2025-07-16T21:32:12.361Z] Checked if tokens are valid: true, expires at: 1752703517880
[debug] [2025-07-16T21:32:12.361Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v1/projects/website-5a18c/locations/-/functions [none]
[debug] [2025-07-16T21:32:12.977Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v1/projects/website-5a18c/locations/-/functions 200
[debug] [2025-07-16T21:32:12.977Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v1/projects/website-5a18c/locations/-/functions {"functions":[{"name":"projects/website-5a18c/locations/europe-west3/functions/ext-image-processing-api-handler","description":"Serves a API accepting incoming HTTP requests.","sourceArchiveUrl":"gs://firebase-mod-sources-prod/2137a7fadcc867f26a3d8015133f2ab19c2f60dd35bd2ec8facf4e1f04e61232","httpsTrigger":{"url":"https://europe-west3-website-5a18c.cloudfunctions.net/ext-image-processing-api-handler","securityLevel":"SECURE_OPTIONAL"},"status":"ACTIVE","entryPoint":"handler","timeout":"60s","availableMemoryMb":1024,"serviceAccountEmail":"ext-image-processing-api@website-5a18c.iam.gserviceaccount.com","updateTime":"2025-07-14T04:37:55.941Z","versionId":"2","labels":{"goog-firebase-ext-iid":"image-processing-api","firebase-extensions-ar":"enabled","goog-dm":"firebase-ext-image-processing-api","goog-firebase-ext":"image-processing-api","deployment-tool":"firebase-extensions"},"environmentVariables":{"CLOUD_STORAGE_BUCKET":"website-5a18c.firebasestorage.app","CORS_ORIGIN_ALLOW_LIST":"*","DATABASE_INSTANCE":"","DATABASE_URL":"","EXT_INSTANCE_ID":"image-processing-api","FIREBASE_CONFIG":"{\"projectId\":\"website-5a18c\",\"databaseURL\":\"\",\"storageBucket\":\"website-5a18c.firebasestorage.app\"}","GCLOUD_PROJECT":"website-5a18c","LOCATION":"europe-west3","PROJECT_ID":"website-5a18c","STORAGE_BUCKET":"website-5a18c.firebasestorage.app"},"runtime":"nodejs20","ingressSettings":"ALLOW_ALL","buildId":"f18bca3c-f1f5-4477-90f4-e5e6e741ebbc","buildEnvironmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"buildName":"projects/636702053767/locations/europe-west3/builds/f18bca3c-f1f5-4477-90f4-e5e6e741ebbc","dockerRegistry":"ARTIFACT_REGISTRY","automaticUpdatePolicy":{},"buildServiceAccount":"projects/website-5a18c/serviceAccounts/636702053767-compute@developer.gserviceaccount.com","satisfiesPzs":true,"satisfiesPzi":true}]}
[debug] [2025-07-16T21:32:12.980Z] Checked if tokens are valid: true, expires at: 1752703517880
[debug] [2025-07-16T21:32:12.980Z] Checked if tokens are valid: true, expires at: 1752703517880
[debug] [2025-07-16T21:32:12.981Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/website-5a18c/locations/-/functions filter=environment%3D%22GEN_2%22
[debug] [2025-07-16T21:32:13.975Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/website-5a18c/locations/-/functions 200
[debug] [2025-07-16T21:32:13.976Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/website-5a18c/locations/-/functions {"functions":[{"name":"projects/website-5a18c/locations/us-central1/functions/ssrwebsite5a18c","buildConfig":{"build":"projects/636702053767/locations/us-central1/builds/d8dc5e1a-ecb9-4b6c-afee-a6e3c624b3a3","runtime":"nodejs20","entryPoint":"ssrwebsite5a18c","source":{"storageSource":{"bucket":"gcf-v2-sources-636702053767-us-central1","object":"ssrwebsite5a18c/function-source.zip","generation":"1752466812219058"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/website-5a18c/locations/us-central1/repositories/gcf-artifacts","sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-636702053767-us-central1","object":"ssrwebsite5a18c/function-source.zip","generation":"1752466812219058"}},"dockerRegistry":"ARTIFACT_REGISTRY","serviceAccount":"projects/website-5a18c/serviceAccounts/636702053767-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/website-5a18c/locations/us-central1/services/ssrwebsite5a18c","timeoutSeconds":60,"environmentVariables":{"GEMINI_API_KEY":"","NEXT_PUBLIC_FIREBASE_API_KEY":"AIzaSyDxwAQf6RX8UHlbjPpnjMVX-0jS85K3bvw","NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN":"website-5a18c.firebaseapp.com","NEXT_PUBLIC_FIREBASE_PROJECT_ID":"website-5a18c","NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET":"website-5a18c.appspot.com","NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID":"636702053767","NEXT_PUBLIC_FIREBASE_APP_ID":"1:636702053767:web:0de2259025db8c0bbd6f22","NEXT_PUBLIC_FIREBASE_MEASUREMENT_ID":"G-WGPRNHDM9Q","VERCEL_URL":"website-5a18c.web.app","__FIREBASE_FRAMEWORKS_ENTRY__":"next.js","__FIREBASE_DEFAULTS__":"{\"config\":{\"projectId\":\"website-5a18c\",\"appId\":\"1:636702053767:web:0de2259025db8c0bbd6f22\",\"storageBucket\":\"website-5a18c.firebasestorage.app\",\"apiKey\":\"AIzaSyDxwAQf6RX8UHlbjPpnjMVX-0jS85K3bvw\",\"authDomain\":\"website-5a18c.firebaseapp.com\",\"messagingSenderId\":\"636702053767\",\"measurementId\":\"G-WGPRNHDM9Q\"},\"_authTokenSyncURL\":\"/__session\"}","FIREBASE_CONFIG":"{\"projectId\":\"website-5a18c\",\"storageBucket\":\"website-5a18c.firebasestorage.app\"}","GCLOUD_PROJECT":"website-5a18c","EVENTARC_CLOUD_EVENT_SOURCE":"projects/website-5a18c/locations/us-central1/services/ssrwebsite5a18c","FUNCTION_TARGET":"ssrwebsite5a18c","LOG_EXECUTION_ID":"true"},"maxInstanceCount":20,"ingressSettings":"ALLOW_ALL","uri":"https://ssrwebsite5a18c-hr7gf53sqq-uc.a.run.app","serviceAccountEmail":"636702053767-compute@developer.gserviceaccount.com","availableMemory":"256Mi","allTrafficOnLatestRevision":true,"revision":"ssrwebsite5a18c-00001-rey","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"state":"ACTIVE","updateTime":"2025-07-14T04:22:57.557138708Z","labels":{"deployment-tool":"cli-firebase--project-idx","firebase-functions-codebase":"firebase-frameworks-website-5a18c","firebase-functions-hash":"d1a9c72cc15bd8e5dc8545c81251e01b59363f8d"},"environment":"GEN_2","url":"https://us-central1-website-5a18c.cloudfunctions.net/ssrwebsite5a18c","createTime":"2025-07-14T04:20:12.455639447Z","satisfiesPzi":true}]}
[info] i  hosting: The following function(s) are pinned to site website-5a18c and will be deployed as well: ssrwebsite5a18c 
[info] 
[info] === Deploying to 'website-5a18c'...
[info] 
[info] i  deploying functions, hosting 
[debug] [2025-07-16T21:32:13.989Z] Checked if tokens are valid: true, expires at: 1752703517880
[debug] [2025-07-16T21:32:13.990Z] Checked if tokens are valid: true, expires at: 1752703517880
[debug] [2025-07-16T21:32:13.990Z] >>> [apiv2][query] GET https://cloudresourcemanager.googleapis.com/v1/projects/website-5a18c [none]
[debug] [2025-07-16T21:32:14.186Z] <<< [apiv2][status] GET https://cloudresourcemanager.googleapis.com/v1/projects/website-5a18c 200
[debug] [2025-07-16T21:32:14.188Z] <<< [apiv2][body] GET https://cloudresourcemanager.googleapis.com/v1/projects/website-5a18c {"projectNumber":"636702053767","projectId":"website-5a18c","lifecycleState":"ACTIVE","name":"website","labels":{"firebase":"enabled","firebase-core":"disabled","generative-language":"enabled"},"createTime":"2025-07-11T21:11:24.875257Z"}
[info] i  functions: preparing codebase firebase-frameworks-website-5a18c for deployment 
[info] i  functions: ensuring required API cloudfunctions.googleapis.com is enabled... 
[info] i  functions: ensuring required API cloudbuild.googleapis.com is enabled... 
[info] i  artifactregistry: ensuring required API artifactregistry.googleapis.com is enabled... 
[debug] [2025-07-16T21:32:14.202Z] Checked if tokens are valid: true, expires at: 1752703517880
[debug] [2025-07-16T21:32:14.202Z] Checked if tokens are valid: true, expires at: 1752703517880
[debug] [2025-07-16T21:32:14.203Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/website-5a18c/adminSdkConfig [none]
[debug] [2025-07-16T21:32:14.461Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/website-5a18c/adminSdkConfig 200
[debug] [2025-07-16T21:32:14.461Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/website-5a18c/adminSdkConfig {"projectId":"website-5a18c","storageBucket":"website-5a18c.firebasestorage.app"}
[debug] [2025-07-16T21:32:14.462Z] Checked if tokens are valid: true, expires at: 1752703517880
[debug] [2025-07-16T21:32:14.462Z] Checked if tokens are valid: true, expires at: 1752703517880
[debug] [2025-07-16T21:32:14.466Z] >>> [apiv2][query] GET https://runtimeconfig.googleapis.com/v1beta1/projects/website-5a18c/configs [none]
[debug] [2025-07-16T21:32:14.656Z] <<< [apiv2][status] GET https://runtimeconfig.googleapis.com/v1beta1/projects/website-5a18c/configs 200
[debug] [2025-07-16T21:32:14.657Z] <<< [apiv2][body] GET https://runtimeconfig.googleapis.com/v1beta1/projects/website-5a18c/configs {}
[debug] [2025-07-16T21:32:14.669Z] Validating nodejs source
[debug] [2025-07-16T21:32:15.419Z] > [functions] package.json contents: {
  "name": "nextn",
  "version": "0.1.0",
  "private": true,
  "dependencies": {
    "@genkit-ai/googleai": "^1.13.0",
    "@hookform/resolvers": "^4.1.3",
    "@radix-ui/react-accordion": "^1.2.3",
    "@radix-ui/react-alert-dialog": "^1.1.6",
    "@radix-ui/react-avatar": "^1.1.3",
    "@radix-ui/react-checkbox": "^1.1.4",
    "@radix-ui/react-collapsible": "^1.1.11",
    "@radix-ui/react-dialog": "^1.1.6",
    "@radix-ui/react-dropdown-menu": "^2.1.6",
    "@radix-ui/react-label": "^2.1.2",
    "@radix-ui/react-menubar": "^1.1.6",
    "@radix-ui/react-popover": "^1.1.6",
    "@radix-ui/react-progress": "^1.1.2",
    "@radix-ui/react-radio-group": "^1.2.3",
    "@radix-ui/react-scroll-area": "^1.2.3",
    "@radix-ui/react-select": "^2.1.6",
    "@radix-ui/react-separator": "^1.1.2",
    "@radix-ui/react-slider": "^1.2.3",
    "@radix-ui/react-slot": "^1.2.3",
    "@radix-ui/react-switch": "^1.1.3",
    "@radix-ui/react-tabs": "^1.1.3",
    "@radix-ui/react-toast": "^1.2.6",
    "@radix-ui/react-tooltip": "^1.1.8",
    "class-variance-authority": "^0.7.1",
    "clsx": "^2.1.1",
    "date-fns": "^3.6.0",
    "dotenv": "^16.5.0",
    "embla-carousel-react": "^8.6.0",
    "firebase": "^11.10.0",
    "firebase-admin": "^13.4.0",
    "genkit": "^1.13.0",
    "i18next": "^25.3.2",
    "i18next-browser-languagedetector": "^8.2.0",
    "i18next-resources-to-backend": "^1.2.1",
    "lucide-react": "^0.475.0",
    "next": "15.3.3",
    "react": "^18.3.1",
    "react-cookie": "^8.0.1",
    "react-day-picker": "^8.10.1",
    "react-dom": "^18.3.1",
    "react-hook-form": "^7.54.2",
    "react-i18next": "^15.6.0",
    "recharts": "^2.15.1",
    "tailwind-merge": "^3.0.1",
    "tailwindcss-animate": "^1.0.7",
    "zod": "^3.24.2",
    "firebase-frameworks": "^0.11.0",
    "firebase-functions": "^6.0.1"
  },
  "main": "server.js",
  "engines": {
    "node": "20"
  }
}
[debug] [2025-07-16T21:32:15.419Z] Building nodejs source
[info] i  functions: Loading and analyzing source code for codebase firebase-frameworks-website-5a18c to determine what to deploy 
[debug] [2025-07-16T21:32:15.421Z] Could not find functions.yaml. Must use http discovery
[debug] [2025-07-16T21:32:15.437Z] Found firebase-functions binary at '/home/user/studio/.firebase/website-5a18c/functions/node_modules/.bin/firebase-functions'
[info] Serving at port 8729

[debug] [2025-07-16T21:32:18.532Z] Got response from /__/functions.yaml {"endpoints":{"ssrwebsite5a18c":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"httpsTrigger":{},"entryPoint":"ssrwebsite5a18c"}},"specVersion":"v1alpha1","requiredAPIs":[],"extensions":{}}
[info] i  extensions: ensuring required API firebaseextensions.googleapis.com is enabled... 
[debug] [2025-07-16T21:32:22.639Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2025-07-16T21:32:22.640Z] > authorizing via signed-in user (bakirbehmen@gmail.com)
[debug] [2025-07-16T21:32:22.642Z] [iam] checking project website-5a18c for permissions ["firebase.projects.get","firebaseextensions.instances.list"]
[debug] [2025-07-16T21:32:22.642Z] Checked if tokens are valid: true, expires at: 1752703517880
[debug] [2025-07-16T21:32:22.642Z] Checked if tokens are valid: true, expires at: 1752703517880
[debug] [2025-07-16T21:32:22.643Z] >>> [apiv2][query] POST https://cloudresourcemanager.googleapis.com/v1/projects/website-5a18c:testIamPermissions [none]
[debug] [2025-07-16T21:32:22.643Z] >>> [apiv2][(partial)header] POST https://cloudresourcemanager.googleapis.com/v1/projects/website-5a18c:testIamPermissions x-goog-quota-user=projects/website-5a18c
[debug] [2025-07-16T21:32:22.643Z] >>> [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/website-5a18c:testIamPermissions {"permissions":["firebase.projects.get","firebaseextensions.instances.list"]}
[debug] [2025-07-16T21:32:23.301Z] <<< [apiv2][status] POST https://cloudresourcemanager.googleapis.com/v1/projects/website-5a18c:testIamPermissions 200
[debug] [2025-07-16T21:32:23.304Z] <<< [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/website-5a18c:testIamPermissions {"permissions":["firebase.projects.get","firebaseextensions.instances.list"]}
[debug] [2025-07-16T21:32:23.305Z] Checked if tokens are valid: true, expires at: 1752703517880
[debug] [2025-07-16T21:32:23.305Z] Checked if tokens are valid: true, expires at: 1752703517880
[debug] [2025-07-16T21:32:23.307Z] >>> [apiv2][query] GET https://firebaseextensions.googleapis.com/v1beta/projects/website-5a18c/instances pageSize=100&pageToken=
[debug] [2025-07-16T21:32:24.109Z] <<< [apiv2][status] GET https://firebaseextensions.googleapis.com/v1beta/projects/website-5a18c/instances 200
[debug] [2025-07-16T21:32:24.110Z] <<< [apiv2][body] GET https://firebaseextensions.googleapis.com/v1beta/projects/website-5a18c/instances {"instances":[{"name":"projects/website-5a18c/instances/image-processing-api","createTime":"2025-07-14T04:33:14.381422Z","updateTime":"2025-07-14T04:38:24.129382Z","state":"ACTIVE","config":{"name":"projects/website-5a18c/instances/image-processing-api/configurations/1ecf0e78-380c-4b30-bf6f-36ead48313e2","createTime":"2025-07-14T04:33:14.381422Z","source":{"name":"projects/invertase-firebase-extensions/sources/8e80a7ef-0036-42b3-b829-9fab843715dd","packageUri":"https://storage.googleapis.com/firebase-extensions-packages-prod/invertase-image-processing-api-0.2.1-6ccff87e-84ec-40c2-a78c-bbfb629b2dd5.zip","hash":"5034d7302af64a6e98d4e82f6529aab512b58ec36c69e5cb6656914e7d1be27c","extensionRoot":"/","spec":{"specVersion":"v1beta","name":"image-processing-api","version":"0.2.1","description":"Use this extension to optimize and transform images via a powerful HTTP API with over 30 different image operations to enhance and manipulate your images.","apis":[{"apiName":"storage-component.googleapis.com","reason":"Needed to use Cloud Storage"}],"roles":[{"role":"storage.admin","reason":"Allows the extension to read images in Cloud Storage"}],"resources":[{"name":"handler","type":"firebaseextensions.v1beta.function","propertiesYaml":"availableMemoryMb: 1024\nhttpsTrigger: {}\nlocation: ${param:LOCATION}\nruntime: nodejs20\n","description":"Serves a API accepting incoming HTTP requests.","deletionPolicy":"DELETE"}],"billingRequired":true,"author":{"authorName":"Invertase","url":"https://invertase.io"},"contributors":[{"authorName":"Invertase","email":"oss@invertase.io","url":"https://github.com/invertase"}],"license":"Apache-2.0","releaseNotesUrl":"https://github.com/invertase/firebase-extensions/tree/main/extensions/image-processing-api/CHANGELOG.md","sourceUrl":"https://github.com/invertase/firebase-extensions/tree/main/extensions/image-processing-api","params":[{"param":"LOCATION","label":"Cloud Functions location","type":"SELECT","description":"Where do you want to deploy the functions created for this extension? You usually want a location close to your Storage bucket. For help selecting a location, refer to the [location selection guide](https://firebase.google.com/docs/functions/locations).","required":true,"options":[{"value":"us-central1","label":"Iowa (us-central1)"},{"value":"us-east1","label":"South Carolina (us-east1)"},{"value":"us-east4","label":"Northern Virginia (us-east4)"},{"value":"us-west2","label":"Los Angeles (us-west2)"},{"value":"us-west3","label":"Salt Lake City (us-west3)"},{"value":"us-west4","label":"Las Vegas (us-west4)"},{"value":"europe-central2","label":"Warsaw (europe-central2)"},{"value":"europe-west1","label":"Belgium (europe-west1)"},{"value":"europe-west2","label":"London (europe-west2)"},{"value":"europe-west3","label":"Frankfurt (europe-west3)"},{"value":"europe-west6","label":"Zurich (europe-west6)"},{"value":"asia-east2","label":"Hong Kong (asia-east2)"},{"value":"asia-northeast1","label":"Tokyo (asia-northeast1)"},{"value":"asia-northeast2","label":"Osaka (asia-northeast2)"},{"value":"asia-northeast3","label":"Seoul (asia-northeast3)"},{"value":"asia-south1","label":"Mumbai (asia-south1)"},{"value":"asia-southeast2","label":"Jakarta (asia-southeast2)"},{"value":"northamerica-northeast1","label":"Montreal (northamerica-northeast1)"},{"value":"southamerica-east1","label":"Sao Paulo (southamerica-east1)"},{"value":"australia-southeast1","label":"Sydney (australia-southeast1)"}],"default":"us-central1","immutable":true},{"param":"CLOUD_STORAGE_BUCKET","label":"Cloud Storage bucket for images","type":"STRING","description":"The Cloud Storage bucket where images that are to be processed are located. API requests with input urls or paths that are not inside this bucket will be dropped.\n","required":true,"default":"${STORAGE_BUCKET}","example":"my-project-12345.appspot.com","validationRegex":"^([0-9a-z_.-]*)$","validationErrorMessage":"Invalid storage bucket"},{"param":"CORS_ORIGIN_ALLOW_LIST","label":"Allowed CORS origins","type":"STRING","description":"A comma delimited value of allowed CORS origins. Use the default of '*' to allow all origins. This is useful to lockdown your API and only allow your own website to embed the images directly. Note this will not prevent non-browser requests from accessing your API.\n","required":true,"default":"*","example":"*.example.com,invertase.io"},{"param":"HOSTNAME","label":"Hostname","type":"STRING","description":"An optional hostname to fetch images from. This can used to construct the original image URL in the response. Include ONLY the hostname, without any protocol or path. The protocol https:// will be added automatically. This parameter is needed if you would like to query using local path names such as /my/image.jpg. instead of the full URL.\n","example":"example.com"}],"preinstallContent":"# Image Processing Extension\n\nUse this extension to optimize and transform images via a powerful HTTP API with over 30 image operations for enhancing and manipulating your images.\n\n## How It Works\n\nWhen you install this extension, it deploys a Cloud Function that exposes an HTTP API. All requests must be sent to the /process endpoint of the function. You perform image operations by passing an operations query parameter—a URL-encoded JSON string defining the operations to execute.\n\n### Example\n\nDefine your operations like so:\n\n```js\nconst operations = [\n  {\n    operation: 'input',\n    type: 'url',\n    url: 'https://example.com/image.jpg',\n  },\n  {\n    operation: 'grayscale',\n  },\n  {\n    operation: 'output',\n    format: 'webp',\n  },\n];\n\nconst params = `?operations=${encodeURIComponent(JSON.stringify(operations))}`;\n```\n\nThen, make your GET request to your Cloud Function using the correct endpoint. For example:\n\n```\nhttps://<your-configured-region>-<your-project-id>.cloudfunctions.net/<extension-instance-id>/process${params}\n```\n\nThe extension also comes with a JavaScript utility library for simplifying the creation of operations:\n\n```ts\nimport { builder } from '@invertase/image-processing-api';\n\nconst output = builder()\n  .input({\n    url: 'https://example.com/image.jpg',\n  })\n  .grayscale()\n  .output({\n    format: 'webp',\n  });\n\nconst params = `?operations=${output.toEncodedJSONString()}`;\n```\n\nView the [official documentation](https://extensions.invertase.dev/image-processing-api) for full usage examples.\n\n### Relative paths\n\nThe extension provides a hostname parameter, allowing you to query the function with local paths (starting with `/`).\n\nAs an example, if we set the hostname parameter to \"example.com\" then the following operation:\n\n```js\nconst operations = [\n  {\n    operation: 'input',\n    type: 'url',\n    url: '/image.jpg',\n  },\n  {\n    operation: 'grayscale',\n  },\n  {\n    operation: 'output',\n    format: 'webp',\n  },\n];\n```\n\nis equivalent to the earlier given example. The url `https://example.com/image.jpg` is constructed within the extension.\n\nNote that this will **only** apply to paths that begin with a forward slash `/`, and **only** when the hostname parameter is set.\n\n#### Additional setup\n\nBefore installing this extension, make sure that you've [set up a Cloud Storage bucket](https://firebase.google.com/docs/storage) in your Firebase project.\n\n#### Billing\n\nTo install an extension, your project must be on the [Blaze (pay as you go) plan](https://firebase.google.com/pricing)\n\n- You will be charged a small amount (typically around $0.01/month) for the Firebase resources required by this extension (even if it is not used).\n- This extension uses other Firebase and Google Cloud Platform services, which have associated charges if you exceed the service’s no-cost tier:\n  - Cloud Storage\n  - Cloud Functions (Node.js 10+ runtime. [See FAQs](https://firebase.google.com/support/faq#extensions-pricing))\n","postinstallContent":"### See it in action\n\nYou can test out this extension right away!\n\n1. Create an operations list, for example:\n\n```js\nconst operations = [\n  {\n    operation: 'input',\n    type: 'url',\n    url: 'https://images.unsplash.com/photo-1663659552548-25d7771802c9?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=774&q=80',\n  },\n  {\n    operation: 'grayscale',\n  },\n  {\n    operation: 'output',\n    format: 'webp',\n  },\n];\n```\n\n2. Stringify and encode the list:\n\n```js\nencodeURIComponent(JSON.stringify(operations));\n```\n\n3. Call the deployed `process` Cloud Function:\n\n[https://${param:LOCATION}-${param:PROJECT_ID}.cloudfunctions.net/ext-${param:EXT_INSTANCE_ID}-handler/process?operations=%5B%7B%22operation%22%3A%22input%22%2C%22type%22%3A%22url%22%2C%22url%22%3A%22https%3A%2F%2Fimages.unsplash.com%2Fphoto-1663659552548-25d7771802c9%3Fixlib%3Drb-1.2.1%26ixid%3DMnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8%26auto%3Dformat%26fit%3Dcrop%26w%3D774%26q%3D80%22%7D%2C%7B%22operation%22%3A%22grayscale%22%7D%2C%7B%22operation%22%3A%22output%22%2C%22format%22%3A%22webp%22%7D%5D](https://${param:LOCATION}-${param:PROJECT_ID}.cloudfunctions.net/ext-${param:EXT_INSTANCE_ID}-handler/process?operations=%5B%7B%22operation%22%3A%22input%22%2C%22type%22%3A%22url%22%2C%22url%22%3A%22https%3A%2F%2Fimages.unsplash.com%2Fphoto-1663659552548-25d7771802c9%3Fixlib%3Drb-1.2.1%26ixid%3DMnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8%26auto%3Dformat%26fit%3Dcrop%26w%3D774%26q%3D80%22%7D%2C%7B%22operation%22%3A%22grayscale%22%7D%2C%7B%22operation%22%3A%22output%22%2C%22format%22%3A%22webp%22%7D%5D)\n\nThe result will be a grayscaled version of the image, in WebP format.\n\n### Using the extension\n\nSee the [official documentation](https://extensions.invertase.dev/image-processing-api) for more information on using the extension, including the full list of supported operations you can use.\n\n### Monitoring\n\nAs a best practice, you can [monitor the activity](https://firebase.google.com/docs/extensions/manage-installed-extensions#monitor) of your installed extension, including checks on its health, usage, and logs.\n","readmeContent":"# Image Processing API\n\n**Author**: Invertase (**[https://invertase.io](https://invertase.io)**)\n\n**Description**: Use this extension to optimize and transform images via a powerful HTTP API with over 30 different image operations to enhance and manipulate your images.\n\n**Details**: # Image Processing Extension\nUse this extension to optimize and transform images via a powerful HTTP API with over 30 image operations for enhancing and manipulating your images.\n\n## How It Works\n\nWhen you install this extension, it deploys a Cloud Function that exposes an HTTP API. All requests must be sent to the /process endpoint of the function. You perform image operations by passing an operations query parameter—a URL-encoded JSON string defining the operations to execute.\n\n### Example\n\nDefine your operations like so:\n\n```js\nconst operations = [\n  {\n    operation: 'input',\n    type: 'url',\n    url: 'https://example.com/image.jpg',\n  },\n  {\n    operation: 'grayscale',\n  },\n  {\n    operation: 'output',\n    format: 'webp',\n  },\n];\n\nconst params = `?operations=${encodeURIComponent(JSON.stringify(operations))}`;\n```\n\nThen, make your GET request to your Cloud Function using the correct endpoint. For example:\n\n```\nhttps://<your-configured-region>-<your-project-id>.cloudfunctions.net/<extension-instance-id>/process${params}\n```\n\nThe extension also comes with a JavaScript utility library for simplifying the creation of operations:\n\n```ts\nimport { builder } from '@invertase/image-processing-api';\n\nconst output = builder()\n  .input({\n    url: 'https://example.com/image.jpg',\n  })\n  .grayscale()\n  .output({\n    format: 'webp',\n  });\n\nconst params = `?operations=${output.toEncodedJSONString()}`;\n```\n\nView the [official documentation](https://extensions.invertase.dev/image-processing-api) for full usage examples.\n\n### Relative paths\n\nThe extension provides a hostname parameter, allowing you to query the function with local paths (starting with `/`).\n\nAs an example, if we set the hostname parameter to \"example.com\" then the following operation:\n\n```js\nconst operations = [\n  {\n    operation: 'input',\n    type: 'url',\n    url: '/image.jpg',\n  },\n  {\n    operation: 'grayscale',\n  },\n  {\n    operation: 'output',\n    format: 'webp',\n  },\n];\n```\n\nis equivalent to the earlier given example. The url `https://example.com/image.jpg` is constructed within the extension.\n\nNote that this will **only** apply to paths that begin with a forward slash `/`, and **only** when the hostname parameter is set.\n\n#### Additional setup\n\nBefore installing this extension, make sure that you've [set up a Cloud Storage bucket](https://firebase.google.com/docs/storage) in your Firebase project.\n\n#### Billing\n\nTo install an extension, your project must be on the [Blaze (pay as you go) plan](https://firebase.google.com/pricing)\n\n- You will be charged a small amount (typically around $0.01/month) for the Firebase resources required by this extension (even if it is not used).\n- This extension uses other Firebase and Google Cloud Platform services, which have associated charges if you exceed the service’s no-cost tier:\n  - Cloud Storage\n  - Cloud Functions (Node.js 10+ runtime. [See FAQs](https://firebase.google.com/support/faq#extensions-pricing))\n\n**Configuration Parameters:**\n\n- Cloud Functions location: Where do you want to deploy the functions created for this extension? You usually want a location close to your Storage bucket. For help selecting a location, refer to the [location selection guide](https://firebase.google.com/docs/functions/locations).\n\n- Cloud Storage bucket for images: The Cloud Storage bucket where images that are to be processed are located. API requests with input urls or paths that are not inside this bucket will be dropped.\n\n- Allowed CORS origins: A comma delimited value of allowed CORS origins. Use the default of '\\*' to allow all origins. This is useful to lockdown your API and only allow your own website to embed the images directly. Note this will not prevent non-browser requests from accessing your API.\n\n- Hostname: An optional hostname to fetch images from. This can used to construct the original image URL in the response. Include ONLY the hostname, without any protocol or path. The protocol https:// will be added automatically. This parameter is needed if you would like to query using local path names such as /my/image.jpg. instead of the full URL.\n\n**Cloud Functions:**\n\n- **handler:** Serves a API accepting incoming HTTP requests.\n\n**APIs Used**:\n\n- storage-component.googleapis.com (Reason: Needed to use Cloud Storage)\n\n**Access Required**:\n\nThis extension will operate with the following project IAM roles:\n\n- storage.admin (Reason: Allows the extension to read images in Cloud Storage)\n","displayName":"Image Processing API"},"fetchTime":"2025-04-03T16:10:15.973372Z","lastOperationName":"projects/invertase-firebase-extensions/operations/443dc71d-01a6-4640-a13c-51448d5c4de1","state":"ACTIVE"},"params":{"CLOUD_STORAGE_BUCKET":"website-5a18c.firebasestorage.app","CORS_ORIGIN_ALLOW_LIST":"*","LOCATION":"europe-west3"},"populatedPostinstallContent":"### See it in action\n\nYou can test out this extension right away!\n\n1. Create an operations list, for example:\n\n```js\nconst operations = [\n  {\n    operation: 'input',\n    type: 'url',\n    url: 'https://images.unsplash.com/photo-1663659552548-25d7771802c9?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=774&q=80',\n  },\n  {\n    operation: 'grayscale',\n  },\n  {\n    operation: 'output',\n    format: 'webp',\n  },\n];\n```\n\n2. Stringify and encode the list:\n\n```js\nencodeURIComponent(JSON.stringify(operations));\n```\n\n3. Call the deployed `process` Cloud Function:\n\n[https://europe-west3-website-5a18c.cloudfunctions.net/ext-image-processing-api-handler/process?operations=%5B%7B%22operation%22%3A%22input%22%2C%22type%22%3A%22url%22%2C%22url%22%3A%22https%3A%2F%2Fimages.unsplash.com%2Fphoto-1663659552548-25d7771802c9%3Fixlib%3Drb-1.2.1%26ixid%3DMnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8%26auto%3Dformat%26fit%3Dcrop%26w%3D774%26q%3D80%22%7D%2C%7B%22operation%22%3A%22grayscale%22%7D%2C%7B%22operation%22%3A%22output%22%2C%22format%22%3A%22webp%22%7D%5D](https://europe-west3-website-5a18c.cloudfunctions.net/ext-image-processing-api-handler/process?operations=%5B%7B%22operation%22%3A%22input%22%2C%22type%22%3A%22url%22%2C%22url%22%3A%22https%3A%2F%2Fimages.unsplash.com%2Fphoto-1663659552548-25d7771802c9%3Fixlib%3Drb-1.2.1%26ixid%3DMnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8%26auto%3Dformat%26fit%3Dcrop%26w%3D774%26q%3D80%22%7D%2C%7B%22operation%22%3A%22grayscale%22%7D%2C%7B%22operation%22%3A%22output%22%2C%22format%22%3A%22webp%22%7D%5D)\n\nThe result will be a grayscaled version of the image, in WebP format.\n\n### Using the extension\n\nSee the [official documentation](https://extensions.invertase.dev/image-processing-api) for more information on using the extension, including the full list of supported operations you can use.\n\n### Monitoring\n\nAs a best practice, you can [monitor the activity](https://firebase.google.com/docs/extensions/manage-installed-extensions#monitor) of your installed extension, including checks on its health, usage, and logs.\n","extensionRef":"invertase/image-processing-api","extensionVersion":"0.2.1","systemParams":{"firebaseextensions.v1beta.function/minInstances":"0","firebaseextensions.v1beta.function/vpcConnectorEgressSettings":"VPC_CONNECTOR_EGRESS_SETTINGS_UNSPECIFIED"}},"lastOperationName":"projects/website-5a18c/operations/e622a0be-0e1a-44cc-aefe-0a3a8c5bfe4c","serviceAccountEmail":"ext-image-processing-api@website-5a18c.iam.gserviceaccount.com","lastOperationType":"CREATE","etag":"1cfc037ee3e595627a0a1255b18d3e691ad149429459bde03adf427ae0b1aef7"}]}
[debug] [2025-07-16T21:32:24.120Z] Failed to validate key FIREBASE_ADMIN_TYPE: Error: Key FIREBASE_ADMIN_TYPE starts with a reserved prefix (X_GOOGLE_ FIREBASE_ EXT_)
[debug] [2025-07-16T21:32:24.123Z] Failed to validate key FIREBASE_ADMIN_PRIVATE_KEY_ID: Error: Key FIREBASE_ADMIN_PRIVATE_KEY_ID starts with a reserved prefix (X_GOOGLE_ FIREBASE_ EXT_)
[debug] [2025-07-16T21:32:24.123Z] Failed to validate key FIREBASE_ADMIN_PRIVATE_KEY: Error: Key FIREBASE_ADMIN_PRIVATE_KEY starts with a reserved prefix (X_GOOGLE_ FIREBASE_ EXT_)
[debug] [2025-07-16T21:32:24.123Z] Failed to validate key FIREBASE_ADMIN_CLIENT_EMAIL: Error: Key FIREBASE_ADMIN_CLIENT_EMAIL starts with a reserved prefix (X_GOOGLE_ FIREBASE_ EXT_)
[debug] [2025-07-16T21:32:24.123Z] Failed to validate key FIREBASE_ADMIN_CLIENT_ID: Error: Key FIREBASE_ADMIN_CLIENT_ID starts with a reserved prefix (X_GOOGLE_ FIREBASE_ EXT_)
[debug] [2025-07-16T21:32:24.123Z] Failed to validate key FIREBASE_ADMIN_AUTH_URI: Error: Key FIREBASE_ADMIN_AUTH_URI starts with a reserved prefix (X_GOOGLE_ FIREBASE_ EXT_)
[debug] [2025-07-16T21:32:24.124Z] Failed to validate key FIREBASE_ADMIN_TOKEN_URI: Error: Key FIREBASE_ADMIN_TOKEN_URI starts with a reserved prefix (X_GOOGLE_ FIREBASE_ EXT_)
[debug] [2025-07-16T21:32:24.124Z] Failed to validate key FIREBASE_ADMIN_AUTH_PROVIDER_X509_CERT_URL: Error: Key FIREBASE_ADMIN_AUTH_PROVIDER_X509_CERT_URL starts with a reserved prefix (X_GOOGLE_ FIREBASE_ EXT_)
[debug] [2025-07-16T21:32:24.124Z] Failed to validate key FIREBASE_ADMIN_CLIENT_X509_CERT_URL: Error: Key FIREBASE_ADMIN_CLIENT_X509_CERT_URL starts with a reserved prefix (X_GOOGLE_ FIREBASE_ EXT_)
[error] Error: Failed to load environment variables from .env.:
[error] - Error Key FIREBASE_ADMIN_TYPE starts with a reserved prefix (X_GOOGLE_ FIREBASE_ EXT_)
[error] - Error Key FIREBASE_ADMIN_PRIVATE_KEY_ID starts with a reserved prefix (X_GOOGLE_ FIREBASE_ EXT_)
[error] - Error Key FIREBASE_ADMIN_PRIVATE_KEY starts with a reserved prefix (X_GOOGLE_ FIREBASE_ EXT_)
[error] - Error Key FIREBASE_ADMIN_CLIENT_EMAIL starts with a reserved prefix (X_GOOGLE_ FIREBASE_ EXT_)
[error] - Error Key FIREBASE_ADMIN_CLIENT_ID starts with a reserved prefix (X_GOOGLE_ FIREBASE_ EXT_)
[error] - Error Key FIREBASE_ADMIN_AUTH_URI starts with a reserved prefix (X_GOOGLE_ FIREBASE_ EXT_)
[error] - Error Key FIREBASE_ADMIN_TOKEN_URI starts with a reserved prefix (X_GOOGLE_ FIREBASE_ EXT_)
[error] - Error Key FIREBASE_ADMIN_AUTH_PROVIDER_X509_CERT_URL starts with a reserved prefix (X_GOOGLE_ FIREBASE_ EXT_)
[error] - Error Key FIREBASE_ADMIN_CLIENT_X509_CERT_URL starts with a reserved prefix (X_GOOGLE_ FIREBASE_ EXT_)
[debug] [2025-07-16T21:34:48.114Z] ----------------------------------------------------------------------
[debug] [2025-07-16T21:34:48.120Z] Command:       /nix/store/rbdrkcs5kkwpalxcd7c6bnm33lk2955n-nodejs-20.19.0/bin/node /home/user/.global_modules/bin/firebase deploy --only hosting --project=website-5a18c
[debug] [2025-07-16T21:34:48.121Z] CLI Version:   14.10.1
[debug] [2025-07-16T21:34:48.121Z] Platform:      linux
[debug] [2025-07-16T21:34:48.121Z] Node Version:  v20.19.0
[debug] [2025-07-16T21:34:48.121Z] Time:          Wed Jul 16 2025 21:34:48 GMT+0000 (Coordinated Universal Time)
[debug] [2025-07-16T21:34:48.122Z] ----------------------------------------------------------------------
[debug] 
[debug] [2025-07-16T21:34:48.683Z] Object "/hosting" in "firebase.json" has unknown property: {"additionalProperty":"webFrameworks"}
[debug] [2025-07-16T21:34:48.684Z] Field "/hosting" in "firebase.json" is possibly invalid: must be array
[debug] [2025-07-16T21:34:48.685Z] Field "/hosting" in "firebase.json" is possibly invalid: must match a schema in anyOf
[debug] [2025-07-16T21:34:48.690Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2025-07-16T21:34:48.691Z] > authorizing via signed-in user (bakirbehmen@gmail.com)
[debug] [2025-07-16T21:34:48.691Z] [iam] checking project website-5a18c for permissions ["firebase.projects.get","firebasehosting.sites.update"]
[debug] [2025-07-16T21:34:48.693Z] Checked if tokens are valid: true, expires at: 1752703517880
[debug] [2025-07-16T21:34:48.694Z] Checked if tokens are valid: true, expires at: 1752703517880
[debug] [2025-07-16T21:34:48.696Z] >>> [apiv2][query] POST https://cloudresourcemanager.googleapis.com/v1/projects/website-5a18c:testIamPermissions [none]
[debug] [2025-07-16T21:34:48.696Z] >>> [apiv2][(partial)header] POST https://cloudresourcemanager.googleapis.com/v1/projects/website-5a18c:testIamPermissions x-goog-quota-user=projects/website-5a18c
[debug] [2025-07-16T21:34:48.697Z] >>> [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/website-5a18c:testIamPermissions {"permissions":["firebase.projects.get","firebasehosting.sites.update"]}
[debug] [2025-07-16T21:34:49.459Z] <<< [apiv2][status] POST https://cloudresourcemanager.googleapis.com/v1/projects/website-5a18c:testIamPermissions 200
[debug] [2025-07-16T21:34:49.459Z] <<< [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/website-5a18c:testIamPermissions {"permissions":["firebase.projects.get","firebasehosting.sites.update"]}
[debug] [2025-07-16T21:34:49.461Z] Checked if tokens are valid: true, expires at: 1752703517880
[debug] [2025-07-16T21:34:49.461Z] Checked if tokens are valid: true, expires at: 1752703517880
[debug] [2025-07-16T21:34:49.462Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/website-5a18c [none]
[debug] [2025-07-16T21:34:49.662Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/website-5a18c 200
[debug] [2025-07-16T21:34:49.663Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/website-5a18c {"projectId":"website-5a18c","projectNumber":"636702053767","displayName":"website","name":"projects/website-5a18c","resources":{"hostingSite":"website-5a18c"},"state":"ACTIVE","etag":"1_a6122a7f-7df1-4ea8-844b-57f64ef44324"}
[debug] [2025-07-16T21:34:55.304Z] defaultcredentials: writing to file /home/user/.config/firebase/bakirbehmen_gmail_com_application_default_credentials.json
[debug] [2025-07-16T21:34:55.320Z] Checked if tokens are valid: true, expires at: 1752703517880
[debug] [2025-07-16T21:34:55.324Z] Checked if tokens are valid: true, expires at: 1752703517880
[debug] [2025-07-16T21:34:55.325Z] >>> [apiv2][query] GET https://firebasehosting.googleapis.com/v1beta1/projects/website-5a18c/sites pageToken=&pageSize=10
[debug] [2025-07-16T21:34:56.368Z] <<< [apiv2][status] GET https://firebasehosting.googleapis.com/v1beta1/projects/website-5a18c/sites 200
[debug] [2025-07-16T21:34:56.368Z] <<< [apiv2][body] GET https://firebasehosting.googleapis.com/v1beta1/projects/website-5a18c/sites {"sites":[{"name":"projects/website-5a18c/sites/website-5a18c","defaultUrl":"https://website-5a18c.web.app","appId":"1:636702053767:web:0de2259025db8c0bbd6f22","type":"DEFAULT_SITE"}]}
[debug] [2025-07-16T21:34:56.369Z] Checked if tokens are valid: true, expires at: 1752703517880
[debug] [2025-07-16T21:34:56.369Z] Checked if tokens are valid: true, expires at: 1752703517880
[debug] [2025-07-16T21:34:56.369Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/-/webApps/1:636702053767:web:0de2259025db8c0bbd6f22/config [none]
[debug] [2025-07-16T21:34:56.872Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/-/webApps/1:636702053767:web:0de2259025db8c0bbd6f22/config 200
[debug] [2025-07-16T21:34:56.876Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/-/webApps/1:636702053767:web:0de2259025db8c0bbd6f22/config {"projectId":"website-5a18c","appId":"1:636702053767:web:0de2259025db8c0bbd6f22","storageBucket":"website-5a18c.firebasestorage.app","apiKey":"AIzaSyDxwAQf6RX8UHlbjPpnjMVX-0jS85K3bvw","authDomain":"website-5a18c.firebaseapp.com","messagingSenderId":"636702053767","measurementId":"G-WGPRNHDM9Q"}
[info] 
   Thank you for trying our early preview of Next.js support on Firebase Hosting.
   During the preview, support is best-effort and breaking changes can be expected. Proceed with caution.
   The integration is known to work with Next.js version 12 - 15.0. You may encounter errors.

   Documentation: https://firebase.google.com/docs/hosting/frameworks/nextjs
   File a bug: https://github.com/firebase/firebase-tools/issues/new?template=bug_report.md
   Submit a feature request: https://github.com/firebase/firebase-tools/issues/new?template=feature_request.md

   We'd love to learn from you. Express your interest in helping us shape the future of Firebase Hosting: https://goo.gle/41enW5X

[debug] [2025-07-16T21:35:14.003Z] Checked if tokens are valid: true, expires at: 1752703517880
[debug] [2025-07-16T21:35:14.008Z] Checked if tokens are valid: true, expires at: 1752703517880
[debug] [2025-07-16T21:35:14.008Z] >>> [apiv2][query] GET https://firebasehosting.googleapis.com/v1beta1/projects/website-5a18c/sites/website-5a18c [none]
[debug] [2025-07-16T21:35:14.980Z] <<< [apiv2][status] GET https://firebasehosting.googleapis.com/v1beta1/projects/website-5a18c/sites/website-5a18c 200
[debug] [2025-07-16T21:35:14.984Z] <<< [apiv2][body] GET https://firebasehosting.googleapis.com/v1beta1/projects/website-5a18c/sites/website-5a18c {"name":"projects/website-5a18c/sites/website-5a18c","defaultUrl":"https://website-5a18c.web.app","appId":"1:636702053767:web:0de2259025db8c0bbd6f22","type":"DEFAULT_SITE"}
[info]    ▲ Next.js 15.3.3
   - Environments: .env.local, .env

[info] 

[info]    Creating an optimized production build ...

[info]  ✓ Compiled successfully in 10.0s

[info]    Skipping validation of types

[info]    Skipping linting

[info]    Collecting page data ...

[info]    Generating static pages (0/6) ...

[info]    Generating static pages (1/6) 

[info]    Generating static pages (2/6) 
   Generating static pages (4/6) 
 ✓ Generating static pages (6/6)

[info]    Finalizing page optimization ...
   Collecting build traces ...

[info] 

[info] Route (app)                                 Size  First Load JS
┌ ○ /_not-found                            978 B         102 kB
└ ● /[lng]                               35.8 kB         157 kB
    ├ /sr
    └ /en
+ First Load JS shared by all             101 kB
  ├ chunks/4bd1b696-4419cc93057fcf32.js  53.2 kB
  ├ chunks/684-7002d2f60d48787d.js         46 kB
  └ other shared chunks (total)          2.03 kB


ƒ Middleware                             32.3 kB

[info] 
○  (Static)  prerendered as static content
●  (SSG)     prerendered as static HTML (uses generateStaticParams)


[info] Building a Cloud Function to run this application. This is needed due to:
[info]  • middleware
[info]  • use of fallback /[lng]
[info] 
[debug] [2025-07-16T21:36:57.576Z] skipping /en due to it matching an unsupported rewrite/redirect/header or middlware
[debug] [2025-07-16T21:36:57.577Z] skipping /sr due to it matching an unsupported rewrite/redirect/header or middlware
[debug] [2025-07-16T21:36:57.577Z] skipping /404 due to it matching an unsupported rewrite/redirect/header or middlware
[debug] [2025-07-16T21:36:58.003Z] Checked if tokens are valid: true, expires at: 1752703517880
[debug] [2025-07-16T21:36:58.004Z] Checked if tokens are valid: true, expires at: 1752703517880
[debug] [2025-07-16T21:36:58.004Z] >>> [apiv2][query] GET https://firebasehosting.googleapis.com/v1beta1/projects/website-5a18c/sites/website-5a18c [none]
[debug] [2025-07-16T21:36:58.973Z] <<< [apiv2][status] GET https://firebasehosting.googleapis.com/v1beta1/projects/website-5a18c/sites/website-5a18c 200
[debug] [2025-07-16T21:36:58.975Z] <<< [apiv2][body] GET https://firebasehosting.googleapis.com/v1beta1/projects/website-5a18c/sites/website-5a18c {"name":"projects/website-5a18c/sites/website-5a18c","defaultUrl":"https://website-5a18c.web.app","appId":"1:636702053767:web:0de2259025db8c0bbd6f22","type":"DEFAULT_SITE"}
[debug] [2025-07-16T21:37:14.912Z] [web frameworks] effective firebase.json:  {
  "hosting": [
    {
      "source": ".",
      "ignore": [
        "firebase.json",
        "**/.*",
        "**/node_modules/**"
      ],
      "rewrites": [
        {
          "source": "**",
          "function": {
            "functionId": "_next"
          }
        },
        {
          "source": "/**",
          "function": {
            "functionId": "ssrwebsite5a18c",
            "region": "us-central1",
            "pinTag": true
          }
        }
      ],
      "webFrameworks": {
        "region": "europe-west1"
      },
      "site": "website-5a18c",
      "redirects": [],
      "headers": [
        {
          "source": "/_not-found",
          "headers": [
            {
              "key": "x-nextjs-stale-time",
              "value": "300"
            },
            {
              "key": "x-nextjs-prerender",
              "value": "1"
            },
            {
              "key": "x-next-cache-tags",
              "value": "_N_T_/layout,_N_T_/_not-found/layout,_N_T_/_not-found/page,_N_T_/_not-found"
            }
          ]
        },
        {
          "source": "/favicon.ico",
          "headers": [
            {
              "key": "cache-control",
              "value": "public, max-age=0, must-revalidate"
            },
            {
              "key": "content-type",
              "value": "image/x-icon"
            },
            {
              "key": "x-next-cache-tags",
              "value": "_N_T_/layout,_N_T_/favicon.ico/layout,_N_T_/favicon.ico/route,_N_T_/favicon.ico"
            }
          ]
        },
        {
          "source": "/**/*.[jt]s",
          "headers": [
            {
              "key": "Set-Cookie",
              "value": "__FIREBASE_DEFAULTS__=eyJjb25maWciOnsicHJvamVjdElkIjoid2Vic2l0ZS01YTE4YyIsImFwcElkIjoiMTo2MzY3MDIwNTM3Njc6d2ViOjBkZTIyNTkwMjVkYjhjMGJiZDZmMjIiLCJzdG9yYWdlQnVja2V0Ijoid2Vic2l0ZS01YTE4Yy5maXJlYmFzZXN0b3JhZ2UuYXBwIiwiYXBpS2V5IjoiQUl6YVN5RHh3QVFmNlJYOFVIbGJqUHBuak1WWC0walM4NUszYnZ3IiwiYXV0aERvbWFpbiI6IndlYnNpdGUtNWExOGMuZmlyZWJhc2VhcHAuY29tIiwibWVzc2FnaW5nU2VuZGVySWQiOiI2MzY3MDIwNTM3NjciLCJtZWFzdXJlbWVudElkIjoiRy1XR1BSTkhETTlRIn0sIl9hdXRoVG9rZW5TeW5jVVJMIjoiL19fc2Vzc2lvbiJ9; SameSite=Strict; Expires=2027-06-11T08:17:14.912Z; Path=/;"
            }
          ]
        }
      ],
      "cleanUrls": true,
      "trailingSlash": false,
      "public": ".firebase/website-5a18c/hosting",
      "webFramework": "next_ssr"
    }
  ],
  "functions": [
    {
      "source": ".firebase/website-5a18c/functions",
      "codebase": "firebase-frameworks-website-5a18c"
    }
  ]
}
[debug] [2025-07-16T21:37:14.915Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2025-07-16T21:37:14.917Z] > authorizing via signed-in user (bakirbehmen@gmail.com)
[debug] [2025-07-16T21:37:14.919Z] [iam] checking project website-5a18c for permissions ["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]
[debug] [2025-07-16T21:37:14.919Z] Checked if tokens are valid: true, expires at: 1752703517880
[debug] [2025-07-16T21:37:14.920Z] Checked if tokens are valid: true, expires at: 1752703517880
[debug] [2025-07-16T21:37:14.920Z] >>> [apiv2][query] POST https://cloudresourcemanager.googleapis.com/v1/projects/website-5a18c:testIamPermissions [none]
[debug] [2025-07-16T21:37:14.920Z] >>> [apiv2][(partial)header] POST https://cloudresourcemanager.googleapis.com/v1/projects/website-5a18c:testIamPermissions x-goog-quota-user=projects/website-5a18c
[debug] [2025-07-16T21:37:14.920Z] >>> [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/website-5a18c:testIamPermissions {"permissions":["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]}
[debug] [2025-07-16T21:37:15.586Z] <<< [apiv2][status] POST https://cloudresourcemanager.googleapis.com/v1/projects/website-5a18c:testIamPermissions 200
[debug] [2025-07-16T21:37:15.588Z] <<< [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/website-5a18c:testIamPermissions {"permissions":["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]}
[debug] [2025-07-16T21:37:15.592Z] Checked if tokens are valid: true, expires at: 1752703517880
[debug] [2025-07-16T21:37:15.592Z] Checked if tokens are valid: true, expires at: 1752703517880
[debug] [2025-07-16T21:37:15.592Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v1/projects/website-5a18c/locations/-/functions [none]
[debug] [2025-07-16T21:37:16.182Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v1/projects/website-5a18c/locations/-/functions 200
[debug] [2025-07-16T21:37:16.183Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v1/projects/website-5a18c/locations/-/functions {"functions":[{"name":"projects/website-5a18c/locations/europe-west3/functions/ext-image-processing-api-handler","description":"Serves a API accepting incoming HTTP requests.","sourceArchiveUrl":"gs://firebase-mod-sources-prod/2137a7fadcc867f26a3d8015133f2ab19c2f60dd35bd2ec8facf4e1f04e61232","httpsTrigger":{"url":"https://europe-west3-website-5a18c.cloudfunctions.net/ext-image-processing-api-handler","securityLevel":"SECURE_OPTIONAL"},"status":"ACTIVE","entryPoint":"handler","timeout":"60s","availableMemoryMb":1024,"serviceAccountEmail":"ext-image-processing-api@website-5a18c.iam.gserviceaccount.com","updateTime":"2025-07-14T04:37:55.941Z","versionId":"2","labels":{"goog-firebase-ext-iid":"image-processing-api","firebase-extensions-ar":"enabled","goog-dm":"firebase-ext-image-processing-api","goog-firebase-ext":"image-processing-api","deployment-tool":"firebase-extensions"},"environmentVariables":{"CLOUD_STORAGE_BUCKET":"website-5a18c.firebasestorage.app","CORS_ORIGIN_ALLOW_LIST":"*","DATABASE_INSTANCE":"","DATABASE_URL":"","EXT_INSTANCE_ID":"image-processing-api","FIREBASE_CONFIG":"{\"projectId\":\"website-5a18c\",\"databaseURL\":\"\",\"storageBucket\":\"website-5a18c.firebasestorage.app\"}","GCLOUD_PROJECT":"website-5a18c","LOCATION":"europe-west3","PROJECT_ID":"website-5a18c","STORAGE_BUCKET":"website-5a18c.firebasestorage.app"},"runtime":"nodejs20","ingressSettings":"ALLOW_ALL","buildId":"f18bca3c-f1f5-4477-90f4-e5e6e741ebbc","buildEnvironmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"buildName":"projects/636702053767/locations/europe-west3/builds/f18bca3c-f1f5-4477-90f4-e5e6e741ebbc","dockerRegistry":"ARTIFACT_REGISTRY","automaticUpdatePolicy":{},"buildServiceAccount":"projects/website-5a18c/serviceAccounts/636702053767-compute@developer.gserviceaccount.com","satisfiesPzs":true,"satisfiesPzi":true}]}
[debug] [2025-07-16T21:37:16.199Z] Checked if tokens are valid: true, expires at: 1752703517880
[debug] [2025-07-16T21:37:16.199Z] Checked if tokens are valid: true, expires at: 1752703517880
[debug] [2025-07-16T21:37:16.200Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/website-5a18c/locations/-/functions filter=environment%3D%22GEN_2%22
[debug] [2025-07-16T21:37:17.193Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/website-5a18c/locations/-/functions 200
[debug] [2025-07-16T21:37:17.194Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/website-5a18c/locations/-/functions {"functions":[{"name":"projects/website-5a18c/locations/us-central1/functions/ssrwebsite5a18c","buildConfig":{"build":"projects/636702053767/locations/us-central1/builds/d8dc5e1a-ecb9-4b6c-afee-a6e3c624b3a3","runtime":"nodejs20","entryPoint":"ssrwebsite5a18c","source":{"storageSource":{"bucket":"gcf-v2-sources-636702053767-us-central1","object":"ssrwebsite5a18c/function-source.zip","generation":"1752466812219058"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/website-5a18c/locations/us-central1/repositories/gcf-artifacts","sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-636702053767-us-central1","object":"ssrwebsite5a18c/function-source.zip","generation":"1752466812219058"}},"dockerRegistry":"ARTIFACT_REGISTRY","serviceAccount":"projects/website-5a18c/serviceAccounts/636702053767-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/website-5a18c/locations/us-central1/services/ssrwebsite5a18c","timeoutSeconds":60,"environmentVariables":{"GEMINI_API_KEY":"","NEXT_PUBLIC_FIREBASE_API_KEY":"AIzaSyDxwAQf6RX8UHlbjPpnjMVX-0jS85K3bvw","NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN":"website-5a18c.firebaseapp.com","NEXT_PUBLIC_FIREBASE_PROJECT_ID":"website-5a18c","NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET":"website-5a18c.appspot.com","NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID":"636702053767","NEXT_PUBLIC_FIREBASE_APP_ID":"1:636702053767:web:0de2259025db8c0bbd6f22","NEXT_PUBLIC_FIREBASE_MEASUREMENT_ID":"G-WGPRNHDM9Q","VERCEL_URL":"website-5a18c.web.app","__FIREBASE_FRAMEWORKS_ENTRY__":"next.js","__FIREBASE_DEFAULTS__":"{\"config\":{\"projectId\":\"website-5a18c\",\"appId\":\"1:636702053767:web:0de2259025db8c0bbd6f22\",\"storageBucket\":\"website-5a18c.firebasestorage.app\",\"apiKey\":\"AIzaSyDxwAQf6RX8UHlbjPpnjMVX-0jS85K3bvw\",\"authDomain\":\"website-5a18c.firebaseapp.com\",\"messagingSenderId\":\"636702053767\",\"measurementId\":\"G-WGPRNHDM9Q\"},\"_authTokenSyncURL\":\"/__session\"}","FIREBASE_CONFIG":"{\"projectId\":\"website-5a18c\",\"storageBucket\":\"website-5a18c.firebasestorage.app\"}","GCLOUD_PROJECT":"website-5a18c","EVENTARC_CLOUD_EVENT_SOURCE":"projects/website-5a18c/locations/us-central1/services/ssrwebsite5a18c","FUNCTION_TARGET":"ssrwebsite5a18c","LOG_EXECUTION_ID":"true"},"maxInstanceCount":20,"ingressSettings":"ALLOW_ALL","uri":"https://ssrwebsite5a18c-hr7gf53sqq-uc.a.run.app","serviceAccountEmail":"636702053767-compute@developer.gserviceaccount.com","availableMemory":"256Mi","allTrafficOnLatestRevision":true,"revision":"ssrwebsite5a18c-00001-rey","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"state":"ACTIVE","updateTime":"2025-07-14T04:22:57.557138708Z","labels":{"deployment-tool":"cli-firebase--project-idx","firebase-functions-codebase":"firebase-frameworks-website-5a18c","firebase-functions-hash":"d1a9c72cc15bd8e5dc8545c81251e01b59363f8d"},"environment":"GEN_2","url":"https://us-central1-website-5a18c.cloudfunctions.net/ssrwebsite5a18c","createTime":"2025-07-14T04:20:12.455639447Z","satisfiesPzi":true}]}
[info] i  hosting: The following function(s) are pinned to site website-5a18c and will be deployed as well: ssrwebsite5a18c 
[info] 
[info] === Deploying to 'website-5a18c'...
[info] 
[info] i  deploying functions, hosting 
[debug] [2025-07-16T21:37:17.225Z] Checked if tokens are valid: true, expires at: 1752703517880
[debug] [2025-07-16T21:37:17.226Z] Checked if tokens are valid: true, expires at: 1752703517880
[debug] [2025-07-16T21:37:17.226Z] >>> [apiv2][query] GET https://cloudresourcemanager.googleapis.com/v1/projects/website-5a18c [none]
[debug] [2025-07-16T21:37:17.411Z] <<< [apiv2][status] GET https://cloudresourcemanager.googleapis.com/v1/projects/website-5a18c 200
[debug] [2025-07-16T21:37:17.412Z] <<< [apiv2][body] GET https://cloudresourcemanager.googleapis.com/v1/projects/website-5a18c {"projectNumber":"636702053767","projectId":"website-5a18c","lifecycleState":"ACTIVE","name":"website","labels":{"firebase":"enabled","firebase-core":"disabled","generative-language":"enabled"},"createTime":"2025-07-11T21:11:24.875257Z"}
[info] i  functions: preparing codebase firebase-frameworks-website-5a18c for deployment 
[info] i  functions: ensuring required API cloudfunctions.googleapis.com is enabled... 
[info] i  functions: ensuring required API cloudbuild.googleapis.com is enabled... 
[info] i  artifactregistry: ensuring required API artifactregistry.googleapis.com is enabled... 
[debug] [2025-07-16T21:37:17.432Z] Checked if tokens are valid: true, expires at: 1752703517880
[debug] [2025-07-16T21:37:17.436Z] Checked if tokens are valid: true, expires at: 1752703517880
[debug] [2025-07-16T21:37:17.437Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/website-5a18c/adminSdkConfig [none]
[debug] [2025-07-16T21:37:17.752Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/website-5a18c/adminSdkConfig 200
[debug] [2025-07-16T21:37:17.752Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/website-5a18c/adminSdkConfig {"projectId":"website-5a18c","storageBucket":"website-5a18c.firebasestorage.app"}
[debug] [2025-07-16T21:37:17.753Z] Checked if tokens are valid: true, expires at: 1752703517880
[debug] [2025-07-16T21:37:17.753Z] Checked if tokens are valid: true, expires at: 1752703517880
[debug] [2025-07-16T21:37:17.758Z] >>> [apiv2][query] GET https://runtimeconfig.googleapis.com/v1beta1/projects/website-5a18c/configs [none]
[debug] [2025-07-16T21:37:18.008Z] <<< [apiv2][status] GET https://runtimeconfig.googleapis.com/v1beta1/projects/website-5a18c/configs 200
[debug] [2025-07-16T21:37:18.008Z] <<< [apiv2][body] GET https://runtimeconfig.googleapis.com/v1beta1/projects/website-5a18c/configs {}
[debug] [2025-07-16T21:37:18.026Z] Validating nodejs source
[debug] [2025-07-16T21:37:20.043Z] > [functions] package.json contents: {
  "name": "nextn",
  "version": "0.1.0",
  "private": true,
  "dependencies": {
    "@genkit-ai/googleai": "^1.13.0",
    "@hookform/resolvers": "^4.1.3",
    "@radix-ui/react-accordion": "^1.2.3",
    "@radix-ui/react-alert-dialog": "^1.1.6",
    "@radix-ui/react-avatar": "^1.1.3",
    "@radix-ui/react-checkbox": "^1.1.4",
    "@radix-ui/react-collapsible": "^1.1.11",
    "@radix-ui/react-dialog": "^1.1.6",
    "@radix-ui/react-dropdown-menu": "^2.1.6",
    "@radix-ui/react-label": "^2.1.2",
    "@radix-ui/react-menubar": "^1.1.6",
    "@radix-ui/react-popover": "^1.1.6",
    "@radix-ui/react-progress": "^1.1.2",
    "@radix-ui/react-radio-group": "^1.2.3",
    "@radix-ui/react-scroll-area": "^1.2.3",
    "@radix-ui/react-select": "^2.1.6",
    "@radix-ui/react-separator": "^1.1.2",
    "@radix-ui/react-slider": "^1.2.3",
    "@radix-ui/react-slot": "^1.2.3",
    "@radix-ui/react-switch": "^1.1.3",
    "@radix-ui/react-tabs": "^1.1.3",
    "@radix-ui/react-toast": "^1.2.6",
    "@radix-ui/react-tooltip": "^1.1.8",
    "class-variance-authority": "^0.7.1",
    "clsx": "^2.1.1",
    "date-fns": "^3.6.0",
    "dotenv": "^16.5.0",
    "embla-carousel-react": "^8.6.0",
    "firebase": "^11.10.0",
    "firebase-admin": "^13.4.0",
    "genkit": "^1.13.0",
    "i18next": "^25.3.2",
    "i18next-browser-languagedetector": "^8.2.0",
    "i18next-resources-to-backend": "^1.2.1",
    "lucide-react": "^0.475.0",
    "next": "15.3.3",
    "react": "^18.3.1",
    "react-cookie": "^8.0.1",
    "react-day-picker": "^8.10.1",
    "react-dom": "^18.3.1",
    "react-hook-form": "^7.54.2",
    "react-i18next": "^15.6.0",
    "recharts": "^2.15.1",
    "tailwind-merge": "^3.0.1",
    "tailwindcss-animate": "^1.0.7",
    "zod": "^3.24.2",
    "firebase-frameworks": "^0.11.0",
    "firebase-functions": "^6.0.1"
  },
  "main": "server.js",
  "engines": {
    "node": "20"
  }
}
[debug] [2025-07-16T21:37:20.044Z] Building nodejs source
[info] i  functions: Loading and analyzing source code for codebase firebase-frameworks-website-5a18c to determine what to deploy 
[debug] [2025-07-16T21:37:20.058Z] Could not find functions.yaml. Must use http discovery
[debug] [2025-07-16T21:37:20.078Z] Found firebase-functions binary at '/home/user/studio/.firebase/website-5a18c/functions/node_modules/.bin/firebase-functions'
[info] Serving at port 8450

[debug] [2025-07-16T21:37:21.857Z] Got response from /__/functions.yaml {"endpoints":{"ssrwebsite5a18c":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"httpsTrigger":{},"entryPoint":"ssrwebsite5a18c"}},"specVersion":"v1alpha1","requiredAPIs":[],"extensions":{}}
[info] i  extensions: ensuring required API firebaseextensions.googleapis.com is enabled... 
[debug] [2025-07-16T21:37:26.018Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2025-07-16T21:37:26.019Z] > authorizing via signed-in user (bakirbehmen@gmail.com)
[debug] [2025-07-16T21:37:26.019Z] [iam] checking project website-5a18c for permissions ["firebase.projects.get","firebaseextensions.instances.list"]
[debug] [2025-07-16T21:37:26.019Z] Checked if tokens are valid: true, expires at: 1752703517880
[debug] [2025-07-16T21:37:26.020Z] Checked if tokens are valid: true, expires at: 1752703517880
[debug] [2025-07-16T21:37:26.030Z] >>> [apiv2][query] POST https://cloudresourcemanager.googleapis.com/v1/projects/website-5a18c:testIamPermissions [none]
[debug] [2025-07-16T21:37:26.030Z] >>> [apiv2][(partial)header] POST https://cloudresourcemanager.googleapis.com/v1/projects/website-5a18c:testIamPermissions x-goog-quota-user=projects/website-5a18c
[debug] [2025-07-16T21:37:26.031Z] >>> [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/website-5a18c:testIamPermissions {"permissions":["firebase.projects.get","firebaseextensions.instances.list"]}
[debug] [2025-07-16T21:37:26.690Z] <<< [apiv2][status] POST https://cloudresourcemanager.googleapis.com/v1/projects/website-5a18c:testIamPermissions 200
[debug] [2025-07-16T21:37:26.691Z] <<< [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/website-5a18c:testIamPermissions {"permissions":["firebase.projects.get","firebaseextensions.instances.list"]}
[debug] [2025-07-16T21:37:26.692Z] Checked if tokens are valid: true, expires at: 1752703517880
[debug] [2025-07-16T21:37:26.692Z] Checked if tokens are valid: true, expires at: 1752703517880
[debug] [2025-07-16T21:37:26.693Z] >>> [apiv2][query] GET https://firebaseextensions.googleapis.com/v1beta/projects/website-5a18c/instances pageSize=100&pageToken=
[debug] [2025-07-16T21:37:27.524Z] <<< [apiv2][status] GET https://firebaseextensions.googleapis.com/v1beta/projects/website-5a18c/instances 200
[debug] [2025-07-16T21:37:27.524Z] <<< [apiv2][body] GET https://firebaseextensions.googleapis.com/v1beta/projects/website-5a18c/instances {"instances":[{"name":"projects/website-5a18c/instances/image-processing-api","createTime":"2025-07-14T04:33:14.381422Z","updateTime":"2025-07-14T04:38:24.129382Z","state":"ACTIVE","config":{"name":"projects/website-5a18c/instances/image-processing-api/configurations/1ecf0e78-380c-4b30-bf6f-36ead48313e2","createTime":"2025-07-14T04:33:14.381422Z","source":{"name":"projects/invertase-firebase-extensions/sources/8e80a7ef-0036-42b3-b829-9fab843715dd","packageUri":"https://storage.googleapis.com/firebase-extensions-packages-prod/invertase-image-processing-api-0.2.1-6ccff87e-84ec-40c2-a78c-bbfb629b2dd5.zip","hash":"5034d7302af64a6e98d4e82f6529aab512b58ec36c69e5cb6656914e7d1be27c","extensionRoot":"/","spec":{"specVersion":"v1beta","name":"image-processing-api","version":"0.2.1","description":"Use this extension to optimize and transform images via a powerful HTTP API with over 30 different image operations to enhance and manipulate your images.","apis":[{"apiName":"storage-component.googleapis.com","reason":"Needed to use Cloud Storage"}],"roles":[{"role":"storage.admin","reason":"Allows the extension to read images in Cloud Storage"}],"resources":[{"name":"handler","type":"firebaseextensions.v1beta.function","propertiesYaml":"availableMemoryMb: 1024\nhttpsTrigger: {}\nlocation: ${param:LOCATION}\nruntime: nodejs20\n","description":"Serves a API accepting incoming HTTP requests.","deletionPolicy":"DELETE"}],"billingRequired":true,"author":{"authorName":"Invertase","url":"https://invertase.io"},"contributors":[{"authorName":"Invertase","email":"oss@invertase.io","url":"https://github.com/invertase"}],"license":"Apache-2.0","releaseNotesUrl":"https://github.com/invertase/firebase-extensions/tree/main/extensions/image-processing-api/CHANGELOG.md","sourceUrl":"https://github.com/invertase/firebase-extensions/tree/main/extensions/image-processing-api","params":[{"param":"LOCATION","label":"Cloud Functions location","type":"SELECT","description":"Where do you want to deploy the functions created for this extension? You usually want a location close to your Storage bucket. For help selecting a location, refer to the [location selection guide](https://firebase.google.com/docs/functions/locations).","required":true,"options":[{"value":"us-central1","label":"Iowa (us-central1)"},{"value":"us-east1","label":"South Carolina (us-east1)"},{"value":"us-east4","label":"Northern Virginia (us-east4)"},{"value":"us-west2","label":"Los Angeles (us-west2)"},{"value":"us-west3","label":"Salt Lake City (us-west3)"},{"value":"us-west4","label":"Las Vegas (us-west4)"},{"value":"europe-central2","label":"Warsaw (europe-central2)"},{"value":"europe-west1","label":"Belgium (europe-west1)"},{"value":"europe-west2","label":"London (europe-west2)"},{"value":"europe-west3","label":"Frankfurt (europe-west3)"},{"value":"europe-west6","label":"Zurich (europe-west6)"},{"value":"asia-east2","label":"Hong Kong (asia-east2)"},{"value":"asia-northeast1","label":"Tokyo (asia-northeast1)"},{"value":"asia-northeast2","label":"Osaka (asia-northeast2)"},{"value":"asia-northeast3","label":"Seoul (asia-northeast3)"},{"value":"asia-south1","label":"Mumbai (asia-south1)"},{"value":"asia-southeast2","label":"Jakarta (asia-southeast2)"},{"value":"northamerica-northeast1","label":"Montreal (northamerica-northeast1)"},{"value":"southamerica-east1","label":"Sao Paulo (southamerica-east1)"},{"value":"australia-southeast1","label":"Sydney (australia-southeast1)"}],"default":"us-central1","immutable":true},{"param":"CLOUD_STORAGE_BUCKET","label":"Cloud Storage bucket for images","type":"STRING","description":"The Cloud Storage bucket where images that are to be processed are located. API requests with input urls or paths that are not inside this bucket will be dropped.\n","required":true,"default":"${STORAGE_BUCKET}","example":"my-project-12345.appspot.com","validationRegex":"^([0-9a-z_.-]*)$","validationErrorMessage":"Invalid storage bucket"},{"param":"CORS_ORIGIN_ALLOW_LIST","label":"Allowed CORS origins","type":"STRING","description":"A comma delimited value of allowed CORS origins. Use the default of '*' to allow all origins. This is useful to lockdown your API and only allow your own website to embed the images directly. Note this will not prevent non-browser requests from accessing your API.\n","required":true,"default":"*","example":"*.example.com,invertase.io"},{"param":"HOSTNAME","label":"Hostname","type":"STRING","description":"An optional hostname to fetch images from. This can used to construct the original image URL in the response. Include ONLY the hostname, without any protocol or path. The protocol https:// will be added automatically. This parameter is needed if you would like to query using local path names such as /my/image.jpg. instead of the full URL.\n","example":"example.com"}],"preinstallContent":"# Image Processing Extension\n\nUse this extension to optimize and transform images via a powerful HTTP API with over 30 image operations for enhancing and manipulating your images.\n\n## How It Works\n\nWhen you install this extension, it deploys a Cloud Function that exposes an HTTP API. All requests must be sent to the /process endpoint of the function. You perform image operations by passing an operations query parameter—a URL-encoded JSON string defining the operations to execute.\n\n### Example\n\nDefine your operations like so:\n\n```js\nconst operations = [\n  {\n    operation: 'input',\n    type: 'url',\n    url: 'https://example.com/image.jpg',\n  },\n  {\n    operation: 'grayscale',\n  },\n  {\n    operation: 'output',\n    format: 'webp',\n  },\n];\n\nconst params = `?operations=${encodeURIComponent(JSON.stringify(operations))}`;\n```\n\nThen, make your GET request to your Cloud Function using the correct endpoint. For example:\n\n```\nhttps://<your-configured-region>-<your-project-id>.cloudfunctions.net/<extension-instance-id>/process${params}\n```\n\nThe extension also comes with a JavaScript utility library for simplifying the creation of operations:\n\n```ts\nimport { builder } from '@invertase/image-processing-api';\n\nconst output = builder()\n  .input({\n    url: 'https://example.com/image.jpg',\n  })\n  .grayscale()\n  .output({\n    format: 'webp',\n  });\n\nconst params = `?operations=${output.toEncodedJSONString()}`;\n```\n\nView the [official documentation](https://extensions.invertase.dev/image-processing-api) for full usage examples.\n\n### Relative paths\n\nThe extension provides a hostname parameter, allowing you to query the function with local paths (starting with `/`).\n\nAs an example, if we set the hostname parameter to \"example.com\" then the following operation:\n\n```js\nconst operations = [\n  {\n    operation: 'input',\n    type: 'url',\n    url: '/image.jpg',\n  },\n  {\n    operation: 'grayscale',\n  },\n  {\n    operation: 'output',\n    format: 'webp',\n  },\n];\n```\n\nis equivalent to the earlier given example. The url `https://example.com/image.jpg` is constructed within the extension.\n\nNote that this will **only** apply to paths that begin with a forward slash `/`, and **only** when the hostname parameter is set.\n\n#### Additional setup\n\nBefore installing this extension, make sure that you've [set up a Cloud Storage bucket](https://firebase.google.com/docs/storage) in your Firebase project.\n\n#### Billing\n\nTo install an extension, your project must be on the [Blaze (pay as you go) plan](https://firebase.google.com/pricing)\n\n- You will be charged a small amount (typically around $0.01/month) for the Firebase resources required by this extension (even if it is not used).\n- This extension uses other Firebase and Google Cloud Platform services, which have associated charges if you exceed the service’s no-cost tier:\n  - Cloud Storage\n  - Cloud Functions (Node.js 10+ runtime. [See FAQs](https://firebase.google.com/support/faq#extensions-pricing))\n","postinstallContent":"### See it in action\n\nYou can test out this extension right away!\n\n1. Create an operations list, for example:\n\n```js\nconst operations = [\n  {\n    operation: 'input',\n    type: 'url',\n    url: 'https://images.unsplash.com/photo-1663659552548-25d7771802c9?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=774&q=80',\n  },\n  {\n    operation: 'grayscale',\n  },\n  {\n    operation: 'output',\n    format: 'webp',\n  },\n];\n```\n\n2. Stringify and encode the list:\n\n```js\nencodeURIComponent(JSON.stringify(operations));\n```\n\n3. Call the deployed `process` Cloud Function:\n\n[https://${param:LOCATION}-${param:PROJECT_ID}.cloudfunctions.net/ext-${param:EXT_INSTANCE_ID}-handler/process?operations=%5B%7B%22operation%22%3A%22input%22%2C%22type%22%3A%22url%22%2C%22url%22%3A%22https%3A%2F%2Fimages.unsplash.com%2Fphoto-1663659552548-25d7771802c9%3Fixlib%3Drb-1.2.1%26ixid%3DMnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8%26auto%3Dformat%26fit%3Dcrop%26w%3D774%26q%3D80%22%7D%2C%7B%22operation%22%3A%22grayscale%22%7D%2C%7B%22operation%22%3A%22output%22%2C%22format%22%3A%22webp%22%7D%5D](https://${param:LOCATION}-${param:PROJECT_ID}.cloudfunctions.net/ext-${param:EXT_INSTANCE_ID}-handler/process?operations=%5B%7B%22operation%22%3A%22input%22%2C%22type%22%3A%22url%22%2C%22url%22%3A%22https%3A%2F%2Fimages.unsplash.com%2Fphoto-1663659552548-25d7771802c9%3Fixlib%3Drb-1.2.1%26ixid%3DMnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8%26auto%3Dformat%26fit%3Dcrop%26w%3D774%26q%3D80%22%7D%2C%7B%22operation%22%3A%22grayscale%22%7D%2C%7B%22operation%22%3A%22output%22%2C%22format%22%3A%22webp%22%7D%5D)\n\nThe result will be a grayscaled version of the image, in WebP format.\n\n### Using the extension\n\nSee the [official documentation](https://extensions.invertase.dev/image-processing-api) for more information on using the extension, including the full list of supported operations you can use.\n\n### Monitoring\n\nAs a best practice, you can [monitor the activity](https://firebase.google.com/docs/extensions/manage-installed-extensions#monitor) of your installed extension, including checks on its health, usage, and logs.\n","readmeContent":"# Image Processing API\n\n**Author**: Invertase (**[https://invertase.io](https://invertase.io)**)\n\n**Description**: Use this extension to optimize and transform images via a powerful HTTP API with over 30 different image operations to enhance and manipulate your images.\n\n**Details**: # Image Processing Extension\nUse this extension to optimize and transform images via a powerful HTTP API with over 30 image operations for enhancing and manipulating your images.\n\n## How It Works\n\nWhen you install this extension, it deploys a Cloud Function that exposes an HTTP API. All requests must be sent to the /process endpoint of the function. You perform image operations by passing an operations query parameter—a URL-encoded JSON string defining the operations to execute.\n\n### Example\n\nDefine your operations like so:\n\n```js\nconst operations = [\n  {\n    operation: 'input',\n    type: 'url',\n    url: 'https://example.com/image.jpg',\n  },\n  {\n    operation: 'grayscale',\n  },\n  {\n    operation: 'output',\n    format: 'webp',\n  },\n];\n\nconst params = `?operations=${encodeURIComponent(JSON.stringify(operations))}`;\n```\n\nThen, make your GET request to your Cloud Function using the correct endpoint. For example:\n\n```\nhttps://<your-configured-region>-<your-project-id>.cloudfunctions.net/<extension-instance-id>/process${params}\n```\n\nThe extension also comes with a JavaScript utility library for simplifying the creation of operations:\n\n```ts\nimport { builder } from '@invertase/image-processing-api';\n\nconst output = builder()\n  .input({\n    url: 'https://example.com/image.jpg',\n  })\n  .grayscale()\n  .output({\n    format: 'webp',\n  });\n\nconst params = `?operations=${output.toEncodedJSONString()}`;\n```\n\nView the [official documentation](https://extensions.invertase.dev/image-processing-api) for full usage examples.\n\n### Relative paths\n\nThe extension provides a hostname parameter, allowing you to query the function with local paths (starting with `/`).\n\nAs an example, if we set the hostname parameter to \"example.com\" then the following operation:\n\n```js\nconst operations = [\n  {\n    operation: 'input',\n    type: 'url',\n    url: '/image.jpg',\n  },\n  {\n    operation: 'grayscale',\n  },\n  {\n    operation: 'output',\n    format: 'webp',\n  },\n];\n```\n\nis equivalent to the earlier given example. The url `https://example.com/image.jpg` is constructed within the extension.\n\nNote that this will **only** apply to paths that begin with a forward slash `/`, and **only** when the hostname parameter is set.\n\n#### Additional setup\n\nBefore installing this extension, make sure that you've [set up a Cloud Storage bucket](https://firebase.google.com/docs/storage) in your Firebase project.\n\n#### Billing\n\nTo install an extension, your project must be on the [Blaze (pay as you go) plan](https://firebase.google.com/pricing)\n\n- You will be charged a small amount (typically around $0.01/month) for the Firebase resources required by this extension (even if it is not used).\n- This extension uses other Firebase and Google Cloud Platform services, which have associated charges if you exceed the service’s no-cost tier:\n  - Cloud Storage\n  - Cloud Functions (Node.js 10+ runtime. [See FAQs](https://firebase.google.com/support/faq#extensions-pricing))\n\n**Configuration Parameters:**\n\n- Cloud Functions location: Where do you want to deploy the functions created for this extension? You usually want a location close to your Storage bucket. For help selecting a location, refer to the [location selection guide](https://firebase.google.com/docs/functions/locations).\n\n- Cloud Storage bucket for images: The Cloud Storage bucket where images that are to be processed are located. API requests with input urls or paths that are not inside this bucket will be dropped.\n\n- Allowed CORS origins: A comma delimited value of allowed CORS origins. Use the default of '\\*' to allow all origins. This is useful to lockdown your API and only allow your own website to embed the images directly. Note this will not prevent non-browser requests from accessing your API.\n\n- Hostname: An optional hostname to fetch images from. This can used to construct the original image URL in the response. Include ONLY the hostname, without any protocol or path. The protocol https:// will be added automatically. This parameter is needed if you would like to query using local path names such as /my/image.jpg. instead of the full URL.\n\n**Cloud Functions:**\n\n- **handler:** Serves a API accepting incoming HTTP requests.\n\n**APIs Used**:\n\n- storage-component.googleapis.com (Reason: Needed to use Cloud Storage)\n\n**Access Required**:\n\nThis extension will operate with the following project IAM roles:\n\n- storage.admin (Reason: Allows the extension to read images in Cloud Storage)\n","displayName":"Image Processing API"},"fetchTime":"2025-04-03T16:10:15.973372Z","lastOperationName":"projects/invertase-firebase-extensions/operations/443dc71d-01a6-4640-a13c-51448d5c4de1","state":"ACTIVE"},"params":{"CORS_ORIGIN_ALLOW_LIST":"*","LOCATION":"europe-west3","CLOUD_STORAGE_BUCKET":"website-5a18c.firebasestorage.app"},"populatedPostinstallContent":"### See it in action\n\nYou can test out this extension right away!\n\n1. Create an operations list, for example:\n\n```js\nconst operations = [\n  {\n    operation: 'input',\n    type: 'url',\n    url: 'https://images.unsplash.com/photo-1663659552548-25d7771802c9?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=774&q=80',\n  },\n  {\n    operation: 'grayscale',\n  },\n  {\n    operation: 'output',\n    format: 'webp',\n  },\n];\n```\n\n2. Stringify and encode the list:\n\n```js\nencodeURIComponent(JSON.stringify(operations));\n```\n\n3. Call the deployed `process` Cloud Function:\n\n[https://europe-west3-website-5a18c.cloudfunctions.net/ext-image-processing-api-handler/process?operations=%5B%7B%22operation%22%3A%22input%22%2C%22type%22%3A%22url%22%2C%22url%22%3A%22https%3A%2F%2Fimages.unsplash.com%2Fphoto-1663659552548-25d7771802c9%3Fixlib%3Drb-1.2.1%26ixid%3DMnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8%26auto%3Dformat%26fit%3Dcrop%26w%3D774%26q%3D80%22%7D%2C%7B%22operation%22%3A%22grayscale%22%7D%2C%7B%22operation%22%3A%22output%22%2C%22format%22%3A%22webp%22%7D%5D](https://europe-west3-website-5a18c.cloudfunctions.net/ext-image-processing-api-handler/process?operations=%5B%7B%22operation%22%3A%22input%22%2C%22type%22%3A%22url%22%2C%22url%22%3A%22https%3A%2F%2Fimages.unsplash.com%2Fphoto-1663659552548-25d7771802c9%3Fixlib%3Drb-1.2.1%26ixid%3DMnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8%26auto%3Dformat%26fit%3Dcrop%26w%3D774%26q%3D80%22%7D%2C%7B%22operation%22%3A%22grayscale%22%7D%2C%7B%22operation%22%3A%22output%22%2C%22format%22%3A%22webp%22%7D%5D)\n\nThe result will be a grayscaled version of the image, in WebP format.\n\n### Using the extension\n\nSee the [official documentation](https://extensions.invertase.dev/image-processing-api) for more information on using the extension, including the full list of supported operations you can use.\n\n### Monitoring\n\nAs a best practice, you can [monitor the activity](https://firebase.google.com/docs/extensions/manage-installed-extensions#monitor) of your installed extension, including checks on its health, usage, and logs.\n","extensionRef":"invertase/image-processing-api","extensionVersion":"0.2.1","systemParams":{"firebaseextensions.v1beta.function/minInstances":"0","firebaseextensions.v1beta.function/vpcConnectorEgressSettings":"VPC_CONNECTOR_EGRESS_SETTINGS_UNSPECIFIED"}},"lastOperationName":"projects/website-5a18c/operations/e622a0be-0e1a-44cc-aefe-0a3a8c5bfe4c","serviceAccountEmail":"ext-image-processing-api@website-5a18c.iam.gserviceaccount.com","lastOperationType":"CREATE","etag":"1cfc037ee3e595627a0a1255b18d3e691ad149429459bde03adf427ae0b1aef7"}]}
[debug] [2025-07-16T21:37:27.539Z] Failed to validate key FIREBASE_ADMIN_TYPE: Error: Key FIREBASE_ADMIN_TYPE starts with a reserved prefix (X_GOOGLE_ FIREBASE_ EXT_)
[debug] [2025-07-16T21:37:27.539Z] Failed to validate key FIREBASE_ADMIN_PRIVATE_KEY_ID: Error: Key FIREBASE_ADMIN_PRIVATE_KEY_ID starts with a reserved prefix (X_GOOGLE_ FIREBASE_ EXT_)
[debug] [2025-07-16T21:37:27.540Z] Failed to validate key FIREBASE_ADMIN_PRIVATE_KEY: Error: Key FIREBASE_ADMIN_PRIVATE_KEY starts with a reserved prefix (X_GOOGLE_ FIREBASE_ EXT_)
[debug] [2025-07-16T21:37:27.540Z] Failed to validate key FIREBASE_ADMIN_CLIENT_EMAIL: Error: Key FIREBASE_ADMIN_CLIENT_EMAIL starts with a reserved prefix (X_GOOGLE_ FIREBASE_ EXT_)
[debug] [2025-07-16T21:37:27.544Z] Failed to validate key FIREBASE_ADMIN_CLIENT_ID: Error: Key FIREBASE_ADMIN_CLIENT_ID starts with a reserved prefix (X_GOOGLE_ FIREBASE_ EXT_)
[debug] [2025-07-16T21:37:27.544Z] Failed to validate key FIREBASE_ADMIN_AUTH_URI: Error: Key FIREBASE_ADMIN_AUTH_URI starts with a reserved prefix (X_GOOGLE_ FIREBASE_ EXT_)
[debug] [2025-07-16T21:37:27.544Z] Failed to validate key FIREBASE_ADMIN_TOKEN_URI: Error: Key FIREBASE_ADMIN_TOKEN_URI starts with a reserved prefix (X_GOOGLE_ FIREBASE_ EXT_)
[debug] [2025-07-16T21:37:27.544Z] Failed to validate key FIREBASE_ADMIN_AUTH_PROVIDER_X509_CERT_URL: Error: Key FIREBASE_ADMIN_AUTH_PROVIDER_X509_CERT_URL starts with a reserved prefix (X_GOOGLE_ FIREBASE_ EXT_)
[debug] [2025-07-16T21:37:27.544Z] Failed to validate key FIREBASE_ADMIN_CLIENT_X509_CERT_URL: Error: Key FIREBASE_ADMIN_CLIENT_X509_CERT_URL starts with a reserved prefix (X_GOOGLE_ FIREBASE_ EXT_)
[error] Error: Failed to load environment variables from .env.:
[error] - Error Key FIREBASE_ADMIN_TYPE starts with a reserved prefix (X_GOOGLE_ FIREBASE_ EXT_)
[error] - Error Key FIREBASE_ADMIN_PRIVATE_KEY_ID starts with a reserved prefix (X_GOOGLE_ FIREBASE_ EXT_)
[error] - Error Key FIREBASE_ADMIN_PRIVATE_KEY starts with a reserved prefix (X_GOOGLE_ FIREBASE_ EXT_)
[error] - Error Key FIREBASE_ADMIN_CLIENT_EMAIL starts with a reserved prefix (X_GOOGLE_ FIREBASE_ EXT_)
[error] - Error Key FIREBASE_ADMIN_CLIENT_ID starts with a reserved prefix (X_GOOGLE_ FIREBASE_ EXT_)
[error] - Error Key FIREBASE_ADMIN_AUTH_URI starts with a reserved prefix (X_GOOGLE_ FIREBASE_ EXT_)
[error] - Error Key FIREBASE_ADMIN_TOKEN_URI starts with a reserved prefix (X_GOOGLE_ FIREBASE_ EXT_)
[error] - Error Key FIREBASE_ADMIN_AUTH_PROVIDER_X509_CERT_URL starts with a reserved prefix (X_GOOGLE_ FIREBASE_ EXT_)
[error] - Error Key FIREBASE_ADMIN_CLIENT_X509_CERT_URL starts with a reserved prefix (X_GOOGLE_ FIREBASE_ EXT_)
[debug] [2025-07-16T21:43:00.018Z] ----------------------------------------------------------------------
[debug] [2025-07-16T21:43:00.022Z] Command:       /nix/store/rbdrkcs5kkwpalxcd7c6bnm33lk2955n-nodejs-20.19.0/bin/node /home/user/.global_modules/bin/firebase deploy --only hosting --project=website-5a18c
[debug] [2025-07-16T21:43:00.022Z] CLI Version:   14.10.1
[debug] [2025-07-16T21:43:00.023Z] Platform:      linux
[debug] [2025-07-16T21:43:00.023Z] Node Version:  v20.19.0
[debug] [2025-07-16T21:43:00.023Z] Time:          Wed Jul 16 2025 21:43:00 GMT+0000 (Coordinated Universal Time)
[debug] [2025-07-16T21:43:00.023Z] ----------------------------------------------------------------------
[debug] 
[debug] [2025-07-16T21:43:00.494Z] Object "/hosting" in "firebase.json" has unknown property: {"additionalProperty":"webFrameworks"}
[debug] [2025-07-16T21:43:00.494Z] Field "/hosting" in "firebase.json" is possibly invalid: must be array
[debug] [2025-07-16T21:43:00.495Z] Field "/hosting" in "firebase.json" is possibly invalid: must match a schema in anyOf
[debug] [2025-07-16T21:43:00.501Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2025-07-16T21:43:00.501Z] > authorizing via signed-in user (bakirbehmen@gmail.com)
[debug] [2025-07-16T21:43:00.502Z] [iam] checking project website-5a18c for permissions ["firebase.projects.get","firebasehosting.sites.update"]
[debug] [2025-07-16T21:43:00.503Z] Checked if tokens are valid: true, expires at: 1752703517880
[debug] [2025-07-16T21:43:00.504Z] Checked if tokens are valid: true, expires at: 1752703517880
[debug] [2025-07-16T21:43:00.505Z] >>> [apiv2][query] POST https://cloudresourcemanager.googleapis.com/v1/projects/website-5a18c:testIamPermissions [none]
[debug] [2025-07-16T21:43:00.505Z] >>> [apiv2][(partial)header] POST https://cloudresourcemanager.googleapis.com/v1/projects/website-5a18c:testIamPermissions x-goog-quota-user=projects/website-5a18c
[debug] [2025-07-16T21:43:00.506Z] >>> [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/website-5a18c:testIamPermissions {"permissions":["firebase.projects.get","firebasehosting.sites.update"]}
[debug] [2025-07-16T21:43:01.253Z] <<< [apiv2][status] POST https://cloudresourcemanager.googleapis.com/v1/projects/website-5a18c:testIamPermissions 200
[debug] [2025-07-16T21:43:01.253Z] <<< [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/website-5a18c:testIamPermissions {"permissions":["firebase.projects.get","firebasehosting.sites.update"]}
[debug] [2025-07-16T21:43:01.256Z] Checked if tokens are valid: true, expires at: 1752703517880
[debug] [2025-07-16T21:43:01.256Z] Checked if tokens are valid: true, expires at: 1752703517880
[debug] [2025-07-16T21:43:01.260Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/website-5a18c [none]
[debug] [2025-07-16T21:43:01.486Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/website-5a18c 200
[debug] [2025-07-16T21:43:01.487Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/website-5a18c {"projectId":"website-5a18c","projectNumber":"636702053767","displayName":"website","name":"projects/website-5a18c","resources":{"hostingSite":"website-5a18c"},"state":"ACTIVE","etag":"1_a6122a7f-7df1-4ea8-844b-57f64ef44324"}
[debug] [2025-07-16T21:43:06.421Z] defaultcredentials: writing to file /home/user/.config/firebase/bakirbehmen_gmail_com_application_default_credentials.json
[debug] [2025-07-16T21:43:06.443Z] Checked if tokens are valid: true, expires at: 1752703517880
[debug] [2025-07-16T21:43:06.444Z] Checked if tokens are valid: true, expires at: 1752703517880
[debug] [2025-07-16T21:43:06.453Z] >>> [apiv2][query] GET https://firebasehosting.googleapis.com/v1beta1/projects/website-5a18c/sites pageToken=&pageSize=10
[debug] [2025-07-16T21:43:07.580Z] <<< [apiv2][status] GET https://firebasehosting.googleapis.com/v1beta1/projects/website-5a18c/sites 200
[debug] [2025-07-16T21:43:07.581Z] <<< [apiv2][body] GET https://firebasehosting.googleapis.com/v1beta1/projects/website-5a18c/sites {"sites":[{"name":"projects/website-5a18c/sites/website-5a18c","defaultUrl":"https://website-5a18c.web.app","appId":"1:636702053767:web:0de2259025db8c0bbd6f22","type":"DEFAULT_SITE"}]}
[debug] [2025-07-16T21:43:07.582Z] Checked if tokens are valid: true, expires at: 1752703517880
[debug] [2025-07-16T21:43:07.582Z] Checked if tokens are valid: true, expires at: 1752703517880
[debug] [2025-07-16T21:43:07.582Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/-/webApps/1:636702053767:web:0de2259025db8c0bbd6f22/config [none]
[debug] [2025-07-16T21:43:08.184Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/-/webApps/1:636702053767:web:0de2259025db8c0bbd6f22/config 200
[debug] [2025-07-16T21:43:08.191Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/-/webApps/1:636702053767:web:0de2259025db8c0bbd6f22/config {"projectId":"website-5a18c","appId":"1:636702053767:web:0de2259025db8c0bbd6f22","storageBucket":"website-5a18c.firebasestorage.app","apiKey":"AIzaSyDxwAQf6RX8UHlbjPpnjMVX-0jS85K3bvw","authDomain":"website-5a18c.firebaseapp.com","messagingSenderId":"636702053767","measurementId":"G-WGPRNHDM9Q"}
[info] 
   Thank you for trying our early preview of Next.js support on Firebase Hosting.
   During the preview, support is best-effort and breaking changes can be expected. Proceed with caution.
   The integration is known to work with Next.js version 12 - 15.0. You may encounter errors.

   Documentation: https://firebase.google.com/docs/hosting/frameworks/nextjs
   File a bug: https://github.com/firebase/firebase-tools/issues/new?template=bug_report.md
   Submit a feature request: https://github.com/firebase/firebase-tools/issues/new?template=feature_request.md

   We'd love to learn from you. Express your interest in helping us shape the future of Firebase Hosting: https://goo.gle/41enW5X

[debug] [2025-07-16T21:43:30.948Z] Checked if tokens are valid: true, expires at: 1752703517880
[debug] [2025-07-16T21:43:30.954Z] Checked if tokens are valid: true, expires at: 1752703517880
[debug] [2025-07-16T21:43:30.954Z] >>> [apiv2][query] GET https://firebasehosting.googleapis.com/v1beta1/projects/website-5a18c/sites/website-5a18c [none]
[debug] [2025-07-16T21:43:31.930Z] <<< [apiv2][status] GET https://firebasehosting.googleapis.com/v1beta1/projects/website-5a18c/sites/website-5a18c 200
[debug] [2025-07-16T21:43:31.932Z] <<< [apiv2][body] GET https://firebasehosting.googleapis.com/v1beta1/projects/website-5a18c/sites/website-5a18c {"name":"projects/website-5a18c/sites/website-5a18c","defaultUrl":"https://website-5a18c.web.app","appId":"1:636702053767:web:0de2259025db8c0bbd6f22","type":"DEFAULT_SITE"}
[info]    ▲ Next.js 15.3.3
   - Environments: .env.local, .env


[info]    Creating an optimized production build ...

[info]  ✓ Compiled successfully in 53s

[info]    Skipping validation of types

[info]    Skipping linting

[info]    Collecting page data ...

[info]    Generating static pages (0/6) ...

[info]    Generating static pages (1/6) 

[info]    Generating static pages (2/6) 
   Generating static pages (4/6) 
 ✓ Generating static pages (6/6)

[info]    Finalizing page optimization ...

[info]    Collecting build traces ...

[info] 

[info] Route (app)                                 Size  First Load JS
┌ ○ /_not-found                            978 B         102 kB
└ ● /[lng]                               35.8 kB         157 kB
    ├ /sr
    └ /en
+ First Load JS shared by all             101 kB
  ├ chunks/4bd1b696-4419cc93057fcf32.js  53.2 kB
  ├ chunks/684-7002d2f60d48787d.js         46 kB
  └ other shared chunks (total)          2.03 kB


ƒ Middleware                             32.3 kB

○  (Static)  prerendered as static content
●  (SSG)     prerendered as static HTML (uses generateStaticParams)


[info] Building a Cloud Function to run this application. This is needed due to:
[info]  • middleware
[info]  • use of fallback /[lng]
[info] 
[debug] [2025-07-16T21:45:59.147Z] skipping /en due to it matching an unsupported rewrite/redirect/header or middlware
[debug] [2025-07-16T21:45:59.148Z] skipping /sr due to it matching an unsupported rewrite/redirect/header or middlware
[debug] [2025-07-16T21:45:59.148Z] skipping /404 due to it matching an unsupported rewrite/redirect/header or middlware
[debug] [2025-07-16T21:45:59.656Z] Checked if tokens are valid: true, expires at: 1752703517880
[debug] [2025-07-16T21:45:59.658Z] Checked if tokens are valid: true, expires at: 1752703517880
[debug] [2025-07-16T21:45:59.659Z] >>> [apiv2][query] GET https://firebasehosting.googleapis.com/v1beta1/projects/website-5a18c/sites/website-5a18c [none]
[debug] [2025-07-16T21:46:00.615Z] <<< [apiv2][status] GET https://firebasehosting.googleapis.com/v1beta1/projects/website-5a18c/sites/website-5a18c 200
[debug] [2025-07-16T21:46:00.616Z] <<< [apiv2][body] GET https://firebasehosting.googleapis.com/v1beta1/projects/website-5a18c/sites/website-5a18c {"name":"projects/website-5a18c/sites/website-5a18c","defaultUrl":"https://website-5a18c.web.app","appId":"1:636702053767:web:0de2259025db8c0bbd6f22","type":"DEFAULT_SITE"}
[debug] [2025-07-16T21:46:18.564Z] [web frameworks] effective firebase.json:  {
  "hosting": [
    {
      "source": ".",
      "ignore": [
        "firebase.json",
        "**/.*",
        "**/node_modules/**"
      ],
      "rewrites": [
        {
          "source": "**",
          "function": {
            "functionId": "_next"
          }
        },
        {
          "source": "/**",
          "function": {
            "functionId": "ssrwebsite5a18c",
            "region": "us-central1",
            "pinTag": true
          }
        }
      ],
      "webFrameworks": {
        "region": "europe-west1"
      },
      "site": "website-5a18c",
      "redirects": [],
      "headers": [
        {
          "source": "/_not-found",
          "headers": [
            {
              "key": "x-nextjs-stale-time",
              "value": "300"
            },
            {
              "key": "x-nextjs-prerender",
              "value": "1"
            },
            {
              "key": "x-next-cache-tags",
              "value": "_N_T_/layout,_N_T_/_not-found/layout,_N_T_/_not-found/page,_N_T_/_not-found"
            }
          ]
        },
        {
          "source": "/favicon.ico",
          "headers": [
            {
              "key": "cache-control",
              "value": "public, max-age=0, must-revalidate"
            },
            {
              "key": "content-type",
              "value": "image/x-icon"
            },
            {
              "key": "x-next-cache-tags",
              "value": "_N_T_/layout,_N_T_/favicon.ico/layout,_N_T_/favicon.ico/route,_N_T_/favicon.ico"
            }
          ]
        },
        {
          "source": "/**/*.[jt]s",
          "headers": [
            {
              "key": "Set-Cookie",
              "value": "__FIREBASE_DEFAULTS__=eyJjb25maWciOnsicHJvamVjdElkIjoid2Vic2l0ZS01YTE4YyIsImFwcElkIjoiMTo2MzY3MDIwNTM3Njc6d2ViOjBkZTIyNTkwMjVkYjhjMGJiZDZmMjIiLCJzdG9yYWdlQnVja2V0Ijoid2Vic2l0ZS01YTE4Yy5maXJlYmFzZXN0b3JhZ2UuYXBwIiwiYXBpS2V5IjoiQUl6YVN5RHh3QVFmNlJYOFVIbGJqUHBuak1WWC0walM4NUszYnZ3IiwiYXV0aERvbWFpbiI6IndlYnNpdGUtNWExOGMuZmlyZWJhc2VhcHAuY29tIiwibWVzc2FnaW5nU2VuZGVySWQiOiI2MzY3MDIwNTM3NjciLCJtZWFzdXJlbWVudElkIjoiRy1XR1BSTkhETTlRIn0sIl9hdXRoVG9rZW5TeW5jVVJMIjoiL19fc2Vzc2lvbiJ9; SameSite=Strict; Expires=2027-06-11T08:26:18.564Z; Path=/;"
            }
          ]
        }
      ],
      "cleanUrls": true,
      "trailingSlash": false,
      "public": ".firebase/website-5a18c/hosting",
      "webFramework": "next_ssr"
    }
  ],
  "functions": [
    {
      "source": ".firebase/website-5a18c/functions",
      "codebase": "firebase-frameworks-website-5a18c"
    }
  ]
}
[debug] [2025-07-16T21:46:18.567Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2025-07-16T21:46:18.568Z] > authorizing via signed-in user (bakirbehmen@gmail.com)
[debug] [2025-07-16T21:46:18.568Z] [iam] checking project website-5a18c for permissions ["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]
[debug] [2025-07-16T21:46:18.574Z] Checked if tokens are valid: true, expires at: 1752703517880
[debug] [2025-07-16T21:46:18.575Z] Checked if tokens are valid: true, expires at: 1752703517880
[debug] [2025-07-16T21:46:18.575Z] >>> [apiv2][query] POST https://cloudresourcemanager.googleapis.com/v1/projects/website-5a18c:testIamPermissions [none]
[debug] [2025-07-16T21:46:18.575Z] >>> [apiv2][(partial)header] POST https://cloudresourcemanager.googleapis.com/v1/projects/website-5a18c:testIamPermissions x-goog-quota-user=projects/website-5a18c
[debug] [2025-07-16T21:46:18.575Z] >>> [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/website-5a18c:testIamPermissions {"permissions":["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]}
[debug] [2025-07-16T21:46:19.227Z] <<< [apiv2][status] POST https://cloudresourcemanager.googleapis.com/v1/projects/website-5a18c:testIamPermissions 200
[debug] [2025-07-16T21:46:19.230Z] <<< [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/website-5a18c:testIamPermissions {"permissions":["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]}
[debug] [2025-07-16T21:46:19.232Z] Checked if tokens are valid: true, expires at: 1752703517880
[debug] [2025-07-16T21:46:19.232Z] Checked if tokens are valid: true, expires at: 1752703517880
[debug] [2025-07-16T21:46:19.232Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v1/projects/website-5a18c/locations/-/functions [none]
[debug] [2025-07-16T21:46:19.891Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v1/projects/website-5a18c/locations/-/functions 200
[debug] [2025-07-16T21:46:19.892Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v1/projects/website-5a18c/locations/-/functions {"functions":[{"name":"projects/website-5a18c/locations/europe-west3/functions/ext-image-processing-api-handler","description":"Serves a API accepting incoming HTTP requests.","sourceArchiveUrl":"gs://firebase-mod-sources-prod/2137a7fadcc867f26a3d8015133f2ab19c2f60dd35bd2ec8facf4e1f04e61232","httpsTrigger":{"url":"https://europe-west3-website-5a18c.cloudfunctions.net/ext-image-processing-api-handler","securityLevel":"SECURE_OPTIONAL"},"status":"ACTIVE","entryPoint":"handler","timeout":"60s","availableMemoryMb":1024,"serviceAccountEmail":"ext-image-processing-api@website-5a18c.iam.gserviceaccount.com","updateTime":"2025-07-14T04:37:55.941Z","versionId":"2","labels":{"goog-firebase-ext":"image-processing-api","deployment-tool":"firebase-extensions","goog-firebase-ext-iid":"image-processing-api","firebase-extensions-ar":"enabled","goog-dm":"firebase-ext-image-processing-api"},"environmentVariables":{"CLOUD_STORAGE_BUCKET":"website-5a18c.firebasestorage.app","CORS_ORIGIN_ALLOW_LIST":"*","DATABASE_INSTANCE":"","DATABASE_URL":"","EXT_INSTANCE_ID":"image-processing-api","FIREBASE_CONFIG":"{\"projectId\":\"website-5a18c\",\"databaseURL\":\"\",\"storageBucket\":\"website-5a18c.firebasestorage.app\"}","GCLOUD_PROJECT":"website-5a18c","LOCATION":"europe-west3","PROJECT_ID":"website-5a18c","STORAGE_BUCKET":"website-5a18c.firebasestorage.app"},"runtime":"nodejs20","ingressSettings":"ALLOW_ALL","buildId":"f18bca3c-f1f5-4477-90f4-e5e6e741ebbc","buildEnvironmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"buildName":"projects/636702053767/locations/europe-west3/builds/f18bca3c-f1f5-4477-90f4-e5e6e741ebbc","dockerRegistry":"ARTIFACT_REGISTRY","automaticUpdatePolicy":{},"buildServiceAccount":"projects/website-5a18c/serviceAccounts/636702053767-compute@developer.gserviceaccount.com","satisfiesPzs":true,"satisfiesPzi":true}]}
[debug] [2025-07-16T21:46:19.895Z] Checked if tokens are valid: true, expires at: 1752703517880
[debug] [2025-07-16T21:46:19.895Z] Checked if tokens are valid: true, expires at: 1752703517880
[debug] [2025-07-16T21:46:19.899Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/website-5a18c/locations/-/functions filter=environment%3D%22GEN_2%22
[debug] [2025-07-16T21:46:20.882Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/website-5a18c/locations/-/functions 200
[debug] [2025-07-16T21:46:20.882Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/website-5a18c/locations/-/functions {"functions":[{"name":"projects/website-5a18c/locations/us-central1/functions/ssrwebsite5a18c","buildConfig":{"build":"projects/636702053767/locations/us-central1/builds/d8dc5e1a-ecb9-4b6c-afee-a6e3c624b3a3","runtime":"nodejs20","entryPoint":"ssrwebsite5a18c","source":{"storageSource":{"bucket":"gcf-v2-sources-636702053767-us-central1","object":"ssrwebsite5a18c/function-source.zip","generation":"1752466812219058"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/website-5a18c/locations/us-central1/repositories/gcf-artifacts","sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-636702053767-us-central1","object":"ssrwebsite5a18c/function-source.zip","generation":"1752466812219058"}},"dockerRegistry":"ARTIFACT_REGISTRY","serviceAccount":"projects/website-5a18c/serviceAccounts/636702053767-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/website-5a18c/locations/us-central1/services/ssrwebsite5a18c","timeoutSeconds":60,"environmentVariables":{"GEMINI_API_KEY":"","NEXT_PUBLIC_FIREBASE_API_KEY":"AIzaSyDxwAQf6RX8UHlbjPpnjMVX-0jS85K3bvw","NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN":"website-5a18c.firebaseapp.com","NEXT_PUBLIC_FIREBASE_PROJECT_ID":"website-5a18c","NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET":"website-5a18c.appspot.com","NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID":"636702053767","NEXT_PUBLIC_FIREBASE_APP_ID":"1:636702053767:web:0de2259025db8c0bbd6f22","NEXT_PUBLIC_FIREBASE_MEASUREMENT_ID":"G-WGPRNHDM9Q","VERCEL_URL":"website-5a18c.web.app","__FIREBASE_FRAMEWORKS_ENTRY__":"next.js","__FIREBASE_DEFAULTS__":"{\"config\":{\"projectId\":\"website-5a18c\",\"appId\":\"1:636702053767:web:0de2259025db8c0bbd6f22\",\"storageBucket\":\"website-5a18c.firebasestorage.app\",\"apiKey\":\"AIzaSyDxwAQf6RX8UHlbjPpnjMVX-0jS85K3bvw\",\"authDomain\":\"website-5a18c.firebaseapp.com\",\"messagingSenderId\":\"636702053767\",\"measurementId\":\"G-WGPRNHDM9Q\"},\"_authTokenSyncURL\":\"/__session\"}","FIREBASE_CONFIG":"{\"projectId\":\"website-5a18c\",\"storageBucket\":\"website-5a18c.firebasestorage.app\"}","GCLOUD_PROJECT":"website-5a18c","EVENTARC_CLOUD_EVENT_SOURCE":"projects/website-5a18c/locations/us-central1/services/ssrwebsite5a18c","FUNCTION_TARGET":"ssrwebsite5a18c","LOG_EXECUTION_ID":"true"},"maxInstanceCount":20,"ingressSettings":"ALLOW_ALL","uri":"https://ssrwebsite5a18c-hr7gf53sqq-uc.a.run.app","serviceAccountEmail":"636702053767-compute@developer.gserviceaccount.com","availableMemory":"256Mi","allTrafficOnLatestRevision":true,"revision":"ssrwebsite5a18c-00001-rey","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"state":"ACTIVE","updateTime":"2025-07-14T04:22:57.557138708Z","labels":{"deployment-tool":"cli-firebase--project-idx","firebase-functions-codebase":"firebase-frameworks-website-5a18c","firebase-functions-hash":"d1a9c72cc15bd8e5dc8545c81251e01b59363f8d"},"environment":"GEN_2","url":"https://us-central1-website-5a18c.cloudfunctions.net/ssrwebsite5a18c","createTime":"2025-07-14T04:20:12.455639447Z","satisfiesPzi":true}]}
[info] i  hosting: The following function(s) are pinned to site website-5a18c and will be deployed as well: ssrwebsite5a18c 
[info] 
[info] === Deploying to 'website-5a18c'...
[info] 
[info] i  deploying functions, hosting 
[debug] [2025-07-16T21:46:20.899Z] Checked if tokens are valid: true, expires at: 1752703517880
[debug] [2025-07-16T21:46:20.899Z] Checked if tokens are valid: true, expires at: 1752703517880
[debug] [2025-07-16T21:46:20.900Z] >>> [apiv2][query] GET https://cloudresourcemanager.googleapis.com/v1/projects/website-5a18c [none]
[debug] [2025-07-16T21:46:21.074Z] <<< [apiv2][status] GET https://cloudresourcemanager.googleapis.com/v1/projects/website-5a18c 200
[debug] [2025-07-16T21:46:21.076Z] <<< [apiv2][body] GET https://cloudresourcemanager.googleapis.com/v1/projects/website-5a18c {"projectNumber":"636702053767","projectId":"website-5a18c","lifecycleState":"ACTIVE","name":"website","labels":{"firebase":"enabled","firebase-core":"disabled","generative-language":"enabled"},"createTime":"2025-07-11T21:11:24.875257Z"}
[info] i  functions: preparing codebase firebase-frameworks-website-5a18c for deployment 
[info] i  functions: ensuring required API cloudfunctions.googleapis.com is enabled... 
[info] i  functions: ensuring required API cloudbuild.googleapis.com is enabled... 
[info] i  artifactregistry: ensuring required API artifactregistry.googleapis.com is enabled... 
[debug] [2025-07-16T21:46:21.086Z] Checked if tokens are valid: true, expires at: 1752703517880
[debug] [2025-07-16T21:46:21.086Z] Checked if tokens are valid: true, expires at: 1752703517880
[debug] [2025-07-16T21:46:21.086Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/website-5a18c/adminSdkConfig [none]
[debug] [2025-07-16T21:46:21.353Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/website-5a18c/adminSdkConfig 200
[debug] [2025-07-16T21:46:21.353Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/website-5a18c/adminSdkConfig {"projectId":"website-5a18c","storageBucket":"website-5a18c.firebasestorage.app"}
[debug] [2025-07-16T21:46:21.354Z] Checked if tokens are valid: true, expires at: 1752703517880
[debug] [2025-07-16T21:46:21.354Z] Checked if tokens are valid: true, expires at: 1752703517880
[debug] [2025-07-16T21:46:21.354Z] >>> [apiv2][query] GET https://runtimeconfig.googleapis.com/v1beta1/projects/website-5a18c/configs [none]
[debug] [2025-07-16T21:46:21.584Z] <<< [apiv2][status] GET https://runtimeconfig.googleapis.com/v1beta1/projects/website-5a18c/configs 200
[debug] [2025-07-16T21:46:21.584Z] <<< [apiv2][body] GET https://runtimeconfig.googleapis.com/v1beta1/projects/website-5a18c/configs {}
[debug] [2025-07-16T21:46:21.592Z] Validating nodejs source
[debug] [2025-07-16T21:46:24.000Z] > [functions] package.json contents: {
  "name": "nextn",
  "version": "0.1.0",
  "private": true,
  "dependencies": {
    "@genkit-ai/googleai": "^1.13.0",
    "@hookform/resolvers": "^4.1.3",
    "@radix-ui/react-accordion": "^1.2.3",
    "@radix-ui/react-alert-dialog": "^1.1.6",
    "@radix-ui/react-avatar": "^1.1.3",
    "@radix-ui/react-checkbox": "^1.1.4",
    "@radix-ui/react-collapsible": "^1.1.11",
    "@radix-ui/react-dialog": "^1.1.6",
    "@radix-ui/react-dropdown-menu": "^2.1.6",
    "@radix-ui/react-label": "^2.1.2",
    "@radix-ui/react-menubar": "^1.1.6",
    "@radix-ui/react-popover": "^1.1.6",
    "@radix-ui/react-progress": "^1.1.2",
    "@radix-ui/react-radio-group": "^1.2.3",
    "@radix-ui/react-scroll-area": "^1.2.3",
    "@radix-ui/react-select": "^2.1.6",
    "@radix-ui/react-separator": "^1.1.2",
    "@radix-ui/react-slider": "^1.2.3",
    "@radix-ui/react-slot": "^1.2.3",
    "@radix-ui/react-switch": "^1.1.3",
    "@radix-ui/react-tabs": "^1.1.3",
    "@radix-ui/react-toast": "^1.2.6",
    "@radix-ui/react-tooltip": "^1.1.8",
    "class-variance-authority": "^0.7.1",
    "clsx": "^2.1.1",
    "date-fns": "^3.6.0",
    "dotenv": "^16.5.0",
    "embla-carousel-react": "^8.6.0",
    "firebase": "^11.10.0",
    "firebase-admin": "^13.4.0",
    "genkit": "^1.13.0",
    "i18next": "^25.3.2",
    "i18next-browser-languagedetector": "^8.2.0",
    "i18next-resources-to-backend": "^1.2.1",
    "lucide-react": "^0.475.0",
    "next": "15.3.3",
    "react": "^18.3.1",
    "react-cookie": "^8.0.1",
    "react-day-picker": "^8.10.1",
    "react-dom": "^18.3.1",
    "react-hook-form": "^7.54.2",
    "react-i18next": "^15.6.0",
    "recharts": "^2.15.1",
    "tailwind-merge": "^3.0.1",
    "tailwindcss-animate": "^1.0.7",
    "zod": "^3.24.2",
    "firebase-frameworks": "^0.11.0",
    "firebase-functions": "^6.0.1"
  },
  "main": "server.js",
  "engines": {
    "node": "20"
  }
}
[debug] [2025-07-16T21:46:24.003Z] Building nodejs source
[info] i  functions: Loading and analyzing source code for codebase firebase-frameworks-website-5a18c to determine what to deploy 
[debug] [2025-07-16T21:46:24.013Z] Could not find functions.yaml. Must use http discovery
[debug] [2025-07-16T21:46:24.073Z] Found firebase-functions binary at '/home/user/studio/.firebase/website-5a18c/functions/node_modules/.bin/firebase-functions'
[info] Serving at port 8580

[debug] [2025-07-16T21:46:26.187Z] Got response from /__/functions.yaml {"endpoints":{"ssrwebsite5a18c":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"httpsTrigger":{},"entryPoint":"ssrwebsite5a18c"}},"specVersion":"v1alpha1","requiredAPIs":[],"extensions":{}}
[info] i  extensions: ensuring required API firebaseextensions.googleapis.com is enabled... 
[debug] [2025-07-16T21:46:30.394Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2025-07-16T21:46:30.397Z] > authorizing via signed-in user (bakirbehmen@gmail.com)
[debug] [2025-07-16T21:46:30.397Z] [iam] checking project website-5a18c for permissions ["firebase.projects.get","firebaseextensions.instances.list"]
[debug] [2025-07-16T21:46:30.402Z] Checked if tokens are valid: true, expires at: 1752703517880
[debug] [2025-07-16T21:46:30.402Z] Checked if tokens are valid: true, expires at: 1752703517880
[debug] [2025-07-16T21:46:30.402Z] >>> [apiv2][query] POST https://cloudresourcemanager.googleapis.com/v1/projects/website-5a18c:testIamPermissions [none]
[debug] [2025-07-16T21:46:30.402Z] >>> [apiv2][(partial)header] POST https://cloudresourcemanager.googleapis.com/v1/projects/website-5a18c:testIamPermissions x-goog-quota-user=projects/website-5a18c
[debug] [2025-07-16T21:46:30.403Z] >>> [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/website-5a18c:testIamPermissions {"permissions":["firebase.projects.get","firebaseextensions.instances.list"]}
[debug] [2025-07-16T21:46:31.076Z] <<< [apiv2][status] POST https://cloudresourcemanager.googleapis.com/v1/projects/website-5a18c:testIamPermissions 200
[debug] [2025-07-16T21:46:31.077Z] <<< [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/website-5a18c:testIamPermissions {"permissions":["firebase.projects.get","firebaseextensions.instances.list"]}
[debug] [2025-07-16T21:46:31.078Z] Checked if tokens are valid: true, expires at: 1752703517880
[debug] [2025-07-16T21:46:31.078Z] Checked if tokens are valid: true, expires at: 1752703517880
[debug] [2025-07-16T21:46:31.078Z] >>> [apiv2][query] GET https://firebaseextensions.googleapis.com/v1beta/projects/website-5a18c/instances pageSize=100&pageToken=
[debug] [2025-07-16T21:46:31.904Z] <<< [apiv2][status] GET https://firebaseextensions.googleapis.com/v1beta/projects/website-5a18c/instances 200
[debug] [2025-07-16T21:46:31.908Z] <<< [apiv2][body] GET https://firebaseextensions.googleapis.com/v1beta/projects/website-5a18c/instances {"instances":[{"name":"projects/website-5a18c/instances/image-processing-api","createTime":"2025-07-14T04:33:14.381422Z","updateTime":"2025-07-14T04:38:24.129382Z","state":"ACTIVE","config":{"name":"projects/website-5a18c/instances/image-processing-api/configurations/1ecf0e78-380c-4b30-bf6f-36ead48313e2","createTime":"2025-07-14T04:33:14.381422Z","source":{"name":"projects/invertase-firebase-extensions/sources/8e80a7ef-0036-42b3-b829-9fab843715dd","packageUri":"https://storage.googleapis.com/firebase-extensions-packages-prod/invertase-image-processing-api-0.2.1-6ccff87e-84ec-40c2-a78c-bbfb629b2dd5.zip","hash":"5034d7302af64a6e98d4e82f6529aab512b58ec36c69e5cb6656914e7d1be27c","extensionRoot":"/","spec":{"specVersion":"v1beta","name":"image-processing-api","version":"0.2.1","description":"Use this extension to optimize and transform images via a powerful HTTP API with over 30 different image operations to enhance and manipulate your images.","apis":[{"apiName":"storage-component.googleapis.com","reason":"Needed to use Cloud Storage"}],"roles":[{"role":"storage.admin","reason":"Allows the extension to read images in Cloud Storage"}],"resources":[{"name":"handler","type":"firebaseextensions.v1beta.function","propertiesYaml":"availableMemoryMb: 1024\nhttpsTrigger: {}\nlocation: ${param:LOCATION}\nruntime: nodejs20\n","description":"Serves a API accepting incoming HTTP requests.","deletionPolicy":"DELETE"}],"billingRequired":true,"author":{"authorName":"Invertase","url":"https://invertase.io"},"contributors":[{"authorName":"Invertase","email":"oss@invertase.io","url":"https://github.com/invertase"}],"license":"Apache-2.0","releaseNotesUrl":"https://github.com/invertase/firebase-extensions/tree/main/extensions/image-processing-api/CHANGELOG.md","sourceUrl":"https://github.com/invertase/firebase-extensions/tree/main/extensions/image-processing-api","params":[{"param":"LOCATION","label":"Cloud Functions location","type":"SELECT","description":"Where do you want to deploy the functions created for this extension? You usually want a location close to your Storage bucket. For help selecting a location, refer to the [location selection guide](https://firebase.google.com/docs/functions/locations).","required":true,"options":[{"value":"us-central1","label":"Iowa (us-central1)"},{"value":"us-east1","label":"South Carolina (us-east1)"},{"value":"us-east4","label":"Northern Virginia (us-east4)"},{"value":"us-west2","label":"Los Angeles (us-west2)"},{"value":"us-west3","label":"Salt Lake City (us-west3)"},{"value":"us-west4","label":"Las Vegas (us-west4)"},{"value":"europe-central2","label":"Warsaw (europe-central2)"},{"value":"europe-west1","label":"Belgium (europe-west1)"},{"value":"europe-west2","label":"London (europe-west2)"},{"value":"europe-west3","label":"Frankfurt (europe-west3)"},{"value":"europe-west6","label":"Zurich (europe-west6)"},{"value":"asia-east2","label":"Hong Kong (asia-east2)"},{"value":"asia-northeast1","label":"Tokyo (asia-northeast1)"},{"value":"asia-northeast2","label":"Osaka (asia-northeast2)"},{"value":"asia-northeast3","label":"Seoul (asia-northeast3)"},{"value":"asia-south1","label":"Mumbai (asia-south1)"},{"value":"asia-southeast2","label":"Jakarta (asia-southeast2)"},{"value":"northamerica-northeast1","label":"Montreal (northamerica-northeast1)"},{"value":"southamerica-east1","label":"Sao Paulo (southamerica-east1)"},{"value":"australia-southeast1","label":"Sydney (australia-southeast1)"}],"default":"us-central1","immutable":true},{"param":"CLOUD_STORAGE_BUCKET","label":"Cloud Storage bucket for images","type":"STRING","description":"The Cloud Storage bucket where images that are to be processed are located. API requests with input urls or paths that are not inside this bucket will be dropped.\n","required":true,"default":"${STORAGE_BUCKET}","example":"my-project-12345.appspot.com","validationRegex":"^([0-9a-z_.-]*)$","validationErrorMessage":"Invalid storage bucket"},{"param":"CORS_ORIGIN_ALLOW_LIST","label":"Allowed CORS origins","type":"STRING","description":"A comma delimited value of allowed CORS origins. Use the default of '*' to allow all origins. This is useful to lockdown your API and only allow your own website to embed the images directly. Note this will not prevent non-browser requests from accessing your API.\n","required":true,"default":"*","example":"*.example.com,invertase.io"},{"param":"HOSTNAME","label":"Hostname","type":"STRING","description":"An optional hostname to fetch images from. This can used to construct the original image URL in the response. Include ONLY the hostname, without any protocol or path. The protocol https:// will be added automatically. This parameter is needed if you would like to query using local path names such as /my/image.jpg. instead of the full URL.\n","example":"example.com"}],"preinstallContent":"# Image Processing Extension\n\nUse this extension to optimize and transform images via a powerful HTTP API with over 30 image operations for enhancing and manipulating your images.\n\n## How It Works\n\nWhen you install this extension, it deploys a Cloud Function that exposes an HTTP API. All requests must be sent to the /process endpoint of the function. You perform image operations by passing an operations query parameter—a URL-encoded JSON string defining the operations to execute.\n\n### Example\n\nDefine your operations like so:\n\n```js\nconst operations = [\n  {\n    operation: 'input',\n    type: 'url',\n    url: 'https://example.com/image.jpg',\n  },\n  {\n    operation: 'grayscale',\n  },\n  {\n    operation: 'output',\n    format: 'webp',\n  },\n];\n\nconst params = `?operations=${encodeURIComponent(JSON.stringify(operations))}`;\n```\n\nThen, make your GET request to your Cloud Function using the correct endpoint. For example:\n\n```\nhttps://<your-configured-region>-<your-project-id>.cloudfunctions.net/<extension-instance-id>/process${params}\n```\n\nThe extension also comes with a JavaScript utility library for simplifying the creation of operations:\n\n```ts\nimport { builder } from '@invertase/image-processing-api';\n\nconst output = builder()\n  .input({\n    url: 'https://example.com/image.jpg',\n  })\n  .grayscale()\n  .output({\n    format: 'webp',\n  });\n\nconst params = `?operations=${output.toEncodedJSONString()}`;\n```\n\nView the [official documentation](https://extensions.invertase.dev/image-processing-api) for full usage examples.\n\n### Relative paths\n\nThe extension provides a hostname parameter, allowing you to query the function with local paths (starting with `/`).\n\nAs an example, if we set the hostname parameter to \"example.com\" then the following operation:\n\n```js\nconst operations = [\n  {\n    operation: 'input',\n    type: 'url',\n    url: '/image.jpg',\n  },\n  {\n    operation: 'grayscale',\n  },\n  {\n    operation: 'output',\n    format: 'webp',\n  },\n];\n```\n\nis equivalent to the earlier given example. The url `https://example.com/image.jpg` is constructed within the extension.\n\nNote that this will **only** apply to paths that begin with a forward slash `/`, and **only** when the hostname parameter is set.\n\n#### Additional setup\n\nBefore installing this extension, make sure that you've [set up a Cloud Storage bucket](https://firebase.google.com/docs/storage) in your Firebase project.\n\n#### Billing\n\nTo install an extension, your project must be on the [Blaze (pay as you go) plan](https://firebase.google.com/pricing)\n\n- You will be charged a small amount (typically around $0.01/month) for the Firebase resources required by this extension (even if it is not used).\n- This extension uses other Firebase and Google Cloud Platform services, which have associated charges if you exceed the service’s no-cost tier:\n  - Cloud Storage\n  - Cloud Functions (Node.js 10+ runtime. [See FAQs](https://firebase.google.com/support/faq#extensions-pricing))\n","postinstallContent":"### See it in action\n\nYou can test out this extension right away!\n\n1. Create an operations list, for example:\n\n```js\nconst operations = [\n  {\n    operation: 'input',\n    type: 'url',\n    url: 'https://images.unsplash.com/photo-1663659552548-25d7771802c9?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=774&q=80',\n  },\n  {\n    operation: 'grayscale',\n  },\n  {\n    operation: 'output',\n    format: 'webp',\n  },\n];\n```\n\n2. Stringify and encode the list:\n\n```js\nencodeURIComponent(JSON.stringify(operations));\n```\n\n3. Call the deployed `process` Cloud Function:\n\n[https://${param:LOCATION}-${param:PROJECT_ID}.cloudfunctions.net/ext-${param:EXT_INSTANCE_ID}-handler/process?operations=%5B%7B%22operation%22%3A%22input%22%2C%22type%22%3A%22url%22%2C%22url%22%3A%22https%3A%2F%2Fimages.unsplash.com%2Fphoto-1663659552548-25d7771802c9%3Fixlib%3Drb-1.2.1%26ixid%3DMnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8%26auto%3Dformat%26fit%3Dcrop%26w%3D774%26q%3D80%22%7D%2C%7B%22operation%22%3A%22grayscale%22%7D%2C%7B%22operation%22%3A%22output%22%2C%22format%22%3A%22webp%22%7D%5D](https://${param:LOCATION}-${param:PROJECT_ID}.cloudfunctions.net/ext-${param:EXT_INSTANCE_ID}-handler/process?operations=%5B%7B%22operation%22%3A%22input%22%2C%22type%22%3A%22url%22%2C%22url%22%3A%22https%3A%2F%2Fimages.unsplash.com%2Fphoto-1663659552548-25d7771802c9%3Fixlib%3Drb-1.2.1%26ixid%3DMnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8%26auto%3Dformat%26fit%3Dcrop%26w%3D774%26q%3D80%22%7D%2C%7B%22operation%22%3A%22grayscale%22%7D%2C%7B%22operation%22%3A%22output%22%2C%22format%22%3A%22webp%22%7D%5D)\n\nThe result will be a grayscaled version of the image, in WebP format.\n\n### Using the extension\n\nSee the [official documentation](https://extensions.invertase.dev/image-processing-api) for more information on using the extension, including the full list of supported operations you can use.\n\n### Monitoring\n\nAs a best practice, you can [monitor the activity](https://firebase.google.com/docs/extensions/manage-installed-extensions#monitor) of your installed extension, including checks on its health, usage, and logs.\n","readmeContent":"# Image Processing API\n\n**Author**: Invertase (**[https://invertase.io](https://invertase.io)**)\n\n**Description**: Use this extension to optimize and transform images via a powerful HTTP API with over 30 different image operations to enhance and manipulate your images.\n\n**Details**: # Image Processing Extension\nUse this extension to optimize and transform images via a powerful HTTP API with over 30 image operations for enhancing and manipulating your images.\n\n## How It Works\n\nWhen you install this extension, it deploys a Cloud Function that exposes an HTTP API. All requests must be sent to the /process endpoint of the function. You perform image operations by passing an operations query parameter—a URL-encoded JSON string defining the operations to execute.\n\n### Example\n\nDefine your operations like so:\n\n```js\nconst operations = [\n  {\n    operation: 'input',\n    type: 'url',\n    url: 'https://example.com/image.jpg',\n  },\n  {\n    operation: 'grayscale',\n  },\n  {\n    operation: 'output',\n    format: 'webp',\n  },\n];\n\nconst params = `?operations=${encodeURIComponent(JSON.stringify(operations))}`;\n```\n\nThen, make your GET request to your Cloud Function using the correct endpoint. For example:\n\n```\nhttps://<your-configured-region>-<your-project-id>.cloudfunctions.net/<extension-instance-id>/process${params}\n```\n\nThe extension also comes with a JavaScript utility library for simplifying the creation of operations:\n\n```ts\nimport { builder } from '@invertase/image-processing-api';\n\nconst output = builder()\n  .input({\n    url: 'https://example.com/image.jpg',\n  })\n  .grayscale()\n  .output({\n    format: 'webp',\n  });\n\nconst params = `?operations=${output.toEncodedJSONString()}`;\n```\n\nView the [official documentation](https://extensions.invertase.dev/image-processing-api) for full usage examples.\n\n### Relative paths\n\nThe extension provides a hostname parameter, allowing you to query the function with local paths (starting with `/`).\n\nAs an example, if we set the hostname parameter to \"example.com\" then the following operation:\n\n```js\nconst operations = [\n  {\n    operation: 'input',\n    type: 'url',\n    url: '/image.jpg',\n  },\n  {\n    operation: 'grayscale',\n  },\n  {\n    operation: 'output',\n    format: 'webp',\n  },\n];\n```\n\nis equivalent to the earlier given example. The url `https://example.com/image.jpg` is constructed within the extension.\n\nNote that this will **only** apply to paths that begin with a forward slash `/`, and **only** when the hostname parameter is set.\n\n#### Additional setup\n\nBefore installing this extension, make sure that you've [set up a Cloud Storage bucket](https://firebase.google.com/docs/storage) in your Firebase project.\n\n#### Billing\n\nTo install an extension, your project must be on the [Blaze (pay as you go) plan](https://firebase.google.com/pricing)\n\n- You will be charged a small amount (typically around $0.01/month) for the Firebase resources required by this extension (even if it is not used).\n- This extension uses other Firebase and Google Cloud Platform services, which have associated charges if you exceed the service’s no-cost tier:\n  - Cloud Storage\n  - Cloud Functions (Node.js 10+ runtime. [See FAQs](https://firebase.google.com/support/faq#extensions-pricing))\n\n**Configuration Parameters:**\n\n- Cloud Functions location: Where do you want to deploy the functions created for this extension? You usually want a location close to your Storage bucket. For help selecting a location, refer to the [location selection guide](https://firebase.google.com/docs/functions/locations).\n\n- Cloud Storage bucket for images: The Cloud Storage bucket where images that are to be processed are located. API requests with input urls or paths that are not inside this bucket will be dropped.\n\n- Allowed CORS origins: A comma delimited value of allowed CORS origins. Use the default of '\\*' to allow all origins. This is useful to lockdown your API and only allow your own website to embed the images directly. Note this will not prevent non-browser requests from accessing your API.\n\n- Hostname: An optional hostname to fetch images from. This can used to construct the original image URL in the response. Include ONLY the hostname, without any protocol or path. The protocol https:// will be added automatically. This parameter is needed if you would like to query using local path names such as /my/image.jpg. instead of the full URL.\n\n**Cloud Functions:**\n\n- **handler:** Serves a API accepting incoming HTTP requests.\n\n**APIs Used**:\n\n- storage-component.googleapis.com (Reason: Needed to use Cloud Storage)\n\n**Access Required**:\n\nThis extension will operate with the following project IAM roles:\n\n- storage.admin (Reason: Allows the extension to read images in Cloud Storage)\n","displayName":"Image Processing API"},"fetchTime":"2025-04-03T16:10:15.973372Z","lastOperationName":"projects/invertase-firebase-extensions/operations/443dc71d-01a6-4640-a13c-51448d5c4de1","state":"ACTIVE"},"params":{"CORS_ORIGIN_ALLOW_LIST":"*","LOCATION":"europe-west3","CLOUD_STORAGE_BUCKET":"website-5a18c.firebasestorage.app"},"populatedPostinstallContent":"### See it in action\n\nYou can test out this extension right away!\n\n1. Create an operations list, for example:\n\n```js\nconst operations = [\n  {\n    operation: 'input',\n    type: 'url',\n    url: 'https://images.unsplash.com/photo-1663659552548-25d7771802c9?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=774&q=80',\n  },\n  {\n    operation: 'grayscale',\n  },\n  {\n    operation: 'output',\n    format: 'webp',\n  },\n];\n```\n\n2. Stringify and encode the list:\n\n```js\nencodeURIComponent(JSON.stringify(operations));\n```\n\n3. Call the deployed `process` Cloud Function:\n\n[https://europe-west3-website-5a18c.cloudfunctions.net/ext-image-processing-api-handler/process?operations=%5B%7B%22operation%22%3A%22input%22%2C%22type%22%3A%22url%22%2C%22url%22%3A%22https%3A%2F%2Fimages.unsplash.com%2Fphoto-1663659552548-25d7771802c9%3Fixlib%3Drb-1.2.1%26ixid%3DMnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8%26auto%3Dformat%26fit%3Dcrop%26w%3D774%26q%3D80%22%7D%2C%7B%22operation%22%3A%22grayscale%22%7D%2C%7B%22operation%22%3A%22output%22%2C%22format%22%3A%22webp%22%7D%5D](https://europe-west3-website-5a18c.cloudfunctions.net/ext-image-processing-api-handler/process?operations=%5B%7B%22operation%22%3A%22input%22%2C%22type%22%3A%22url%22%2C%22url%22%3A%22https%3A%2F%2Fimages.unsplash.com%2Fphoto-1663659552548-25d7771802c9%3Fixlib%3Drb-1.2.1%26ixid%3DMnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8%26auto%3Dformat%26fit%3Dcrop%26w%3D774%26q%3D80%22%7D%2C%7B%22operation%22%3A%22grayscale%22%7D%2C%7B%22operation%22%3A%22output%22%2C%22format%22%3A%22webp%22%7D%5D)\n\nThe result will be a grayscaled version of the image, in WebP format.\n\n### Using the extension\n\nSee the [official documentation](https://extensions.invertase.dev/image-processing-api) for more information on using the extension, including the full list of supported operations you can use.\n\n### Monitoring\n\nAs a best practice, you can [monitor the activity](https://firebase.google.com/docs/extensions/manage-installed-extensions#monitor) of your installed extension, including checks on its health, usage, and logs.\n","extensionRef":"invertase/image-processing-api","extensionVersion":"0.2.1","systemParams":{"firebaseextensions.v1beta.function/minInstances":"0","firebaseextensions.v1beta.function/vpcConnectorEgressSettings":"VPC_CONNECTOR_EGRESS_SETTINGS_UNSPECIFIED"}},"lastOperationName":"projects/website-5a18c/operations/e622a0be-0e1a-44cc-aefe-0a3a8c5bfe4c","serviceAccountEmail":"ext-image-processing-api@website-5a18c.iam.gserviceaccount.com","lastOperationType":"CREATE","etag":"1cfc037ee3e595627a0a1255b18d3e691ad149429459bde03adf427ae0b1aef7"}]}
[debug] [2025-07-16T21:46:31.922Z] Failed to validate key FIREBASE_ADMIN_TYPE: Error: Key FIREBASE_ADMIN_TYPE starts with a reserved prefix (X_GOOGLE_ FIREBASE_ EXT_)
[debug] [2025-07-16T21:46:31.922Z] Failed to validate key FIREBASE_ADMIN_PRIVATE_KEY_ID: Error: Key FIREBASE_ADMIN_PRIVATE_KEY_ID starts with a reserved prefix (X_GOOGLE_ FIREBASE_ EXT_)
[debug] [2025-07-16T21:46:31.922Z] Failed to validate key FIREBASE_ADMIN_PRIVATE_KEY: Error: Key FIREBASE_ADMIN_PRIVATE_KEY starts with a reserved prefix (X_GOOGLE_ FIREBASE_ EXT_)
[debug] [2025-07-16T21:46:31.922Z] Failed to validate key FIREBASE_ADMIN_CLIENT_EMAIL: Error: Key FIREBASE_ADMIN_CLIENT_EMAIL starts with a reserved prefix (X_GOOGLE_ FIREBASE_ EXT_)
[debug] [2025-07-16T21:46:31.922Z] Failed to validate key FIREBASE_ADMIN_CLIENT_ID: Error: Key FIREBASE_ADMIN_CLIENT_ID starts with a reserved prefix (X_GOOGLE_ FIREBASE_ EXT_)
[debug] [2025-07-16T21:46:31.922Z] Failed to validate key FIREBASE_ADMIN_AUTH_URI: Error: Key FIREBASE_ADMIN_AUTH_URI starts with a reserved prefix (X_GOOGLE_ FIREBASE_ EXT_)
[debug] [2025-07-16T21:46:31.922Z] Failed to validate key FIREBASE_ADMIN_TOKEN_URI: Error: Key FIREBASE_ADMIN_TOKEN_URI starts with a reserved prefix (X_GOOGLE_ FIREBASE_ EXT_)
[debug] [2025-07-16T21:46:31.922Z] Failed to validate key FIREBASE_ADMIN_AUTH_PROVIDER_X509_CERT_URL: Error: Key FIREBASE_ADMIN_AUTH_PROVIDER_X509_CERT_URL starts with a reserved prefix (X_GOOGLE_ FIREBASE_ EXT_)
[debug] [2025-07-16T21:46:31.922Z] Failed to validate key FIREBASE_ADMIN_CLIENT_X509_CERT_URL: Error: Key FIREBASE_ADMIN_CLIENT_X509_CERT_URL starts with a reserved prefix (X_GOOGLE_ FIREBASE_ EXT_)
[error] Error: Failed to load environment variables from .env.:
[error] - Error Key FIREBASE_ADMIN_TYPE starts with a reserved prefix (X_GOOGLE_ FIREBASE_ EXT_)
[error] - Error Key FIREBASE_ADMIN_PRIVATE_KEY_ID starts with a reserved prefix (X_GOOGLE_ FIREBASE_ EXT_)
[error] - Error Key FIREBASE_ADMIN_PRIVATE_KEY starts with a reserved prefix (X_GOOGLE_ FIREBASE_ EXT_)
[error] - Error Key FIREBASE_ADMIN_CLIENT_EMAIL starts with a reserved prefix (X_GOOGLE_ FIREBASE_ EXT_)
[error] - Error Key FIREBASE_ADMIN_CLIENT_ID starts with a reserved prefix (X_GOOGLE_ FIREBASE_ EXT_)
[error] - Error Key FIREBASE_ADMIN_AUTH_URI starts with a reserved prefix (X_GOOGLE_ FIREBASE_ EXT_)
[error] - Error Key FIREBASE_ADMIN_TOKEN_URI starts with a reserved prefix (X_GOOGLE_ FIREBASE_ EXT_)
[error] - Error Key FIREBASE_ADMIN_AUTH_PROVIDER_X509_CERT_URL starts with a reserved prefix (X_GOOGLE_ FIREBASE_ EXT_)
[error] - Error Key FIREBASE_ADMIN_CLIENT_X509_CERT_URL starts with a reserved prefix (X_GOOGLE_ FIREBASE_ EXT_)
[debug] [2025-07-16T21:53:32.792Z] ----------------------------------------------------------------------
[debug] [2025-07-16T21:53:32.797Z] Command:       /nix/store/ws50yvm6vzlzf7jzz6n7xh4szddrack1-nodejs-20.19.1/bin/node /nix/store/gv0i9ndcpzjpfi2yr06402kzy90q51ki-firebase-tools-14.10.1/lib/node_modules/firebase-tools/lib/bin/firebase.js emulators:start --project=website-5a18c --only=auth,firestore
[debug] [2025-07-16T21:53:32.798Z] CLI Version:   14.10.1
[debug] [2025-07-16T21:53:32.800Z] Platform:      linux
[debug] [2025-07-16T21:53:32.802Z] Node Version:  v20.19.1
[debug] [2025-07-16T21:53:32.802Z] Time:          Wed Jul 16 2025 21:53:32 GMT+0000 (Coordinated Universal Time)
[debug] [2025-07-16T21:53:32.802Z] ----------------------------------------------------------------------
[debug] 
[debug] [2025-07-16T21:53:33.343Z] Object "/hosting" in "firebase.json" has unknown property: {"additionalProperty":"webFrameworks"}
[debug] [2025-07-16T21:53:33.343Z] Field "/hosting" in "firebase.json" is possibly invalid: must be array
[debug] [2025-07-16T21:53:33.343Z] Field "/hosting" in "firebase.json" is possibly invalid: must match a schema in anyOf
[debug] [2025-07-16T21:53:33.370Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2025-07-16T21:53:33.371Z] > authorizing via signed-in user (bakirbehmen@gmail.com)
[debug] [2025-07-16T21:53:33.899Z] openjdk version "21.0.7" 2025-04-15
OpenJDK Runtime Environment (build 21.0.7+6-nixos)
OpenJDK 64-Bit Server VM (build 21.0.7+6-nixos, mixed mode, sharing)

[debug] [2025-07-16T21:53:33.930Z] Parsed Java major version: 21
[info] i  emulators: Starting emulators: firestore {"metadata":{"emulator":{"name":"hub"},"message":"Starting emulators: firestore"}}
[warn] ⚠  auth: Not starting the auth emulator, make sure you have run firebase init. {"metadata":{"emulator":{"name":"auth"},"message":"Not starting the auth emulator, make sure you have run firebase init."}}
[warn] ⚠  hub: Error when trying to check port 4400 on ::1: Error: listen EADDRNOTAVAIL: address not available ::1:4400 {"metadata":{"emulator":{"name":"hub"},"message":"Error when trying to check port 4400 on ::1: Error: listen EADDRNOTAVAIL: address not available ::1:4400"}}
[warn] ⚠  hub: Port 4400 is available on 127.0.0.1 but not ::1. This may cause issues with some clients. {"metadata":{"emulator":{"name":"hub"},"message":"Port 4400 is available on 127.0.0.1 but not ::1. This may cause issues with some clients."}}
[warn] ⚠  hub: If you encounter connectivity issues, consider switching to a different port or explicitly specifying "host": "<ip address>" instead of hostname in firebase.json {"metadata":{"emulator":{"name":"hub"},"message":"If you encounter connectivity issues, consider switching to a different port or explicitly specifying \"host\": \"<ip address>\" instead of hostname in firebase.json"}}
[warn] ⚠  ui: Error when trying to check port 4000 on ::1: Error: listen EADDRNOTAVAIL: address not available ::1:4000 {"metadata":{"emulator":{"name":"ui"},"message":"Error when trying to check port 4000 on ::1: Error: listen EADDRNOTAVAIL: address not available ::1:4000"}}
[warn] ⚠  ui: Port 4000 is available on 127.0.0.1 but not ::1. This may cause issues with some clients. {"metadata":{"emulator":{"name":"ui"},"message":"Port 4000 is available on 127.0.0.1 but not ::1. This may cause issues with some clients."}}
[warn] ⚠  ui: If you encounter connectivity issues, consider switching to a different port or explicitly specifying "host": "<ip address>" instead of hostname in firebase.json {"metadata":{"emulator":{"name":"ui"},"message":"If you encounter connectivity issues, consider switching to a different port or explicitly specifying \"host\": \"<ip address>\" instead of hostname in firebase.json"}}
[warn] ⚠  logging: Error when trying to check port 4500 on ::1: Error: listen EADDRNOTAVAIL: address not available ::1:4500 {"metadata":{"emulator":{"name":"logging"},"message":"Error when trying to check port 4500 on ::1: Error: listen EADDRNOTAVAIL: address not available ::1:4500"}}
[warn] ⚠  logging: Port 4500 is available on 127.0.0.1 but not ::1. This may cause issues with some clients. {"metadata":{"emulator":{"name":"logging"},"message":"Port 4500 is available on 127.0.0.1 but not ::1. This may cause issues with some clients."}}
[warn] ⚠  logging: If you encounter connectivity issues, consider switching to a different port or explicitly specifying "host": "<ip address>" instead of hostname in firebase.json {"metadata":{"emulator":{"name":"logging"},"message":"If you encounter connectivity issues, consider switching to a different port or explicitly specifying \"host\": \"<ip address>\" instead of hostname in firebase.json"}}
[warn] ⚠  firestore: Error when trying to check port 8080 on ::1: Error: listen EADDRNOTAVAIL: address not available ::1:8080 {"metadata":{"emulator":{"name":"firestore"},"message":"Error when trying to check port 8080 on ::1: Error: listen EADDRNOTAVAIL: address not available ::1:8080"}}
[warn] ⚠  firestore: Port 8080 is available on 127.0.0.1 but not ::1. This may cause issues with some clients. {"metadata":{"emulator":{"name":"firestore"},"message":"Port 8080 is available on 127.0.0.1 but not ::1. This may cause issues with some clients."}}
[warn] ⚠  firestore: If you encounter connectivity issues, consider switching to a different port or explicitly specifying "host": "<ip address>" instead of hostname in firebase.json {"metadata":{"emulator":{"name":"firestore"},"message":"If you encounter connectivity issues, consider switching to a different port or explicitly specifying \"host\": \"<ip address>\" instead of hostname in firebase.json"}}
[warn] ⚠  firestore.websocket: Error when trying to check port 9150 on ::1: Error: listen EADDRNOTAVAIL: address not available ::1:9150 {"metadata":{"emulator":{"name":"firestore"},"message":"Error when trying to check port 9150 on ::1: Error: listen EADDRNOTAVAIL: address not available ::1:9150"}}
[warn] ⚠  firestore: Port 9150 is available on 127.0.0.1 but not ::1. This may cause issues with some clients. {"metadata":{"emulator":{"name":"firestore"},"message":"Port 9150 is available on 127.0.0.1 but not ::1. This may cause issues with some clients."}}
[warn] ⚠  firestore: If you encounter connectivity issues, consider switching to a different port or explicitly specifying "host": "<ip address>" instead of hostname in firebase.json {"metadata":{"emulator":{"name":"firestore"},"message":"If you encounter connectivity issues, consider switching to a different port or explicitly specifying \"host\": \"<ip address>\" instead of hostname in firebase.json"}}
[debug] [2025-07-16T21:53:33.957Z] assigned listening specs for emulators {"user":{"hub":[{"address":"127.0.0.1","family":"IPv4","port":4400}],"ui":[{"address":"127.0.0.1","family":"IPv4","port":4000}],"logging":[{"address":"127.0.0.1","family":"IPv4","port":4500}],"firestore":[{"address":"127.0.0.1","family":"IPv4","port":8080}],"firestore.websocket":[{"address":"127.0.0.1","family":"IPv4","port":9150}]},"metadata":{"message":"assigned listening specs for emulators"}}
[debug] [2025-07-16T21:53:33.963Z] [hub] writing locator at /tmp/hub-website-5a18c.json
[debug] [2025-07-16T21:53:33.979Z] Checked if tokens are valid: false, expires at: 1752703517880
[debug] [2025-07-16T21:53:33.979Z] Checked if tokens are valid: false, expires at: 1752703517880
[debug] [2025-07-16T21:53:33.980Z] > refreshing access token with scopes: []
[debug] [2025-07-16T21:53:33.983Z] >>> [apiv2][query] POST https://www.googleapis.com/oauth2/v3/token [none]
[debug] [2025-07-16T21:53:33.983Z] >>> [apiv2][body] POST https://www.googleapis.com/oauth2/v3/token [omitted]
[debug] [2025-07-16T21:53:34.093Z] <<< [apiv2][status] POST https://www.googleapis.com/oauth2/v3/token 200
[debug] [2025-07-16T21:53:34.093Z] <<< [apiv2][body] POST https://www.googleapis.com/oauth2/v3/token [omitted]
[debug] [2025-07-16T21:53:34.105Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/website-5a18c [none]
[debug] [2025-07-16T21:53:34.317Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/website-5a18c 200
[debug] [2025-07-16T21:53:34.318Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/website-5a18c {"projectId":"website-5a18c","projectNumber":"636702053767","displayName":"website","name":"projects/website-5a18c","resources":{"hostingSite":"website-5a18c"},"state":"ACTIVE","etag":"1_a6122a7f-7df1-4ea8-844b-57f64ef44324"}
[debug] [2025-07-16T21:53:34.327Z] Ignoring unsupported arg: auto_download {"metadata":{"emulator":{"name":"firestore"},"message":"Ignoring unsupported arg: auto_download"}}
[debug] [2025-07-16T21:53:34.328Z] Ignoring unsupported arg: single_project_mode_error {"metadata":{"emulator":{"name":"firestore"},"message":"Ignoring unsupported arg: single_project_mode_error"}}
[debug] [2025-07-16T21:53:34.328Z] Starting Firestore Emulator with command {"binary":"java","args":["-Dgoogle.cloud_firestore.debug_log_level=FINE","-Duser.language=en","-jar","/nix/store/6630rdigdc1h6ay3q6zs9bnvj2zrs70g-emulators/cloud-firestore-emulator-v1.19.8.jar","--host","127.0.0.1","--port",8080,"--websocket_port",9150,"--project_id","website-5a18c","--rules","/home/user/studio/firestore.rules","--single_project_mode",true],"optionalArgs":["port","webchannel_port","host","rules","websocket_port","functions_emulator","seed_from_export","project_id","single_project_mode"],"joinArgs":false,"shell":false,"port":8080} {"metadata":{"emulator":{"name":"firestore"},"message":"Starting Firestore Emulator with command {\"binary\":\"java\",\"args\":[\"-Dgoogle.cloud_firestore.debug_log_level=FINE\",\"-Duser.language=en\",\"-jar\",\"/nix/store/6630rdigdc1h6ay3q6zs9bnvj2zrs70g-emulators/cloud-firestore-emulator-v1.19.8.jar\",\"--host\",\"127.0.0.1\",\"--port\",8080,\"--websocket_port\",9150,\"--project_id\",\"website-5a18c\",\"--rules\",\"/home/user/studio/firestore.rules\",\"--single_project_mode\",true],\"optionalArgs\":[\"port\",\"webchannel_port\",\"host\",\"rules\",\"websocket_port\",\"functions_emulator\",\"seed_from_export\",\"project_id\",\"single_project_mode\"],\"joinArgs\":false,\"shell\":false,\"port\":8080}"}}
[info] i  firestore: Firestore Emulator logging to firestore-debug.log {"metadata":{"emulator":{"name":"firestore"},"message":"Firestore Emulator logging to firestore-debug.log"}}
[debug] [2025-07-16T21:53:38.910Z] Jul 16, 2025 9:53:38 PM com.google.cloud.datastore.emulator.firestore.websocket.WebSocketServer start
INFO: Started WebSocket server on ws://127.0.0.1:9150
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jul 16, 2025 9:53:38 PM com.google.cloud.datastore.emulator.firestore.websocket.WebSocketServer start\nINFO: Started WebSocket server on ws://127.0.0.1:9150\n"}}
[debug] [2025-07-16T21:53:39.039Z] API endpoint: http://127.0.0.1:8080
If you are using a library that supports the FIRESTORE_EMULATOR_HOST environment variable, run:

   export FIRESTORE_EMULATOR_HOST=127.0.0.1:8080

If you are running a Firestore in Datastore Mode project, run:

   export DATASTORE_EMULATOR_HOST=127.0.0.1:8080

Note: Support for Datastore Mode is in preview. If you encounter any bugs please file at https://github.com/firebase/firebase-tools/issues.
Dev App Server is now running.

 {"metadata":{"emulator":{"name":"firestore"},"message":"API endpoint: http://127.0.0.1:8080\nIf you are using a library that supports the FIRESTORE_EMULATOR_HOST environment variable, run:\n\n   export FIRESTORE_EMULATOR_HOST=127.0.0.1:8080\n\nIf you are running a Firestore in Datastore Mode project, run:\n\n   export DATASTORE_EMULATOR_HOST=127.0.0.1:8080\n\nNote: Support for Datastore Mode is in preview. If you encounter any bugs please file at https://github.com/firebase/firebase-tools/issues.\nDev App Server is now running.\n\n"}}
[info] ✔  firestore: Firestore Emulator UI websocket is running on 9150. {"metadata":{"emulator":{"name":"firestore"},"message":"Firestore Emulator UI websocket is running on 9150."}}
[debug] [2025-07-16T21:53:39.276Z] Could not find VSCode notification endpoint: FetchError: request to http://localhost:40001/vscode/notify failed, reason: connect ECONNREFUSED 127.0.0.1:40001. If you are not running the Firebase Data Connect VSCode extension, this is expected and not an issue.
[info] 
┌─────────────────────────────────────────────────────────────┐
│ ✔  All emulators ready! It is now safe to connect your app. │
│ i  View Emulator UI at http://127.0.0.1:4000/               │
└─────────────────────────────────────────────────────────────┘

┌───────────┬────────────────┬─────────────────────────────────┐
│ Emulator  │ Host:Port      │ View in Emulator UI             │
├───────────┼────────────────┼─────────────────────────────────┤
│ Firestore │ 127.0.0.1:8080 │ http://127.0.0.1:4000/firestore │
└───────────┴────────────────┴─────────────────────────────────┘
  Emulator Hub host: 127.0.0.1 port: 4400
  Other reserved ports: 4500, 9150

Issues? Report them at https://github.com/firebase/firebase-tools/issues and attach the *-debug.log files.
 
[debug] [2025-07-16T21:54:07.574Z] Jul 16, 2025 9:54:07 PM com.google.cloud.datastore.emulator.firestore.websocket.WebSocketChannelHandler initChannel
INFO: Connected to new websocket client
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jul 16, 2025 9:54:07 PM com.google.cloud.datastore.emulator.firestore.websocket.WebSocketChannelHandler initChannel\nINFO: Connected to new websocket client\n"}}
[debug] [2025-07-16T21:56:31.024Z] Jul 16, 2025 9:56:30 PM com.google.cloud.datastore.emulator.firestore.websocket.WebSocketChannelHandler initChannel
INFO: Connected to new websocket client
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jul 16, 2025 9:56:30 PM com.google.cloud.datastore.emulator.firestore.websocket.WebSocketChannelHandler initChannel\nINFO: Connected to new websocket client\n"}}
[debug] [2025-07-16T21:56:31.896Z] Jul 16, 2025 9:56:31 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jul 16, 2025 9:56:31 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-07-16T21:56:32.189Z] Jul 16, 2025 9:56:32 PM com.google.cloud.datastore.emulator.firestore.websocket.WebSocketChannelHandler initChannel
INFO: Connected to new websocket client
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jul 16, 2025 9:56:32 PM com.google.cloud.datastore.emulator.firestore.websocket.WebSocketChannelHandler initChannel\nINFO: Connected to new websocket client\n"}}
[debug] [2025-07-16T21:56:32.444Z] Jul 16, 2025 9:56:32 PM io.grpc.netty.NettyServerTransport notifyTerminated
INFO: Transport failed
io.netty.handler.codec.http2.Http2Exception: Unexpected HTTP/1.x request: GET / 
	at io.netty.handler.codec.http2.Http2Exception.connectionError(Http2Exception.java:107)
	at io.netty.handler.codec.http2.Http2ConnectionHandler$PrefaceDecoder.readClientPrefaceString(Http2ConnectionHandler.java:315)
	at io.netty.handler.codec.http2.Http2ConnectionHandler$PrefaceDecoder.decode(Http2ConnectionHandler.java:245)
	at io.netty.handler.codec.http2.Http2ConnectionHandler.decode(Http2ConnectionHandler.java:451)
	at io.netty.handler.codec.ByteToMessageDecoder.decodeRemovalReentryProtection(ByteToMessageDecoder.java:530)
	at io.netty.handler.codec.ByteToMessageDecoder.callDecode(ByteToMessageDecoder.java:469)
	at io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:290)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:444)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)
	at io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1407)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:440)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)
	at io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:918)
	at io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:166)
	at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:788)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:724)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:650)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:994)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.base/java.lang.Thread.run(Thread.java:1583)

 {"metadata":{"emulator":{"name":"firestore"},"message":"Jul 16, 2025 9:56:32 PM io.grpc.netty.NettyServerTransport notifyTerminated\nINFO: Transport failed\nio.netty.handler.codec.http2.Http2Exception: Unexpected HTTP/1.x request: GET / \n\tat io.netty.handler.codec.http2.Http2Exception.connectionError(Http2Exception.java:107)\n\tat io.netty.handler.codec.http2.Http2ConnectionHandler$PrefaceDecoder.readClientPrefaceString(Http2ConnectionHandler.java:315)\n\tat io.netty.handler.codec.http2.Http2ConnectionHandler$PrefaceDecoder.decode(Http2ConnectionHandler.java:245)\n\tat io.netty.handler.codec.http2.Http2ConnectionHandler.decode(Http2ConnectionHandler.java:451)\n\tat io.netty.handler.codec.ByteToMessageDecoder.decodeRemovalReentryProtection(ByteToMessageDecoder.java:530)\n\tat io.netty.handler.codec.ByteToMessageDecoder.callDecode(ByteToMessageDecoder.java:469)\n\tat io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:290)\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:444)\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)\n\tat io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)\n\tat io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1407)\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:440)\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)\n\tat io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:918)\n\tat io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:166)\n\tat io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:788)\n\tat io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:724)\n\tat io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:650)\n\tat io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562)\n\tat io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:994)\n\tat io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)\n\tat io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\n\n"}}
[debug] [2025-07-16T21:56:32.569Z] Jul 16, 2025 9:56:32 PM io.grpc.netty.NettyServerTransport notifyTerminated
INFO: Transport failed
io.netty.handler.codec.http2.Http2Exception: HTTP/2 client preface string missing or corrupt. Hex dump for received bytes: 16030105a8010005a403038af6d78f8bfc5b7569dc0582c9
	at io.netty.handler.codec.http2.Http2Exception.connectionError(Http2Exception.java:107)
	at io.netty.handler.codec.http2.Http2ConnectionHandler$PrefaceDecoder.readClientPrefaceString(Http2ConnectionHandler.java:319)
	at io.netty.handler.codec.http2.Http2ConnectionHandler$PrefaceDecoder.decode(Http2ConnectionHandler.java:245)
	at io.netty.handler.codec.http2.Http2ConnectionHandler.decode(Http2ConnectionHandler.java:451)
	at io.netty.handler.codec.ByteToMessageDecoder.decodeRemovalReentryProtection(ByteToMessageDecoder.java:530)
	at io.netty.handler.codec.ByteToMessageDecoder.callDecode(ByteToMessageDecoder.java:469)
	at io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:290)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:444)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)
	at io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1407)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:440)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)
	at io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:918)
	at io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:166)
	at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:788)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:724)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:650)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:994)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.base/java.lang.Thread.run(Thread.java:1583)

 {"metadata":{"emulator":{"name":"firestore"},"message":"Jul 16, 2025 9:56:32 PM io.grpc.netty.NettyServerTransport notifyTerminated\nINFO: Transport failed\nio.netty.handler.codec.http2.Http2Exception: HTTP/2 client preface string missing or corrupt. Hex dump for received bytes: 16030105a8010005a403038af6d78f8bfc5b7569dc0582c9\n\tat io.netty.handler.codec.http2.Http2Exception.connectionError(Http2Exception.java:107)\n\tat io.netty.handler.codec.http2.Http2ConnectionHandler$PrefaceDecoder.readClientPrefaceString(Http2ConnectionHandler.java:319)\n\tat io.netty.handler.codec.http2.Http2ConnectionHandler$PrefaceDecoder.decode(Http2ConnectionHandler.java:245)\n\tat io.netty.handler.codec.http2.Http2ConnectionHandler.decode(Http2ConnectionHandler.java:451)\n\tat io.netty.handler.codec.ByteToMessageDecoder.decodeRemovalReentryProtection(ByteToMessageDecoder.java:530)\n\tat io.netty.handler.codec.ByteToMessageDecoder.callDecode(ByteToMessageDecoder.java:469)\n\tat io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:290)\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:444)\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)\n\tat io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)\n\tat io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1407)\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:440)\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)\n\tat io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:918)\n\tat io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:166)\n\tat io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:788)\n\tat io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:724)\n\tat io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:650)\n\tat io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562)\n\tat io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:994)\n\tat io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)\n\tat io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\n\n"}}
[debug] [2025-07-16T22:27:10.285Z] Jul 16, 2025 10:27:10 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jul 16, 2025 10:27:10 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-07-16T22:27:10.361Z] Jul 16, 2025 10:27:10 PM io.grpc.netty.NettyServerTransport notifyTerminated
INFO: Transport failed
io.netty.handler.codec.http2.Http2Exception: Unexpected HTTP/1.x request: GET / 
	at io.netty.handler.codec.http2.Http2Exception.connectionError(Http2Exception.java:107)
	at io.netty.handler.codec.http2.Http2ConnectionHandler$PrefaceDecoder.readClientPrefaceString(Http2ConnectionHandler.java:315)
	at io.netty.handler.codec.http2.Http2ConnectionHandler$PrefaceDecoder.decode(Http2ConnectionHandler.java:245)
	at io.netty.handler.codec.http2.Http2ConnectionHandler.decode(Http2ConnectionHandler.java:451)
	at io.netty.handler.codec.ByteToMessageDecoder.decodeRemovalReentryProtection(ByteToMessageDecoder.java:530)
	at io.netty.handler.codec.ByteToMessageDecoder.callDecode(ByteToMessageDecoder.java:469)
	at io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:290)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:444)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)
	at io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1407)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:440)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)
	at io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:918)
	at io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:166)
	at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:788)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:724)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:650)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:994)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.base/java.lang.Thread.run(Thread.java:1583)

 {"metadata":{"emulator":{"name":"firestore"},"message":"Jul 16, 2025 10:27:10 PM io.grpc.netty.NettyServerTransport notifyTerminated\nINFO: Transport failed\nio.netty.handler.codec.http2.Http2Exception: Unexpected HTTP/1.x request: GET / \n\tat io.netty.handler.codec.http2.Http2Exception.connectionError(Http2Exception.java:107)\n\tat io.netty.handler.codec.http2.Http2ConnectionHandler$PrefaceDecoder.readClientPrefaceString(Http2ConnectionHandler.java:315)\n\tat io.netty.handler.codec.http2.Http2ConnectionHandler$PrefaceDecoder.decode(Http2ConnectionHandler.java:245)\n\tat io.netty.handler.codec.http2.Http2ConnectionHandler.decode(Http2ConnectionHandler.java:451)\n\tat io.netty.handler.codec.ByteToMessageDecoder.decodeRemovalReentryProtection(ByteToMessageDecoder.java:530)\n\tat io.netty.handler.codec.ByteToMessageDecoder.callDecode(ByteToMessageDecoder.java:469)\n\tat io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:290)\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:444)\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)\n\tat io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)\n\tat io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1407)\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:440)\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)\n\tat io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:918)\n\tat io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:166)\n\tat io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:788)\n\tat io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:724)\n\tat io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:650)\n\tat io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562)\n\tat io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:994)\n\tat io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)\n\tat io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\n\n"}}
[debug] [2025-07-16T22:27:10.464Z] Jul 16, 2025 10:27:10 PM io.grpc.netty.NettyServerTransport notifyTerminated
INFO: Transport failed
io.netty.handler.codec.http2.Http2Exception: HTTP/2 client preface string missing or corrupt. Hex dump for received bytes: 16030105a8010005a403035119fcc73d22183959ffb0023e
	at io.netty.handler.codec.http2.Http2Exception.connectionError(Http2Exception.java:107)
	at io.netty.handler.codec.http2.Http2ConnectionHandler$PrefaceDecoder.readClientPrefaceString(Http2ConnectionHandler.java:319)
	at io.netty.handler.codec.http2.Http2ConnectionHandler$PrefaceDecoder.decode(Http2ConnectionHandler.java:245)
	at io.netty.handler.codec.http2.Http2ConnectionHandler.decode(Http2ConnectionHandler.java:451)
	at io.netty.handler.codec.ByteToMessageDecoder.decodeRemovalReentryProtection(ByteToMessageDecoder.java:530)
	at io.netty.handler.codec.ByteToMessageDecoder.callDecode(ByteToMessageDecoder.java:469)
	at io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:290)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:444)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)
	at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)
	at io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1407)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:440)
	at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)
	at io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:918)
	at io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:166)
	at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:788)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:724)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:650)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:994)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.base/java.lang.Thread.run(Thread.java:1583)

 {"metadata":{"emulator":{"name":"firestore"},"message":"Jul 16, 2025 10:27:10 PM io.grpc.netty.NettyServerTransport notifyTerminated\nINFO: Transport failed\nio.netty.handler.codec.http2.Http2Exception: HTTP/2 client preface string missing or corrupt. Hex dump for received bytes: 16030105a8010005a403035119fcc73d22183959ffb0023e\n\tat io.netty.handler.codec.http2.Http2Exception.connectionError(Http2Exception.java:107)\n\tat io.netty.handler.codec.http2.Http2ConnectionHandler$PrefaceDecoder.readClientPrefaceString(Http2ConnectionHandler.java:319)\n\tat io.netty.handler.codec.http2.Http2ConnectionHandler$PrefaceDecoder.decode(Http2ConnectionHandler.java:245)\n\tat io.netty.handler.codec.http2.Http2ConnectionHandler.decode(Http2ConnectionHandler.java:451)\n\tat io.netty.handler.codec.ByteToMessageDecoder.decodeRemovalReentryProtection(ByteToMessageDecoder.java:530)\n\tat io.netty.handler.codec.ByteToMessageDecoder.callDecode(ByteToMessageDecoder.java:469)\n\tat io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:290)\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:444)\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)\n\tat io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)\n\tat io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1407)\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:440)\n\tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)\n\tat io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:918)\n\tat io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:166)\n\tat io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:788)\n\tat io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:724)\n\tat io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:650)\n\tat io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562)\n\tat io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:994)\n\tat io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)\n\tat io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\n\n"}}
[debug] [2025-07-16T22:27:12.379Z] Jul 16, 2025 10:27:12 PM com.google.cloud.datastore.emulator.firestore.websocket.WebSocketChannelHandler initChannel
INFO: Connected to new websocket client
 {"metadata":{"emulator":{"name":"firestore"},"message":"Jul 16, 2025 10:27:12 PM com.google.cloud.datastore.emulator.firestore.websocket.WebSocketChannelHandler initChannel\nINFO: Connected to new websocket client\n"}}
